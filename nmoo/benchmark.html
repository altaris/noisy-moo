<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 12.0.2"/>
    <title>nmoo.benchmark API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../nmoo.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;nmoo</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#Pair">Pair</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Pair.__init__">Pair</a>
                        </li>
                        <li>
                                <a class="function" href="#Pair.filename_prefix">filename_prefix</a>
                        </li>
                        <li>
                                <a class="function" href="#Pair.global_pareto_population_filename">global_pareto_population_filename</a>
                        </li>
                        <li>
                                <a class="function" href="#Pair.pareto_population_filename">pareto_population_filename</a>
                        </li>
                        <li>
                                <a class="function" href="#Pair.pi_filename">pi_filename</a>
                        </li>
                        <li>
                                <a class="function" href="#Pair.result_filename">result_filename</a>
                        </li>
                        <li>
                                <a class="function" href="#Pair.top_layer_history_filename">top_layer_history_filename</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Benchmark">Benchmark</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Benchmark.__init__">Benchmark</a>
                        </li>
                        <li>
                                <a class="variable" href="#Benchmark.SUPPORTED_PERFOMANCE_INDICATORS">SUPPORTED_PERFOMANCE_INDICATORS</a>
                        </li>
                        <li>
                                <a class="function" href="#Benchmark.compute_global_pareto_populations">compute_global_pareto_populations</a>
                        </li>
                        <li>
                                <a class="function" href="#Benchmark.compute_performance_indicators">compute_performance_indicators</a>
                        </li>
                        <li>
                                <a class="function" href="#Benchmark.consolidate">consolidate</a>
                        </li>
                        <li>
                                <a class="function" href="#Benchmark.dump_results">dump_results</a>
                        </li>
                        <li>
                                <a class="function" href="#Benchmark.final_results">final_results</a>
                        </li>
                        <li>
                                <a class="function" href="#Benchmark.run">run</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../nmoo.html">nmoo</a><wbr>.benchmark    </h1>

                        <div class="docstring"><p>A benchmarking utility</p>
</div>

                        <input id="benchmark-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="benchmark-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">A benchmarking utility</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">import</span> <span class="nn">logging</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="kn">from</span> <span class="nn">pymoo.factory</span> <span class="kn">import</span> <span class="n">get_performance_indicator</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="kn">from</span> <span class="nn">pymoo.optimize</span> <span class="kn">import</span> <span class="n">minimize</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="kn">from</span> <span class="nn">nmoo.callbacks</span> <span class="kn">import</span> <span class="n">TimerCallback</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="kn">from</span> <span class="nn">nmoo.indicators.delta_f</span> <span class="kn">import</span> <span class="n">DeltaF</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="kn">from</span> <span class="nn">nmoo.utils.population</span> <span class="kn">import</span> <span class="n">pareto_frontier_mask</span><span class="p">,</span> <span class="n">population_list_to_dict</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="nd">@dataclass</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="k">class</span> <span class="nc">Pair</span><span class="p">:</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">    Represents a problem-algorithm pair and its result.</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>    <span class="n">algorithm_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>    <span class="n">algorithm_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>    <span class="n">n_run</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>    <span class="n">problem_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>    <span class="n">problem_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_run</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>    <span class="k">def</span> <span class="nf">filename_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;`.&quot;&quot;&quot;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_run</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>    <span class="k">def</span> <span class="nf">global_pareto_population_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.gpp.npz`.&quot;&quot;&quot;</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.gpp.npz&quot;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>    <span class="k">def</span> <span class="nf">pareto_population_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pp.npz`.&quot;&quot;&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.pp.npz&quot;</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>    <span class="k">def</span> <span class="nf">pi_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`.&quot;&quot;&quot;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.pi.csv&quot;</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>    <span class="k">def</span> <span class="nf">result_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv`.&quot;&quot;&quot;</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.csv&quot;</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>    <span class="k">def</span> <span class="nf">top_layer_history_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>        <span class="sd">&quot;&quot;&quot;Returns the filename of the top layer history.&quot;&quot;&quot;</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>        <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">_name</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.1-</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.npz&quot;</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="c1"># pylint: disable=too-many-instance-attributes</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="k">class</span> <span class="nc">Benchmark</span><span class="p">:</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">    A benchmark is constructed with a list of problems and pymoo algorithms</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    descriptions, and run each algorithm against each problem, storing all</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">    histories for later analysis.</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>    <span class="n">SUPPORTED_PERFOMANCE_INDICATORS</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>        <span class="s2">&quot;df&quot;</span><span class="p">,</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="s2">&quot;gd&quot;</span><span class="p">,</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="s2">&quot;gd+&quot;</span><span class="p">,</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        <span class="s2">&quot;hv&quot;</span><span class="p">,</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>        <span class="s2">&quot;igd&quot;</span><span class="p">,</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>        <span class="s2">&quot;igd+&quot;</span><span class="p">,</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>        <span class="s2">&quot;ps&quot;</span><span class="p">,</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>    <span class="p">]</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>    <span class="n">_algorithms</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">    List of algorithms to be benchmarked.</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>    <span class="n">_dump_histories</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">    Wether the history of each `WrappedProblem` involved in this benchmark</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">    should be written to disk.</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>    <span class="n">_max_retry</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">    Maximum number of attempts to run a given problem-algorithm pair before</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">    giving up.</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>    <span class="n">_n_runs</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">    Number of times to run a given problem/algorithm pair.</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>    <span class="n">_output_dir_path</span><span class="p">:</span> <span class="n">Path</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">    Path of the output directory.</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>    <span class="n">_performance_indicators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">    List of performance indicator to calculate during the benchmark.</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>    <span class="n">_problems</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">    List of problems to be benchmarked.</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>    <span class="n">_results</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">    Results of all runs.</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>        <span class="n">output_dir_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>        <span class="n">problems</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>        <span class="n">algorithms</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="n">n_runs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="n">dump_histories</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>        <span class="n">performance_indicators</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>        <span class="n">max_retry</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>    <span class="p">):</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">        Constructor. The set of problems to be benchmarked is represented by a</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">        dictionary with the following structure::</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="sd">            problems = {</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">                &lt;problem_name&gt;: &lt;problem_description&gt;,</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">                &lt;problem_name&gt;: &lt;problem_description&gt;,</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="sd">            }</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">        where `&lt;problem_name&gt;` is a user-defined string (but stay reasonable</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="sd">        since it may be used in filenames), and `&lt;problem_description&gt;` is a</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">        dictionary with the following keys:</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="sd">        * `df_n_evals` (int, optional): see the explanation of the `df`</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="sd">            performance indicator below; defaults to `1`;</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="sd">        * `evaluator` (optional): an algorithm evaluator object that will be</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="sd">            applied to every algorithm that run on this problem; if an</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="sd">            algorithm already has an evaluator attached to it (see</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="sd">            `&lt;algorithm_description&gt;` below), the evaluator attached to this</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">            problem takes precedence; note that the evaluator is deepcopied for</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">            every run of `minimize`;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">        * `hv_ref_point` (optional, `np.ndarray`): a reference point for</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">            computing hypervolume performance, see `performance_indicators`</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="sd">            argument;</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">        * `pareto_front` (optional, `np.ndarray`): a Pareto front subset;</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">        * `problem`: a `WrappedProblem` instance.</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="sd">        The set of algorithms to be used is specified similarly::</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">            algorithms = {</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">                &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">                &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">            }</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">        where `&lt;algorithm_name&gt;` is a user-defined string (but stay reasonable</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">        since it may be used in filenames), and `&lt;algorithm_description&gt;` is a</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">        dictionary with the following keys:</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">        * `algorithm`: a pymoo `Algorithm` object; note that it is deepcopied</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">            for every run of `minimize`;</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">        * `display` (optional): a custom `pymoo.util.display.Display` object</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">            for customization purposes;</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">        * `evaluator` (optional): an algorithm evaluator object; note that it</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a><span class="sd">            is deepcopied for every run of `minimize`;</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="sd">        * `return_least_infeasible` (optional, bool): if the algorithm cannot</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="sd">            find a feasable solution, wether the least infeasable solution</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">            should still be returned; defaults to `False`;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="sd">        * `seed` (optional, int): a seed;</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        * `termination` (optional): a pymoo termination criterion; note that it</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="sd">            is deepcopied for every run of `minimize`;</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        * `verbose` (optional, bool): wether outputs should be printed during</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">            during the execution of the algorithm; defaults to `False`.</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        Args:</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">            algorithms (Dict[str, dict]): Dict of all algorithms to be</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">                benchmarked.</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">            dump_histories (bool): Wether the history of each</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">                `WrappedProblem` involved in this benchmark should be written</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">                to disk. Defaults to `True`.</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">            max_retries (int): Maximum number of attempts to run a given</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">                problem-algorithm pair before giving up. Set it to `-1` to</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">                retry indefinitely.</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">            n_runs (int): Number of times to run a given problem/algorithm</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">                pair.</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">            problems (Dict[str, dict]): Dict of all problems to be benchmarked.</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">            performance_indicators (Optional[List[str]]): List of perfomance</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">                indicators to be calculated and included in the result</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">                dataframe (see `Benchmark.final_results`). Supported indicators</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">                are</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">                * `df`: ΔF metric, see the documentation of</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">                    `nmoo.indicators.delta_f.DeltaF`;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">                * `gd`: [generational distance](https://pymoo.org/misc/indicators.html#Generational-Distance-(GD)),</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">                * `gd+`: [generational distance plus](https://pymoo.org/misc/indicators.html#Generational-Distance-Plus-(GD+)),</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">                * `hv`: [hypervolume](https://pymoo.org/misc/indicators.html#Hypervolume),</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">                    requires `hv_ref_point` to be set in the problem</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">                    discription dictionaries, otherwise the value of this</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">                * `igd`: [inverted generational distance](https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-(IGD)),</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">                * `igd+`: [inverted generational distance](https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-Plus-(IGD+)),</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">                * `ps`: population size, or equivalently, the size of the</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">                    current Pareto front.</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">                In the result dataframe, the corresponding columns will be</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">                named `perf_&lt;name of indicator&gt;`, e.g. `perf_igd`. If left</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">                unspecified, defaults to `[&quot;igd&quot;]`.</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">algorithms</span><span class="p">:</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A benchmark requires at least 1 algorithm.&quot;</span><span class="p">)</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">algorithms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for algorithm &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; must be a dict.&quot;</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>                <span class="p">)</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>            <span class="k">if</span> <span class="s2">&quot;algorithm&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for algorithm &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; is missing mandatory &quot;</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>                    <span class="s2">&quot;key &#39;algorithm&#39;.&quot;</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>                <span class="p">)</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span> <span class="o">=</span> <span class="n">algorithms</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dump_histories</span> <span class="o">=</span> <span class="n">dump_histories</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span> <span class="o">=</span> <span class="n">max_retry</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        <span class="k">if</span> <span class="n">n_runs</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>                <span class="s2">&quot;The number of run (for each problem/algorithm pair) must be &quot;</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>                <span class="s2">&quot;at least 1.&quot;</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>            <span class="p">)</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_n_runs</span> <span class="o">=</span> <span class="n">n_runs</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir_path</span><span class="p">)</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>        <span class="k">if</span> <span class="n">performance_indicators</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;igd&quot;</span><span class="p">]</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>            <span class="k">for</span> <span class="n">pi</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">performance_indicators</span><span class="p">):</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>                <span class="k">if</span> <span class="n">pi</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Benchmark</span><span class="o">.</span><span class="n">SUPPORTED_PERFOMANCE_INDICATORS</span><span class="p">:</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown performance indicator &#39;</span><span class="si">{</span><span class="n">pi</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="p">)</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">problems</span><span class="p">:</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A benchmark requires at least 1 problem.&quot;</span><span class="p">)</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">problems</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for problem &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; must be a dict.&quot;</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>                <span class="p">)</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>            <span class="k">if</span> <span class="s2">&quot;problem&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for problem &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; is missing mandatory key &quot;</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>                    <span class="s2">&quot;&#39;problem&#39;.&quot;</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>                <span class="p">)</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_problems</span> <span class="o">=</span> <span class="n">problems</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>    <span class="k">def</span> <span class="nf">_all_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Pair</span><span class="p">]:</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>        <span class="sd">&quot;&quot;&quot;Generate the list of all pairs to be run.&quot;&quot;&quot;</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>        <span class="n">everything</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_problems</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>            <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_runs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>        <span class="p">)</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>            <span class="n">Pair</span><span class="p">(</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>                <span class="n">algorithm_description</span><span class="o">=</span><span class="n">aa</span><span class="p">,</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>                <span class="n">algorithm_name</span><span class="o">=</span><span class="n">an</span><span class="p">,</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>                <span class="n">n_run</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>                <span class="n">problem_description</span><span class="o">=</span><span class="n">pp</span><span class="p">,</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>                <span class="n">problem_name</span><span class="o">=</span><span class="n">pn</span><span class="p">,</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>            <span class="p">)</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>            <span class="k">for</span> <span class="p">(</span><span class="n">an</span><span class="p">,</span> <span class="n">aa</span><span class="p">),</span> <span class="p">(</span><span class="n">pn</span><span class="p">,</span> <span class="n">pp</span><span class="p">),</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">everything</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>        <span class="p">]</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>    <span class="k">def</span> <span class="nf">_compute_global_pareto_population</span><span class="p">(</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">problem_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">algorithm_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">        Computes the global Pareto population of a given problem-algorithm</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">        pair. See `compute_global_pareto_populations`.</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>        <span class="n">gpp_path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.gpp.npz&quot;</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>        <span class="p">)</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>        <span class="k">if</span> <span class="n">gpp_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>            <span class="c1"># Global Pareto population has already been calculated</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>            <span class="k">return</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>            <span class="s2">&quot;Computing global Pareto population for pair [</span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>            <span class="n">problem_name</span><span class="p">,</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>            <span class="n">algorithm_name</span><span class="p">,</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>        <span class="p">)</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>        <span class="n">populations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>        <span class="k">for</span> <span class="n">n_run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_runs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>                <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">n_run</span><span class="si">}</span><span class="s2">.pp.npz&quot;</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>            <span class="p">)</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>                    <span class="s2">&quot;File </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair most &quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>                    <span class="s2">&quot;likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>                <span class="p">)</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>                <span class="k">continue</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">allow_pickle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>                <span class="n">populations</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">populations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>            <span class="n">data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>        <span class="n">consolidated</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">populations</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>        <span class="k">if</span> <span class="s2">&quot;F&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">consolidated</span><span class="p">:</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>                <span class="s2">&quot;No Pareto population file found for pair </span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2">. This is &quot;</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>                <span class="s2">&quot;most likely because none of the runs finished or succeeded.&quot;</span><span class="p">,</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>                <span class="n">problem_name</span><span class="p">,</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>                <span class="n">algorithm_name</span><span class="p">,</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>            <span class="p">)</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>            <span class="k">return</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="n">pareto_frontier_mask</span><span class="p">(</span><span class="n">consolidated</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">])</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>        <span class="n">np</span><span class="o">.</span><span class="n">savez_compressed</span><span class="p">(</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>            <span class="n">gpp_path</span><span class="p">,</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>            <span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">consolidated</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>        <span class="p">)</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>    <span class="k">def</span> <span class="nf">_compute_performance_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">Pair</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">        Computes all performance indicators for a given pair, and returns the</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">        relevant data frame. See `compute_performance_indicators`.</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>        <span class="n">pi_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pi_filename</span><span class="p">()</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>        <span class="k">if</span> <span class="n">pi_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>            <span class="c1"># PIs have already been calculated</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>            <span class="k">return</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>        <span class="c1"># Load top layer history and the pareto history</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>            <span class="n">history</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">top_layer_history_filename</span><span class="p">()</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>            <span class="p">)</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>            <span class="n">pareto_history</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pareto_population_filename</span><span class="p">()</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>            <span class="p">)</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>            <span class="k">return</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>        <span class="c1"># Break down histories. Each element of this list is a tuple</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>        <span class="c1"># containing the population&#39;s `X` and `F`, and the pareto</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>        <span class="c1"># population&#39;s `X` and `F` at a given generation (or `_batch`).</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>        <span class="n">states</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">history</span><span class="p">[</span><span class="s2">&quot;_batch&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>            <span class="n">hidx</span> <span class="o">=</span> <span class="n">history</span><span class="p">[</span><span class="s2">&quot;_batch&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>            <span class="n">pidx</span> <span class="o">=</span> <span class="n">pareto_history</span><span class="p">[</span><span class="s2">&quot;_batch&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>            <span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>                <span class="p">(</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>                    <span class="n">history</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">][</span><span class="n">hidx</span><span class="p">],</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>                    <span class="n">history</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">][</span><span class="n">hidx</span><span class="p">],</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>                    <span class="n">pareto_history</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">][</span><span class="n">pidx</span><span class="p">],</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>                    <span class="n">pareto_history</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">][</span><span class="n">pidx</span><span class="p">],</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>                <span class="p">)</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>            <span class="p">)</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>        <span class="n">history</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>        <span class="n">pareto_history</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>        <span class="c1"># Compute PIs</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>        <span class="c1"># pylint: disable=cell-var-from-loop</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>        <span class="k">for</span> <span class="n">pi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="p">:</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Computing PI &#39;</span><span class="si">%s</span><span class="s2">&#39; for pair [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>            <span class="n">f</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>                <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span> <span class="nb">float</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>            <span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>            <span class="k">if</span> <span class="n">pi</span> <span class="o">==</span> <span class="s2">&quot;df&quot;</span><span class="p">:</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>                <span class="n">problem</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>                <span class="n">n_evals</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;df_n_evals&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>                <span class="n">delta_f</span> <span class="o">=</span> <span class="n">DeltaF</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">n_evals</span><span class="p">)</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>                <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">delta_f</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>            <span class="k">elif</span> <span class="n">pi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gd&quot;</span><span class="p">,</span> <span class="s2">&quot;gd+&quot;</span><span class="p">,</span> <span class="s2">&quot;igd&quot;</span><span class="p">,</span> <span class="s2">&quot;igd+&quot;</span><span class="p">]:</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>                    <span class="k">if</span> <span class="s2">&quot;pareto_front&quot;</span> <span class="ow">in</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">:</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>                        <span class="n">pf</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pareto_front&quot;</span><span class="p">)</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>                        <span class="n">path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>                            <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">global_pareto_population_filename</span><span class="p">()</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>                        <span class="p">)</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>                        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>                        <span class="n">pf</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>                        <span class="n">data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>                    <span class="n">ind</span> <span class="o">=</span> <span class="n">get_performance_indicator</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">pf</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>                    <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">ind</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>                <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>                        <span class="s2">&quot;Global Pareto population file </span><span class="si">%s</span><span class="s2"> not found&quot;</span><span class="p">,</span> <span class="n">path</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>                    <span class="p">)</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>            <span class="k">elif</span> <span class="n">pi</span> <span class="o">==</span> <span class="s2">&quot;hv&quot;</span> <span class="ow">and</span> <span class="s2">&quot;hv_ref_point&quot;</span> <span class="ow">in</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">:</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>                <span class="n">hv</span> <span class="o">=</span> <span class="n">get_performance_indicator</span><span class="p">(</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>                    <span class="s2">&quot;hv&quot;</span><span class="p">,</span> <span class="n">ref_point</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;hv_ref_point&quot;</span><span class="p">]</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>                <span class="p">)</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>                <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">hv</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>            <span class="k">elif</span> <span class="n">pi</span> <span class="o">==</span> <span class="s2">&quot;ps&quot;</span><span class="p">:</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>                <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">pX</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;perf_&quot;</span> <span class="o">+</span> <span class="n">pi</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">states</span><span class="p">]</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_name</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_name</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_gen&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">states</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_run&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">n_run</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">pi_path</span><span class="p">)</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>    <span class="k">def</span> <span class="nf">_pair_done</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">Pair</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="sd">        Wether a pair has been successfully executed. This is determined by</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="sd">        checking if `_output_dir_path/pair.result_filename()` exists or not.</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">result_filename</span><span class="p">())</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>    <span class="k">def</span> <span class="nf">_run_pair</span><span class="p">(</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>        <span class="n">pair</span><span class="p">:</span> <span class="n">Pair</span><span class="p">,</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">        Runs a given algorithm against a given problem. See</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">        `nmoo.benchmark.Benchmark.run`. Immediately dumps the history of the</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a><span class="sd">        problem and all wrapped problems with the following naming scheme:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="sd">            output_dir_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.&lt;level&gt;.npz</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">        where `level` is the depth of the wrapped problem, starting at `1`. See</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">        `nmoo.wrapped_problem.WrappedProblem.dump_all_histories`. It also dumps</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="sd">        the compounded Pareto population for every at every generation (or just</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="sd">        the last generation of `set_history` is set to `False` in the algorithm</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        description) in</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a><span class="sd">            output_dir_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pp.npz</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a><span class="sd">        Additionally, it generates a CSV file containing various statistics</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a><span class="sd">        named:</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a><span class="sd">            output_dir_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="sd">        The existence of this file is also used to determine if the pair has</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a><span class="sd">        already been run when resuming a benchmark.</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">        Args: pair: A `Pair` object representint the problem-algorithm pair to</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a><span class="sd">            run.</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a><span class="sd">        Returns: Wether the run was successful or not.</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Running pair [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>        <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">start_new_run</span><span class="p">()</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>        <span class="n">evaluator</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>            <span class="s2">&quot;evaluator&quot;</span><span class="p">,</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>            <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;evaluator&quot;</span><span class="p">),</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>        <span class="p">)</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>            <span class="n">results</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>                <span class="n">deepcopy</span><span class="p">(</span><span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]),</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>                <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">],</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>                <span class="n">termination</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination&quot;</span><span class="p">),</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>                <span class="n">copy_algorithm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>                <span class="n">copy_termination</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>                <span class="c1"># extra Algorithm.setup kwargs</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                <span class="n">callback</span><span class="o">=</span><span class="n">TimerCallback</span><span class="p">(),</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>                <span class="n">display</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">),</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>                <span class="n">evaluator</span><span class="o">=</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">evaluator</span><span class="p">),</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>                <span class="n">return_least_infeasible</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>                    <span class="s2">&quot;return_least_infeasible&quot;</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>                <span class="p">),</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>                <span class="n">save_history</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>                <span class="n">seed</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;seed&quot;</span><span class="p">),</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>                <span class="n">verbose</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>            <span class="p">)</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Pair [</span><span class="si">%s</span><span class="s2">] failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>            <span class="k">return</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>        <span class="c1"># Dump all layers histories</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dump_histories</span><span class="p">:</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>            <span class="n">results</span><span class="o">.</span><span class="n">problem</span><span class="o">.</span><span class="n">dump_all_histories</span><span class="p">(</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">,</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>                <span class="n">pair</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">(),</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>            <span class="p">)</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>        <span class="c1"># Dump pareto sets</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>        <span class="n">np</span><span class="o">.</span><span class="n">savez_compressed</span><span class="p">(</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pareto_population_filename</span><span class="p">(),</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>            <span class="o">**</span><span class="n">population_list_to_dict</span><span class="p">([</span><span class="n">h</span><span class="o">.</span><span class="n">opt</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">history</span><span class="p">]),</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>        <span class="p">)</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>        <span class="c1"># Create and dump CSV file</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_gen&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">n_gen</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">history</span><span class="p">]</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">algorithm</span><span class="o">.</span><span class="n">callback</span><span class="o">.</span><span class="n">_deltas</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>        <span class="c1"># Important to create these columns once the dataframe has its full</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>        <span class="c1"># length</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_name</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_name</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_run&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">n_run</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">result_filename</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a>    <span class="k">def</span> <span class="nf">compute_global_pareto_populations</span><span class="p">(</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="sd">        The global Pareto population of a problem-algorithm pair is the merged</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a><span class="sd">        population of all pareto populations across all runs of that pair. THis</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a><span class="sd">        function calculates global Pareto population of all pairs and dumps it</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a><span class="sd">        to `output_dir_path/&lt;problem&gt;.&lt;algorithm&gt;.gpp.npz`.</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Computing global Pareto populations&quot;</span><span class="p">)</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>        <span class="n">pa_pairs</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_problems</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>        <span class="n">executor</span><span class="p">(</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>            <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_compute_global_pareto_population</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">an</span><span class="p">,</span> <span class="n">pn</span><span class="p">)</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>            <span class="k">for</span> <span class="n">an</span><span class="p">,</span> <span class="n">pn</span> <span class="ow">in</span> <span class="n">pa_pairs</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>        <span class="p">)</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>    <span class="k">def</span> <span class="nf">compute_performance_indicators</span><span class="p">(</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a><span class="sd">        Computes all performance indicators and saves the corresponding</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="sd">        dataframes in</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a><span class="sd">        `output_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Computing performance indicators&quot;</span><span class="p">)</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>        <span class="n">executor</span><span class="p">(</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>            <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_compute_performance_indicator</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">()</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>        <span class="p">)</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>    <span class="k">def</span> <span class="nf">consolidate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a><span class="sd">        Merges all statistics dataframes</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a><span class="sd">        (`&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv`) and all PI dataframes</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a><span class="sd">        (`&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`) into a single</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a><span class="sd">        dataframe, and saves it under `output_dir_path/benchmark.csv`.</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Consolidating statistics&quot;</span><span class="p">)</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>        <span class="n">all_df</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">():</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">result_filename</span><span class="p">()</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>                    <span class="s2">&quot;Statistic file </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair &quot;</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>                    <span class="s2">&quot;most likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>                <span class="p">)</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>                <span class="k">continue</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>            <span class="n">all_df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_df</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_timedelta</span><span class="p">(</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>        <span class="p">)</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>            <span class="p">{</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>                <span class="s2">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>                <span class="s2">&quot;n_gen&quot;</span><span class="p">:</span> <span class="s2">&quot;uint32&quot;</span><span class="p">,</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>                <span class="s2">&quot;n_run&quot;</span><span class="p">:</span> <span class="s2">&quot;uint32&quot;</span><span class="p">,</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>                <span class="s2">&quot;problem&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>            <span class="p">}</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>        <span class="p">)</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Consolidating performance indicators&quot;</span><span class="p">)</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a>        <span class="n">all_df</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">():</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pi_filename</span><span class="p">()</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>                    <span class="s2">&quot;PI file </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair most &quot;</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>                    <span class="s2">&quot;likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>                <span class="p">)</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>                <span class="k">continue</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>            <span class="n">all_df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>            <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_df</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>            <span class="n">how</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">,</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>            <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">,</span> <span class="s2">&quot;problem&quot;</span><span class="p">,</span> <span class="s2">&quot;n_gen&quot;</span><span class="p">,</span> <span class="s2">&quot;n_run&quot;</span><span class="p">],</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a>        <span class="p">)</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>        <span class="c1"># ???</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>        <span class="k">if</span> <span class="s2">&quot;Unnamed: 0&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">:</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;Unnamed: 0&quot;</span><span class="p">]</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="s2">&quot;benchmark.csv&quot;</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Writing results to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dump_results</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>    <span class="k">def</span> <span class="nf">dump_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a><span class="sd">        Dumps the internal `_result` dataframe.</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a><span class="sd">        Args:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a><span class="sd">            path (Union[Path, str]): Path to the output file.</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a><span class="sd">            fmt (str): Text or binary format supported by pandas, see</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a><span class="sd">                `here &lt;https://pandas.pydata.org/docs/user_guide/io.html&gt;`_.</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a><span class="sd">                CSV by default.</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a><span class="sd">            kwargs: Will be passed on the `pandas.DataFrame.to_&lt;fmt&gt;` method.</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>        <span class="n">saver</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>            <span class="s2">&quot;csv&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_csv</span><span class="p">,</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>            <span class="s2">&quot;excel&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_excel</span><span class="p">,</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>            <span class="s2">&quot;feather&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_feather</span><span class="p">,</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>            <span class="s2">&quot;gbq&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">,</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>            <span class="s2">&quot;hdf&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">,</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>            <span class="s2">&quot;html&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_html</span><span class="p">,</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>            <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_json</span><span class="p">,</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>            <span class="s2">&quot;parquet&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">,</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>            <span class="s2">&quot;pickle&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">,</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a>        <span class="p">}[</span><span class="n">fmt</span><span class="p">]</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>        <span class="n">saver</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>    <span class="k">def</span> <span class="nf">final_results</span><span class="p">(</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>        <span class="n">timedeltas_to_microseconds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>        <span class="n">reset_index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a><span class="sd">        Returns a dataframe containing the final row of each</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a><span class="sd">        algorithm/problem/n_run triple, i.e. the final record of each run of</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a><span class="sd">        the benchmark.</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a><span class="sd">        If the `reset_index` argument set to `False`, the resulting dataframe</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="sd">        will have a multiindex given by the (algorithm, problem, n_run) tuples,</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a><span class="sd">        e.g.</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a><span class="sd">                                     n_gen  timedelta   perf_gd  ...</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a><span class="sd">            algorithm problem n_run                              ...</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a><span class="sd">            nsga2     bnh     1        155     886181  0.477980  ...</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a><span class="sd">                              2        200      29909  0.480764  ...</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a><span class="sd">                      zdt1    1        400     752818  0.191490  ...</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a><span class="sd">                              2        305     979112  0.260930  ...</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a><span class="sd">        (note tha the `timedelta` column has been converted to microseconds,</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a><span class="sd">        see the `timedeltas_to_microseconds` argument below). If `reset_index`</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a><span class="sd">        is set to `True` (the default), then the index is reset, giving</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a><span class="sd">        something like this:</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a><span class="sd">              algorithm problem  n_run  n_gen  timedelta   perf_gd  ...</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a><span class="sd">            0     nsga2     bnh      1    155     886181  0.477980  ...</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a><span class="sd">            1     nsga2     bnh      2    200      29909  0.480764  ...</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a><span class="sd">            2     nsga2    zdt1      1    400     752818  0.191490  ...</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a><span class="sd">            3     nsga2    zdt1      2    305     979112  0.260930  ...</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a><span class="sd">        This form is easier to plot.</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a><span class="sd">        Args:</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a><span class="sd">            reset_index (bool): Wether to reset the index. Defaults to</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a><span class="sd">                `True`.</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a><span class="sd">            timedeltas_to_microseconds (bool): Wether to convert the</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a><span class="sd">                timedeltas column to microseconds. Defaults to `True`.</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;algorithm&quot;</span><span class="p">,</span> <span class="s2">&quot;problem&quot;</span><span class="p">,</span> <span class="s2">&quot;n_run&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="k">if</span> <span class="n">timedeltas_to_microseconds</span><span class="p">:</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">microseconds</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="k">if</span> <span class="n">reset_index</span> <span class="k">else</span> <span class="n">df</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>        <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a>        <span class="n">n_post_processing_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>        <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">,</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a>    <span class="p">):</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a><span class="sd">        Runs the benchmark sequentially. Makes your laptop go brr. The</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a><span class="sd">        histories of all problems are progressively dumped in the specified</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a><span class="sd">        output directory as the benchmark run. At the end, the benchmark</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a><span class="sd">        results are dumped in `output_dir_path/benchmark.csv`.</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a><span class="sd">        Args:</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a><span class="sd">            n_jobs (int): Number of processes to use. See the `joblib.Parallel`_</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a><span class="sd">                documentation. Defaults to `-1`, i.e. all CPUs are used.</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a><span class="sd">            n_post_processing_jobs (int): Number of processes to use for post</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a><span class="sd">                processing tasks (computing global Pareto populations and</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a><span class="sd">                performance indicators). These are memory-intensive tasks.</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a><span class="sd">                Defaults to `2`.</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a><span class="sd">            joblib_kwargs (dict): Additional kwargs to pass on to the</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a><span class="sd">                `joblib.Parallel`_ instance.</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a><span class="sd">        .. _joblib.Parallel:</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a><span class="sd">            https://joblib.readthedocs.io/en/latest/generated/joblib.Parallel.html</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">):</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">)</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a>        <span class="n">pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">()</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a>        <span class="n">current_round</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a>        <span class="k">while</span> <span class="p">(</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">current_round</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a>        <span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a>            <span class="n">executor</span><span class="p">(</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a>                <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_run_pair</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a>                <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a>            <span class="p">)</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a>            <span class="n">current_round</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a>                <span class="s2">&quot;Benchmark finished, but some pairs could not be run &quot;</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a>                <span class="s2">&quot;successfully within the retry budget (</span><span class="si">%d</span><span class="s2">):&quot;</span><span class="p">,</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span><span class="p">,</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a>            <span class="p">)</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;    [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_global_pareto_populations</span><span class="p">(</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a>            <span class="n">n_post_processing_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a>        <span class="p">)</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_performance_indicators</span><span class="p">(</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a>            <span class="n">n_post_processing_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a>        <span class="p">)</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consolidate</span><span class="p">()</span>
</span></pre></div>


            </section>
                <section id="Pair">
                            <input id="Pair-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Pair</span>:

                <label class="view-source-button" for="Pair-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pair"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pair-27"><a href="#Pair-27"><span class="linenos">27</span></a><span class="k">class</span> <span class="nc">Pair</span><span class="p">:</span>
</span><span id="Pair-28"><a href="#Pair-28"><span class="linenos">28</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Pair-29"><a href="#Pair-29"><span class="linenos">29</span></a><span class="sd">    Represents a problem-algorithm pair and its result.</span>
</span><span id="Pair-30"><a href="#Pair-30"><span class="linenos">30</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Pair-31"><a href="#Pair-31"><span class="linenos">31</span></a>
</span><span id="Pair-32"><a href="#Pair-32"><span class="linenos">32</span></a>    <span class="n">algorithm_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</span><span id="Pair-33"><a href="#Pair-33"><span class="linenos">33</span></a>    <span class="n">algorithm_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Pair-34"><a href="#Pair-34"><span class="linenos">34</span></a>    <span class="n">n_run</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Pair-35"><a href="#Pair-35"><span class="linenos">35</span></a>    <span class="n">problem_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</span><span id="Pair-36"><a href="#Pair-36"><span class="linenos">36</span></a>    <span class="n">problem_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Pair-37"><a href="#Pair-37"><span class="linenos">37</span></a>
</span><span id="Pair-38"><a href="#Pair-38"><span class="linenos">38</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair-39"><a href="#Pair-39"><span class="linenos">39</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_run</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="Pair-40"><a href="#Pair-40"><span class="linenos">40</span></a>
</span><span id="Pair-41"><a href="#Pair-41"><span class="linenos">41</span></a>    <span class="k">def</span> <span class="nf">filename_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair-42"><a href="#Pair-42"><span class="linenos">42</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;`.&quot;&quot;&quot;</span>
</span><span id="Pair-43"><a href="#Pair-43"><span class="linenos">43</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_run</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Pair-44"><a href="#Pair-44"><span class="linenos">44</span></a>
</span><span id="Pair-45"><a href="#Pair-45"><span class="linenos">45</span></a>    <span class="k">def</span> <span class="nf">global_pareto_population_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair-46"><a href="#Pair-46"><span class="linenos">46</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.gpp.npz`.&quot;&quot;&quot;</span>
</span><span id="Pair-47"><a href="#Pair-47"><span class="linenos">47</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.gpp.npz&quot;</span>
</span><span id="Pair-48"><a href="#Pair-48"><span class="linenos">48</span></a>
</span><span id="Pair-49"><a href="#Pair-49"><span class="linenos">49</span></a>    <span class="k">def</span> <span class="nf">pareto_population_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair-50"><a href="#Pair-50"><span class="linenos">50</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pp.npz`.&quot;&quot;&quot;</span>
</span><span id="Pair-51"><a href="#Pair-51"><span class="linenos">51</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.pp.npz&quot;</span>
</span><span id="Pair-52"><a href="#Pair-52"><span class="linenos">52</span></a>
</span><span id="Pair-53"><a href="#Pair-53"><span class="linenos">53</span></a>    <span class="k">def</span> <span class="nf">pi_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair-54"><a href="#Pair-54"><span class="linenos">54</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`.&quot;&quot;&quot;</span>
</span><span id="Pair-55"><a href="#Pair-55"><span class="linenos">55</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.pi.csv&quot;</span>
</span><span id="Pair-56"><a href="#Pair-56"><span class="linenos">56</span></a>
</span><span id="Pair-57"><a href="#Pair-57"><span class="linenos">57</span></a>    <span class="k">def</span> <span class="nf">result_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair-58"><a href="#Pair-58"><span class="linenos">58</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv`.&quot;&quot;&quot;</span>
</span><span id="Pair-59"><a href="#Pair-59"><span class="linenos">59</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.csv&quot;</span>
</span><span id="Pair-60"><a href="#Pair-60"><span class="linenos">60</span></a>
</span><span id="Pair-61"><a href="#Pair-61"><span class="linenos">61</span></a>    <span class="k">def</span> <span class="nf">top_layer_history_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair-62"><a href="#Pair-62"><span class="linenos">62</span></a>        <span class="sd">&quot;&quot;&quot;Returns the filename of the top layer history.&quot;&quot;&quot;</span>
</span><span id="Pair-63"><a href="#Pair-63"><span class="linenos">63</span></a>        <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span>
</span><span id="Pair-64"><a href="#Pair-64"><span class="linenos">64</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">_name</span>
</span><span id="Pair-65"><a href="#Pair-65"><span class="linenos">65</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.1-</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.npz&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Represents a problem-algorithm pair and its result.</p>
</div>


                            <div id="Pair.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Pair</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">algorithm_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">algorithm_name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">n_run</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">problem_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">problem_name</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Pair.__init__"></a>
    
    

                            </div>
                            <div id="Pair.filename_prefix" class="classattr">
                                        <input id="Pair.filename_prefix-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">filename_prefix</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Pair.filename_prefix-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pair.filename_prefix"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pair.filename_prefix-41"><a href="#Pair.filename_prefix-41"><span class="linenos">41</span></a>    <span class="k">def</span> <span class="nf">filename_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair.filename_prefix-42"><a href="#Pair.filename_prefix-42"><span class="linenos">42</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;`.&quot;&quot;&quot;</span>
</span><span id="Pair.filename_prefix-43"><a href="#Pair.filename_prefix-43"><span class="linenos">43</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_run</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns <code>&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;</code>.</p>
</div>


                            </div>
                            <div id="Pair.global_pareto_population_filename" class="classattr">
                                        <input id="Pair.global_pareto_population_filename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">global_pareto_population_filename</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Pair.global_pareto_population_filename-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pair.global_pareto_population_filename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pair.global_pareto_population_filename-45"><a href="#Pair.global_pareto_population_filename-45"><span class="linenos">45</span></a>    <span class="k">def</span> <span class="nf">global_pareto_population_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair.global_pareto_population_filename-46"><a href="#Pair.global_pareto_population_filename-46"><span class="linenos">46</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.gpp.npz`.&quot;&quot;&quot;</span>
</span><span id="Pair.global_pareto_population_filename-47"><a href="#Pair.global_pareto_population_filename-47"><span class="linenos">47</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.gpp.npz&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns <code>&lt;problem_name&gt;.&lt;algorithm_name&gt;.gpp.npz</code>.</p>
</div>


                            </div>
                            <div id="Pair.pareto_population_filename" class="classattr">
                                        <input id="Pair.pareto_population_filename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pareto_population_filename</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Pair.pareto_population_filename-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pair.pareto_population_filename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pair.pareto_population_filename-49"><a href="#Pair.pareto_population_filename-49"><span class="linenos">49</span></a>    <span class="k">def</span> <span class="nf">pareto_population_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair.pareto_population_filename-50"><a href="#Pair.pareto_population_filename-50"><span class="linenos">50</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pp.npz`.&quot;&quot;&quot;</span>
</span><span id="Pair.pareto_population_filename-51"><a href="#Pair.pareto_population_filename-51"><span class="linenos">51</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.pp.npz&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns <code>&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pp.npz</code>.</p>
</div>


                            </div>
                            <div id="Pair.pi_filename" class="classattr">
                                        <input id="Pair.pi_filename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pi_filename</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Pair.pi_filename-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pair.pi_filename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pair.pi_filename-53"><a href="#Pair.pi_filename-53"><span class="linenos">53</span></a>    <span class="k">def</span> <span class="nf">pi_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair.pi_filename-54"><a href="#Pair.pi_filename-54"><span class="linenos">54</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`.&quot;&quot;&quot;</span>
</span><span id="Pair.pi_filename-55"><a href="#Pair.pi_filename-55"><span class="linenos">55</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.pi.csv&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns <code>&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv</code>.</p>
</div>


                            </div>
                            <div id="Pair.result_filename" class="classattr">
                                        <input id="Pair.result_filename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">result_filename</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Pair.result_filename-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pair.result_filename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pair.result_filename-57"><a href="#Pair.result_filename-57"><span class="linenos">57</span></a>    <span class="k">def</span> <span class="nf">result_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair.result_filename-58"><a href="#Pair.result_filename-58"><span class="linenos">58</span></a>        <span class="sd">&quot;&quot;&quot;Returns `&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv`.&quot;&quot;&quot;</span>
</span><span id="Pair.result_filename-59"><a href="#Pair.result_filename-59"><span class="linenos">59</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.csv&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns <code>&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv</code>.</p>
</div>


                            </div>
                            <div id="Pair.top_layer_history_filename" class="classattr">
                                        <input id="Pair.top_layer_history_filename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">top_layer_history_filename</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Pair.top_layer_history_filename-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Pair.top_layer_history_filename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Pair.top_layer_history_filename-61"><a href="#Pair.top_layer_history_filename-61"><span class="linenos">61</span></a>    <span class="k">def</span> <span class="nf">top_layer_history_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Pair.top_layer_history_filename-62"><a href="#Pair.top_layer_history_filename-62"><span class="linenos">62</span></a>        <span class="sd">&quot;&quot;&quot;Returns the filename of the top layer history.&quot;&quot;&quot;</span>
</span><span id="Pair.top_layer_history_filename-63"><a href="#Pair.top_layer_history_filename-63"><span class="linenos">63</span></a>        <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">()</span>
</span><span id="Pair.top_layer_history_filename-64"><a href="#Pair.top_layer_history_filename-64"><span class="linenos">64</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">_name</span>
</span><span id="Pair.top_layer_history_filename-65"><a href="#Pair.top_layer_history_filename-65"><span class="linenos">65</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.1-</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.npz&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns the filename of the top layer history.</p>
</div>


                            </div>
                </section>
                <section id="Benchmark">
                            <input id="Benchmark-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Benchmark</span>:

                <label class="view-source-button" for="Benchmark-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark-69"><a href="#Benchmark-69"><span class="linenos"> 69</span></a><span class="k">class</span> <span class="nc">Benchmark</span><span class="p">:</span>
</span><span id="Benchmark-70"><a href="#Benchmark-70"><span class="linenos"> 70</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-71"><a href="#Benchmark-71"><span class="linenos"> 71</span></a><span class="sd">    A benchmark is constructed with a list of problems and pymoo algorithms</span>
</span><span id="Benchmark-72"><a href="#Benchmark-72"><span class="linenos"> 72</span></a><span class="sd">    descriptions, and run each algorithm against each problem, storing all</span>
</span><span id="Benchmark-73"><a href="#Benchmark-73"><span class="linenos"> 73</span></a><span class="sd">    histories for later analysis.</span>
</span><span id="Benchmark-74"><a href="#Benchmark-74"><span class="linenos"> 74</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-75"><a href="#Benchmark-75"><span class="linenos"> 75</span></a>
</span><span id="Benchmark-76"><a href="#Benchmark-76"><span class="linenos"> 76</span></a>    <span class="n">SUPPORTED_PERFOMANCE_INDICATORS</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Benchmark-77"><a href="#Benchmark-77"><span class="linenos"> 77</span></a>        <span class="s2">&quot;df&quot;</span><span class="p">,</span>
</span><span id="Benchmark-78"><a href="#Benchmark-78"><span class="linenos"> 78</span></a>        <span class="s2">&quot;gd&quot;</span><span class="p">,</span>
</span><span id="Benchmark-79"><a href="#Benchmark-79"><span class="linenos"> 79</span></a>        <span class="s2">&quot;gd+&quot;</span><span class="p">,</span>
</span><span id="Benchmark-80"><a href="#Benchmark-80"><span class="linenos"> 80</span></a>        <span class="s2">&quot;hv&quot;</span><span class="p">,</span>
</span><span id="Benchmark-81"><a href="#Benchmark-81"><span class="linenos"> 81</span></a>        <span class="s2">&quot;igd&quot;</span><span class="p">,</span>
</span><span id="Benchmark-82"><a href="#Benchmark-82"><span class="linenos"> 82</span></a>        <span class="s2">&quot;igd+&quot;</span><span class="p">,</span>
</span><span id="Benchmark-83"><a href="#Benchmark-83"><span class="linenos"> 83</span></a>        <span class="s2">&quot;ps&quot;</span><span class="p">,</span>
</span><span id="Benchmark-84"><a href="#Benchmark-84"><span class="linenos"> 84</span></a>    <span class="p">]</span>
</span><span id="Benchmark-85"><a href="#Benchmark-85"><span class="linenos"> 85</span></a>
</span><span id="Benchmark-86"><a href="#Benchmark-86"><span class="linenos"> 86</span></a>    <span class="n">_algorithms</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="Benchmark-87"><a href="#Benchmark-87"><span class="linenos"> 87</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-88"><a href="#Benchmark-88"><span class="linenos"> 88</span></a><span class="sd">    List of algorithms to be benchmarked.</span>
</span><span id="Benchmark-89"><a href="#Benchmark-89"><span class="linenos"> 89</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-90"><a href="#Benchmark-90"><span class="linenos"> 90</span></a>
</span><span id="Benchmark-91"><a href="#Benchmark-91"><span class="linenos"> 91</span></a>    <span class="n">_dump_histories</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Benchmark-92"><a href="#Benchmark-92"><span class="linenos"> 92</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-93"><a href="#Benchmark-93"><span class="linenos"> 93</span></a><span class="sd">    Wether the history of each `WrappedProblem` involved in this benchmark</span>
</span><span id="Benchmark-94"><a href="#Benchmark-94"><span class="linenos"> 94</span></a><span class="sd">    should be written to disk.</span>
</span><span id="Benchmark-95"><a href="#Benchmark-95"><span class="linenos"> 95</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-96"><a href="#Benchmark-96"><span class="linenos"> 96</span></a>
</span><span id="Benchmark-97"><a href="#Benchmark-97"><span class="linenos"> 97</span></a>    <span class="n">_max_retry</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Benchmark-98"><a href="#Benchmark-98"><span class="linenos"> 98</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-99"><a href="#Benchmark-99"><span class="linenos"> 99</span></a><span class="sd">    Maximum number of attempts to run a given problem-algorithm pair before</span>
</span><span id="Benchmark-100"><a href="#Benchmark-100"><span class="linenos">100</span></a><span class="sd">    giving up.</span>
</span><span id="Benchmark-101"><a href="#Benchmark-101"><span class="linenos">101</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-102"><a href="#Benchmark-102"><span class="linenos">102</span></a>
</span><span id="Benchmark-103"><a href="#Benchmark-103"><span class="linenos">103</span></a>    <span class="n">_n_runs</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Benchmark-104"><a href="#Benchmark-104"><span class="linenos">104</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-105"><a href="#Benchmark-105"><span class="linenos">105</span></a><span class="sd">    Number of times to run a given problem/algorithm pair.</span>
</span><span id="Benchmark-106"><a href="#Benchmark-106"><span class="linenos">106</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-107"><a href="#Benchmark-107"><span class="linenos">107</span></a>
</span><span id="Benchmark-108"><a href="#Benchmark-108"><span class="linenos">108</span></a>    <span class="n">_output_dir_path</span><span class="p">:</span> <span class="n">Path</span>
</span><span id="Benchmark-109"><a href="#Benchmark-109"><span class="linenos">109</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-110"><a href="#Benchmark-110"><span class="linenos">110</span></a><span class="sd">    Path of the output directory.</span>
</span><span id="Benchmark-111"><a href="#Benchmark-111"><span class="linenos">111</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-112"><a href="#Benchmark-112"><span class="linenos">112</span></a>
</span><span id="Benchmark-113"><a href="#Benchmark-113"><span class="linenos">113</span></a>    <span class="n">_performance_indicators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="Benchmark-114"><a href="#Benchmark-114"><span class="linenos">114</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-115"><a href="#Benchmark-115"><span class="linenos">115</span></a><span class="sd">    List of performance indicator to calculate during the benchmark.</span>
</span><span id="Benchmark-116"><a href="#Benchmark-116"><span class="linenos">116</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-117"><a href="#Benchmark-117"><span class="linenos">117</span></a>
</span><span id="Benchmark-118"><a href="#Benchmark-118"><span class="linenos">118</span></a>    <span class="n">_problems</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="Benchmark-119"><a href="#Benchmark-119"><span class="linenos">119</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-120"><a href="#Benchmark-120"><span class="linenos">120</span></a><span class="sd">    List of problems to be benchmarked.</span>
</span><span id="Benchmark-121"><a href="#Benchmark-121"><span class="linenos">121</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-122"><a href="#Benchmark-122"><span class="linenos">122</span></a>
</span><span id="Benchmark-123"><a href="#Benchmark-123"><span class="linenos">123</span></a>    <span class="n">_results</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span><span id="Benchmark-124"><a href="#Benchmark-124"><span class="linenos">124</span></a>    <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-125"><a href="#Benchmark-125"><span class="linenos">125</span></a><span class="sd">    Results of all runs.</span>
</span><span id="Benchmark-126"><a href="#Benchmark-126"><span class="linenos">126</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Benchmark-127"><a href="#Benchmark-127"><span class="linenos">127</span></a>
</span><span id="Benchmark-128"><a href="#Benchmark-128"><span class="linenos">128</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Benchmark-129"><a href="#Benchmark-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Benchmark-130"><a href="#Benchmark-130"><span class="linenos">130</span></a>        <span class="n">output_dir_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
</span><span id="Benchmark-131"><a href="#Benchmark-131"><span class="linenos">131</span></a>        <span class="n">problems</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span>
</span><span id="Benchmark-132"><a href="#Benchmark-132"><span class="linenos">132</span></a>        <span class="n">algorithms</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span>
</span><span id="Benchmark-133"><a href="#Benchmark-133"><span class="linenos">133</span></a>        <span class="n">n_runs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="Benchmark-134"><a href="#Benchmark-134"><span class="linenos">134</span></a>        <span class="n">dump_histories</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark-135"><a href="#Benchmark-135"><span class="linenos">135</span></a>        <span class="n">performance_indicators</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Benchmark-136"><a href="#Benchmark-136"><span class="linenos">136</span></a>        <span class="n">max_retry</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="Benchmark-137"><a href="#Benchmark-137"><span class="linenos">137</span></a>    <span class="p">):</span>
</span><span id="Benchmark-138"><a href="#Benchmark-138"><span class="linenos">138</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-139"><a href="#Benchmark-139"><span class="linenos">139</span></a><span class="sd">        Constructor. The set of problems to be benchmarked is represented by a</span>
</span><span id="Benchmark-140"><a href="#Benchmark-140"><span class="linenos">140</span></a><span class="sd">        dictionary with the following structure::</span>
</span><span id="Benchmark-141"><a href="#Benchmark-141"><span class="linenos">141</span></a>
</span><span id="Benchmark-142"><a href="#Benchmark-142"><span class="linenos">142</span></a><span class="sd">            problems = {</span>
</span><span id="Benchmark-143"><a href="#Benchmark-143"><span class="linenos">143</span></a><span class="sd">                &lt;problem_name&gt;: &lt;problem_description&gt;,</span>
</span><span id="Benchmark-144"><a href="#Benchmark-144"><span class="linenos">144</span></a><span class="sd">                &lt;problem_name&gt;: &lt;problem_description&gt;,</span>
</span><span id="Benchmark-145"><a href="#Benchmark-145"><span class="linenos">145</span></a><span class="sd">            }</span>
</span><span id="Benchmark-146"><a href="#Benchmark-146"><span class="linenos">146</span></a>
</span><span id="Benchmark-147"><a href="#Benchmark-147"><span class="linenos">147</span></a><span class="sd">        where `&lt;problem_name&gt;` is a user-defined string (but stay reasonable</span>
</span><span id="Benchmark-148"><a href="#Benchmark-148"><span class="linenos">148</span></a><span class="sd">        since it may be used in filenames), and `&lt;problem_description&gt;` is a</span>
</span><span id="Benchmark-149"><a href="#Benchmark-149"><span class="linenos">149</span></a><span class="sd">        dictionary with the following keys:</span>
</span><span id="Benchmark-150"><a href="#Benchmark-150"><span class="linenos">150</span></a><span class="sd">        * `df_n_evals` (int, optional): see the explanation of the `df`</span>
</span><span id="Benchmark-151"><a href="#Benchmark-151"><span class="linenos">151</span></a><span class="sd">            performance indicator below; defaults to `1`;</span>
</span><span id="Benchmark-152"><a href="#Benchmark-152"><span class="linenos">152</span></a><span class="sd">        * `evaluator` (optional): an algorithm evaluator object that will be</span>
</span><span id="Benchmark-153"><a href="#Benchmark-153"><span class="linenos">153</span></a><span class="sd">            applied to every algorithm that run on this problem; if an</span>
</span><span id="Benchmark-154"><a href="#Benchmark-154"><span class="linenos">154</span></a><span class="sd">            algorithm already has an evaluator attached to it (see</span>
</span><span id="Benchmark-155"><a href="#Benchmark-155"><span class="linenos">155</span></a><span class="sd">            `&lt;algorithm_description&gt;` below), the evaluator attached to this</span>
</span><span id="Benchmark-156"><a href="#Benchmark-156"><span class="linenos">156</span></a><span class="sd">            problem takes precedence; note that the evaluator is deepcopied for</span>
</span><span id="Benchmark-157"><a href="#Benchmark-157"><span class="linenos">157</span></a><span class="sd">            every run of `minimize`;</span>
</span><span id="Benchmark-158"><a href="#Benchmark-158"><span class="linenos">158</span></a><span class="sd">        * `hv_ref_point` (optional, `np.ndarray`): a reference point for</span>
</span><span id="Benchmark-159"><a href="#Benchmark-159"><span class="linenos">159</span></a><span class="sd">            computing hypervolume performance, see `performance_indicators`</span>
</span><span id="Benchmark-160"><a href="#Benchmark-160"><span class="linenos">160</span></a><span class="sd">            argument;</span>
</span><span id="Benchmark-161"><a href="#Benchmark-161"><span class="linenos">161</span></a><span class="sd">        * `pareto_front` (optional, `np.ndarray`): a Pareto front subset;</span>
</span><span id="Benchmark-162"><a href="#Benchmark-162"><span class="linenos">162</span></a><span class="sd">        * `problem`: a `WrappedProblem` instance.</span>
</span><span id="Benchmark-163"><a href="#Benchmark-163"><span class="linenos">163</span></a>
</span><span id="Benchmark-164"><a href="#Benchmark-164"><span class="linenos">164</span></a><span class="sd">        The set of algorithms to be used is specified similarly::</span>
</span><span id="Benchmark-165"><a href="#Benchmark-165"><span class="linenos">165</span></a>
</span><span id="Benchmark-166"><a href="#Benchmark-166"><span class="linenos">166</span></a><span class="sd">            algorithms = {</span>
</span><span id="Benchmark-167"><a href="#Benchmark-167"><span class="linenos">167</span></a><span class="sd">                &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,</span>
</span><span id="Benchmark-168"><a href="#Benchmark-168"><span class="linenos">168</span></a><span class="sd">                &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,</span>
</span><span id="Benchmark-169"><a href="#Benchmark-169"><span class="linenos">169</span></a><span class="sd">            }</span>
</span><span id="Benchmark-170"><a href="#Benchmark-170"><span class="linenos">170</span></a>
</span><span id="Benchmark-171"><a href="#Benchmark-171"><span class="linenos">171</span></a><span class="sd">        where `&lt;algorithm_name&gt;` is a user-defined string (but stay reasonable</span>
</span><span id="Benchmark-172"><a href="#Benchmark-172"><span class="linenos">172</span></a><span class="sd">        since it may be used in filenames), and `&lt;algorithm_description&gt;` is a</span>
</span><span id="Benchmark-173"><a href="#Benchmark-173"><span class="linenos">173</span></a><span class="sd">        dictionary with the following keys:</span>
</span><span id="Benchmark-174"><a href="#Benchmark-174"><span class="linenos">174</span></a><span class="sd">        * `algorithm`: a pymoo `Algorithm` object; note that it is deepcopied</span>
</span><span id="Benchmark-175"><a href="#Benchmark-175"><span class="linenos">175</span></a><span class="sd">            for every run of `minimize`;</span>
</span><span id="Benchmark-176"><a href="#Benchmark-176"><span class="linenos">176</span></a><span class="sd">        * `display` (optional): a custom `pymoo.util.display.Display` object</span>
</span><span id="Benchmark-177"><a href="#Benchmark-177"><span class="linenos">177</span></a><span class="sd">            for customization purposes;</span>
</span><span id="Benchmark-178"><a href="#Benchmark-178"><span class="linenos">178</span></a><span class="sd">        * `evaluator` (optional): an algorithm evaluator object; note that it</span>
</span><span id="Benchmark-179"><a href="#Benchmark-179"><span class="linenos">179</span></a><span class="sd">            is deepcopied for every run of `minimize`;</span>
</span><span id="Benchmark-180"><a href="#Benchmark-180"><span class="linenos">180</span></a><span class="sd">        * `return_least_infeasible` (optional, bool): if the algorithm cannot</span>
</span><span id="Benchmark-181"><a href="#Benchmark-181"><span class="linenos">181</span></a><span class="sd">            find a feasable solution, wether the least infeasable solution</span>
</span><span id="Benchmark-182"><a href="#Benchmark-182"><span class="linenos">182</span></a><span class="sd">            should still be returned; defaults to `False`;</span>
</span><span id="Benchmark-183"><a href="#Benchmark-183"><span class="linenos">183</span></a><span class="sd">        * `seed` (optional, int): a seed;</span>
</span><span id="Benchmark-184"><a href="#Benchmark-184"><span class="linenos">184</span></a><span class="sd">        * `termination` (optional): a pymoo termination criterion; note that it</span>
</span><span id="Benchmark-185"><a href="#Benchmark-185"><span class="linenos">185</span></a><span class="sd">            is deepcopied for every run of `minimize`;</span>
</span><span id="Benchmark-186"><a href="#Benchmark-186"><span class="linenos">186</span></a><span class="sd">        * `verbose` (optional, bool): wether outputs should be printed during</span>
</span><span id="Benchmark-187"><a href="#Benchmark-187"><span class="linenos">187</span></a><span class="sd">            during the execution of the algorithm; defaults to `False`.</span>
</span><span id="Benchmark-188"><a href="#Benchmark-188"><span class="linenos">188</span></a>
</span><span id="Benchmark-189"><a href="#Benchmark-189"><span class="linenos">189</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark-190"><a href="#Benchmark-190"><span class="linenos">190</span></a><span class="sd">            algorithms (Dict[str, dict]): Dict of all algorithms to be</span>
</span><span id="Benchmark-191"><a href="#Benchmark-191"><span class="linenos">191</span></a><span class="sd">                benchmarked.</span>
</span><span id="Benchmark-192"><a href="#Benchmark-192"><span class="linenos">192</span></a><span class="sd">            dump_histories (bool): Wether the history of each</span>
</span><span id="Benchmark-193"><a href="#Benchmark-193"><span class="linenos">193</span></a><span class="sd">                `WrappedProblem` involved in this benchmark should be written</span>
</span><span id="Benchmark-194"><a href="#Benchmark-194"><span class="linenos">194</span></a><span class="sd">                to disk. Defaults to `True`.</span>
</span><span id="Benchmark-195"><a href="#Benchmark-195"><span class="linenos">195</span></a><span class="sd">            max_retries (int): Maximum number of attempts to run a given</span>
</span><span id="Benchmark-196"><a href="#Benchmark-196"><span class="linenos">196</span></a><span class="sd">                problem-algorithm pair before giving up. Set it to `-1` to</span>
</span><span id="Benchmark-197"><a href="#Benchmark-197"><span class="linenos">197</span></a><span class="sd">                retry indefinitely.</span>
</span><span id="Benchmark-198"><a href="#Benchmark-198"><span class="linenos">198</span></a><span class="sd">            n_runs (int): Number of times to run a given problem/algorithm</span>
</span><span id="Benchmark-199"><a href="#Benchmark-199"><span class="linenos">199</span></a><span class="sd">                pair.</span>
</span><span id="Benchmark-200"><a href="#Benchmark-200"><span class="linenos">200</span></a><span class="sd">            problems (Dict[str, dict]): Dict of all problems to be benchmarked.</span>
</span><span id="Benchmark-201"><a href="#Benchmark-201"><span class="linenos">201</span></a><span class="sd">            performance_indicators (Optional[List[str]]): List of perfomance</span>
</span><span id="Benchmark-202"><a href="#Benchmark-202"><span class="linenos">202</span></a><span class="sd">                indicators to be calculated and included in the result</span>
</span><span id="Benchmark-203"><a href="#Benchmark-203"><span class="linenos">203</span></a><span class="sd">                dataframe (see `Benchmark.final_results`). Supported indicators</span>
</span><span id="Benchmark-204"><a href="#Benchmark-204"><span class="linenos">204</span></a><span class="sd">                are</span>
</span><span id="Benchmark-205"><a href="#Benchmark-205"><span class="linenos">205</span></a><span class="sd">                * `df`: ΔF metric, see the documentation of</span>
</span><span id="Benchmark-206"><a href="#Benchmark-206"><span class="linenos">206</span></a><span class="sd">                    `nmoo.indicators.delta_f.DeltaF`;</span>
</span><span id="Benchmark-207"><a href="#Benchmark-207"><span class="linenos">207</span></a><span class="sd">                * `gd`: [generational distance](https://pymoo.org/misc/indicators.html#Generational-Distance-(GD)),</span>
</span><span id="Benchmark-208"><a href="#Benchmark-208"><span class="linenos">208</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark-209"><a href="#Benchmark-209"><span class="linenos">209</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark-210"><a href="#Benchmark-210"><span class="linenos">210</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark-211"><a href="#Benchmark-211"><span class="linenos">211</span></a><span class="sd">                * `gd+`: [generational distance plus](https://pymoo.org/misc/indicators.html#Generational-Distance-Plus-(GD+)),</span>
</span><span id="Benchmark-212"><a href="#Benchmark-212"><span class="linenos">212</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark-213"><a href="#Benchmark-213"><span class="linenos">213</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark-214"><a href="#Benchmark-214"><span class="linenos">214</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark-215"><a href="#Benchmark-215"><span class="linenos">215</span></a><span class="sd">                * `hv`: [hypervolume](https://pymoo.org/misc/indicators.html#Hypervolume),</span>
</span><span id="Benchmark-216"><a href="#Benchmark-216"><span class="linenos">216</span></a><span class="sd">                    requires `hv_ref_point` to be set in the problem</span>
</span><span id="Benchmark-217"><a href="#Benchmark-217"><span class="linenos">217</span></a><span class="sd">                    discription dictionaries, otherwise the value of this</span>
</span><span id="Benchmark-218"><a href="#Benchmark-218"><span class="linenos">218</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark-219"><a href="#Benchmark-219"><span class="linenos">219</span></a><span class="sd">                * `igd`: [inverted generational distance](https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-(IGD)),</span>
</span><span id="Benchmark-220"><a href="#Benchmark-220"><span class="linenos">220</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark-221"><a href="#Benchmark-221"><span class="linenos">221</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark-222"><a href="#Benchmark-222"><span class="linenos">222</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark-223"><a href="#Benchmark-223"><span class="linenos">223</span></a><span class="sd">                * `igd+`: [inverted generational distance](https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-Plus-(IGD+)),</span>
</span><span id="Benchmark-224"><a href="#Benchmark-224"><span class="linenos">224</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark-225"><a href="#Benchmark-225"><span class="linenos">225</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark-226"><a href="#Benchmark-226"><span class="linenos">226</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark-227"><a href="#Benchmark-227"><span class="linenos">227</span></a><span class="sd">                * `ps`: population size, or equivalently, the size of the</span>
</span><span id="Benchmark-228"><a href="#Benchmark-228"><span class="linenos">228</span></a><span class="sd">                    current Pareto front.</span>
</span><span id="Benchmark-229"><a href="#Benchmark-229"><span class="linenos">229</span></a>
</span><span id="Benchmark-230"><a href="#Benchmark-230"><span class="linenos">230</span></a><span class="sd">                In the result dataframe, the corresponding columns will be</span>
</span><span id="Benchmark-231"><a href="#Benchmark-231"><span class="linenos">231</span></a><span class="sd">                named `perf_&lt;name of indicator&gt;`, e.g. `perf_igd`. If left</span>
</span><span id="Benchmark-232"><a href="#Benchmark-232"><span class="linenos">232</span></a><span class="sd">                unspecified, defaults to `[&quot;igd&quot;]`.</span>
</span><span id="Benchmark-233"><a href="#Benchmark-233"><span class="linenos">233</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-234"><a href="#Benchmark-234"><span class="linenos">234</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">algorithms</span><span class="p">:</span>
</span><span id="Benchmark-235"><a href="#Benchmark-235"><span class="linenos">235</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A benchmark requires at least 1 algorithm.&quot;</span><span class="p">)</span>
</span><span id="Benchmark-236"><a href="#Benchmark-236"><span class="linenos">236</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">algorithms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Benchmark-237"><a href="#Benchmark-237"><span class="linenos">237</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Benchmark-238"><a href="#Benchmark-238"><span class="linenos">238</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark-239"><a href="#Benchmark-239"><span class="linenos">239</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for algorithm &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; must be a dict.&quot;</span>
</span><span id="Benchmark-240"><a href="#Benchmark-240"><span class="linenos">240</span></a>                <span class="p">)</span>
</span><span id="Benchmark-241"><a href="#Benchmark-241"><span class="linenos">241</span></a>            <span class="k">if</span> <span class="s2">&quot;algorithm&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
</span><span id="Benchmark-242"><a href="#Benchmark-242"><span class="linenos">242</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark-243"><a href="#Benchmark-243"><span class="linenos">243</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for algorithm &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; is missing mandatory &quot;</span>
</span><span id="Benchmark-244"><a href="#Benchmark-244"><span class="linenos">244</span></a>                    <span class="s2">&quot;key &#39;algorithm&#39;.&quot;</span>
</span><span id="Benchmark-245"><a href="#Benchmark-245"><span class="linenos">245</span></a>                <span class="p">)</span>
</span><span id="Benchmark-246"><a href="#Benchmark-246"><span class="linenos">246</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span> <span class="o">=</span> <span class="n">algorithms</span>
</span><span id="Benchmark-247"><a href="#Benchmark-247"><span class="linenos">247</span></a>
</span><span id="Benchmark-248"><a href="#Benchmark-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dump_histories</span> <span class="o">=</span> <span class="n">dump_histories</span>
</span><span id="Benchmark-249"><a href="#Benchmark-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span> <span class="o">=</span> <span class="n">max_retry</span>
</span><span id="Benchmark-250"><a href="#Benchmark-250"><span class="linenos">250</span></a>
</span><span id="Benchmark-251"><a href="#Benchmark-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">n_runs</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Benchmark-252"><a href="#Benchmark-252"><span class="linenos">252</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark-253"><a href="#Benchmark-253"><span class="linenos">253</span></a>                <span class="s2">&quot;The number of run (for each problem/algorithm pair) must be &quot;</span>
</span><span id="Benchmark-254"><a href="#Benchmark-254"><span class="linenos">254</span></a>                <span class="s2">&quot;at least 1.&quot;</span>
</span><span id="Benchmark-255"><a href="#Benchmark-255"><span class="linenos">255</span></a>            <span class="p">)</span>
</span><span id="Benchmark-256"><a href="#Benchmark-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_n_runs</span> <span class="o">=</span> <span class="n">n_runs</span>
</span><span id="Benchmark-257"><a href="#Benchmark-257"><span class="linenos">257</span></a>
</span><span id="Benchmark-258"><a href="#Benchmark-258"><span class="linenos">258</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir_path</span><span class="p">)</span>
</span><span id="Benchmark-259"><a href="#Benchmark-259"><span class="linenos">259</span></a>
</span><span id="Benchmark-260"><a href="#Benchmark-260"><span class="linenos">260</span></a>        <span class="k">if</span> <span class="n">performance_indicators</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark-261"><a href="#Benchmark-261"><span class="linenos">261</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;igd&quot;</span><span class="p">]</span>
</span><span id="Benchmark-262"><a href="#Benchmark-262"><span class="linenos">262</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Benchmark-263"><a href="#Benchmark-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Benchmark-264"><a href="#Benchmark-264"><span class="linenos">264</span></a>            <span class="k">for</span> <span class="n">pi</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">performance_indicators</span><span class="p">):</span>
</span><span id="Benchmark-265"><a href="#Benchmark-265"><span class="linenos">265</span></a>                <span class="k">if</span> <span class="n">pi</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Benchmark</span><span class="o">.</span><span class="n">SUPPORTED_PERFOMANCE_INDICATORS</span><span class="p">:</span>
</span><span id="Benchmark-266"><a href="#Benchmark-266"><span class="linenos">266</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown performance indicator &#39;</span><span class="si">{</span><span class="n">pi</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="Benchmark-267"><a href="#Benchmark-267"><span class="linenos">267</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
</span><span id="Benchmark-268"><a href="#Benchmark-268"><span class="linenos">268</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="p">)</span>
</span><span id="Benchmark-269"><a href="#Benchmark-269"><span class="linenos">269</span></a>
</span><span id="Benchmark-270"><a href="#Benchmark-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">problems</span><span class="p">:</span>
</span><span id="Benchmark-271"><a href="#Benchmark-271"><span class="linenos">271</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A benchmark requires at least 1 problem.&quot;</span><span class="p">)</span>
</span><span id="Benchmark-272"><a href="#Benchmark-272"><span class="linenos">272</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">problems</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Benchmark-273"><a href="#Benchmark-273"><span class="linenos">273</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Benchmark-274"><a href="#Benchmark-274"><span class="linenos">274</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark-275"><a href="#Benchmark-275"><span class="linenos">275</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for problem &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; must be a dict.&quot;</span>
</span><span id="Benchmark-276"><a href="#Benchmark-276"><span class="linenos">276</span></a>                <span class="p">)</span>
</span><span id="Benchmark-277"><a href="#Benchmark-277"><span class="linenos">277</span></a>            <span class="k">if</span> <span class="s2">&quot;problem&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
</span><span id="Benchmark-278"><a href="#Benchmark-278"><span class="linenos">278</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark-279"><a href="#Benchmark-279"><span class="linenos">279</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for problem &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; is missing mandatory key &quot;</span>
</span><span id="Benchmark-280"><a href="#Benchmark-280"><span class="linenos">280</span></a>                    <span class="s2">&quot;&#39;problem&#39;.&quot;</span>
</span><span id="Benchmark-281"><a href="#Benchmark-281"><span class="linenos">281</span></a>                <span class="p">)</span>
</span><span id="Benchmark-282"><a href="#Benchmark-282"><span class="linenos">282</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_problems</span> <span class="o">=</span> <span class="n">problems</span>
</span><span id="Benchmark-283"><a href="#Benchmark-283"><span class="linenos">283</span></a>
</span><span id="Benchmark-284"><a href="#Benchmark-284"><span class="linenos">284</span></a>    <span class="k">def</span> <span class="nf">_all_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Pair</span><span class="p">]:</span>
</span><span id="Benchmark-285"><a href="#Benchmark-285"><span class="linenos">285</span></a>        <span class="sd">&quot;&quot;&quot;Generate the list of all pairs to be run.&quot;&quot;&quot;</span>
</span><span id="Benchmark-286"><a href="#Benchmark-286"><span class="linenos">286</span></a>        <span class="n">everything</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span>
</span><span id="Benchmark-287"><a href="#Benchmark-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="Benchmark-288"><a href="#Benchmark-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_problems</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="Benchmark-289"><a href="#Benchmark-289"><span class="linenos">289</span></a>            <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_runs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="Benchmark-290"><a href="#Benchmark-290"><span class="linenos">290</span></a>        <span class="p">)</span>
</span><span id="Benchmark-291"><a href="#Benchmark-291"><span class="linenos">291</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="Benchmark-292"><a href="#Benchmark-292"><span class="linenos">292</span></a>            <span class="n">Pair</span><span class="p">(</span>
</span><span id="Benchmark-293"><a href="#Benchmark-293"><span class="linenos">293</span></a>                <span class="n">algorithm_description</span><span class="o">=</span><span class="n">aa</span><span class="p">,</span>
</span><span id="Benchmark-294"><a href="#Benchmark-294"><span class="linenos">294</span></a>                <span class="n">algorithm_name</span><span class="o">=</span><span class="n">an</span><span class="p">,</span>
</span><span id="Benchmark-295"><a href="#Benchmark-295"><span class="linenos">295</span></a>                <span class="n">n_run</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="Benchmark-296"><a href="#Benchmark-296"><span class="linenos">296</span></a>                <span class="n">problem_description</span><span class="o">=</span><span class="n">pp</span><span class="p">,</span>
</span><span id="Benchmark-297"><a href="#Benchmark-297"><span class="linenos">297</span></a>                <span class="n">problem_name</span><span class="o">=</span><span class="n">pn</span><span class="p">,</span>
</span><span id="Benchmark-298"><a href="#Benchmark-298"><span class="linenos">298</span></a>            <span class="p">)</span>
</span><span id="Benchmark-299"><a href="#Benchmark-299"><span class="linenos">299</span></a>            <span class="k">for</span> <span class="p">(</span><span class="n">an</span><span class="p">,</span> <span class="n">aa</span><span class="p">),</span> <span class="p">(</span><span class="n">pn</span><span class="p">,</span> <span class="n">pp</span><span class="p">),</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">everything</span>
</span><span id="Benchmark-300"><a href="#Benchmark-300"><span class="linenos">300</span></a>        <span class="p">]</span>
</span><span id="Benchmark-301"><a href="#Benchmark-301"><span class="linenos">301</span></a>
</span><span id="Benchmark-302"><a href="#Benchmark-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="nf">_compute_global_pareto_population</span><span class="p">(</span>
</span><span id="Benchmark-303"><a href="#Benchmark-303"><span class="linenos">303</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">problem_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">algorithm_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Benchmark-304"><a href="#Benchmark-304"><span class="linenos">304</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark-305"><a href="#Benchmark-305"><span class="linenos">305</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-306"><a href="#Benchmark-306"><span class="linenos">306</span></a><span class="sd">        Computes the global Pareto population of a given problem-algorithm</span>
</span><span id="Benchmark-307"><a href="#Benchmark-307"><span class="linenos">307</span></a><span class="sd">        pair. See `compute_global_pareto_populations`.</span>
</span><span id="Benchmark-308"><a href="#Benchmark-308"><span class="linenos">308</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-309"><a href="#Benchmark-309"><span class="linenos">309</span></a>        <span class="n">gpp_path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Benchmark-310"><a href="#Benchmark-310"><span class="linenos">310</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.gpp.npz&quot;</span>
</span><span id="Benchmark-311"><a href="#Benchmark-311"><span class="linenos">311</span></a>        <span class="p">)</span>
</span><span id="Benchmark-312"><a href="#Benchmark-312"><span class="linenos">312</span></a>        <span class="k">if</span> <span class="n">gpp_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Benchmark-313"><a href="#Benchmark-313"><span class="linenos">313</span></a>            <span class="c1"># Global Pareto population has already been calculated</span>
</span><span id="Benchmark-314"><a href="#Benchmark-314"><span class="linenos">314</span></a>            <span class="k">return</span>
</span><span id="Benchmark-315"><a href="#Benchmark-315"><span class="linenos">315</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="Benchmark-316"><a href="#Benchmark-316"><span class="linenos">316</span></a>            <span class="s2">&quot;Computing global Pareto population for pair [</span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span>
</span><span id="Benchmark-317"><a href="#Benchmark-317"><span class="linenos">317</span></a>            <span class="n">problem_name</span><span class="p">,</span>
</span><span id="Benchmark-318"><a href="#Benchmark-318"><span class="linenos">318</span></a>            <span class="n">algorithm_name</span><span class="p">,</span>
</span><span id="Benchmark-319"><a href="#Benchmark-319"><span class="linenos">319</span></a>        <span class="p">)</span>
</span><span id="Benchmark-320"><a href="#Benchmark-320"><span class="linenos">320</span></a>        <span class="n">populations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Benchmark-321"><a href="#Benchmark-321"><span class="linenos">321</span></a>        <span class="k">for</span> <span class="n">n_run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_runs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Benchmark-322"><a href="#Benchmark-322"><span class="linenos">322</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Benchmark-323"><a href="#Benchmark-323"><span class="linenos">323</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span>
</span><span id="Benchmark-324"><a href="#Benchmark-324"><span class="linenos">324</span></a>                <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">problem_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">algorithm_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">n_run</span><span class="si">}</span><span class="s2">.pp.npz&quot;</span>
</span><span id="Benchmark-325"><a href="#Benchmark-325"><span class="linenos">325</span></a>            <span class="p">)</span>
</span><span id="Benchmark-326"><a href="#Benchmark-326"><span class="linenos">326</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="Benchmark-327"><a href="#Benchmark-327"><span class="linenos">327</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="Benchmark-328"><a href="#Benchmark-328"><span class="linenos">328</span></a>                    <span class="s2">&quot;File </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair most &quot;</span>
</span><span id="Benchmark-329"><a href="#Benchmark-329"><span class="linenos">329</span></a>                    <span class="s2">&quot;likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="Benchmark-330"><a href="#Benchmark-330"><span class="linenos">330</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="Benchmark-331"><a href="#Benchmark-331"><span class="linenos">331</span></a>                <span class="p">)</span>
</span><span id="Benchmark-332"><a href="#Benchmark-332"><span class="linenos">332</span></a>                <span class="k">continue</span>
</span><span id="Benchmark-333"><a href="#Benchmark-333"><span class="linenos">333</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">allow_pickle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Benchmark-334"><a href="#Benchmark-334"><span class="linenos">334</span></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Benchmark-335"><a href="#Benchmark-335"><span class="linenos">335</span></a>                <span class="n">populations</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">populations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>
</span><span id="Benchmark-336"><a href="#Benchmark-336"><span class="linenos">336</span></a>            <span class="n">data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Benchmark-337"><a href="#Benchmark-337"><span class="linenos">337</span></a>
</span><span id="Benchmark-338"><a href="#Benchmark-338"><span class="linenos">338</span></a>        <span class="n">consolidated</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">populations</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="Benchmark-339"><a href="#Benchmark-339"><span class="linenos">339</span></a>        <span class="k">if</span> <span class="s2">&quot;F&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">consolidated</span><span class="p">:</span>
</span><span id="Benchmark-340"><a href="#Benchmark-340"><span class="linenos">340</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="Benchmark-341"><a href="#Benchmark-341"><span class="linenos">341</span></a>                <span class="s2">&quot;No Pareto population file found for pair </span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2">. This is &quot;</span>
</span><span id="Benchmark-342"><a href="#Benchmark-342"><span class="linenos">342</span></a>                <span class="s2">&quot;most likely because none of the runs finished or succeeded.&quot;</span><span class="p">,</span>
</span><span id="Benchmark-343"><a href="#Benchmark-343"><span class="linenos">343</span></a>                <span class="n">problem_name</span><span class="p">,</span>
</span><span id="Benchmark-344"><a href="#Benchmark-344"><span class="linenos">344</span></a>                <span class="n">algorithm_name</span><span class="p">,</span>
</span><span id="Benchmark-345"><a href="#Benchmark-345"><span class="linenos">345</span></a>            <span class="p">)</span>
</span><span id="Benchmark-346"><a href="#Benchmark-346"><span class="linenos">346</span></a>            <span class="k">return</span>
</span><span id="Benchmark-347"><a href="#Benchmark-347"><span class="linenos">347</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="n">pareto_frontier_mask</span><span class="p">(</span><span class="n">consolidated</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">])</span>
</span><span id="Benchmark-348"><a href="#Benchmark-348"><span class="linenos">348</span></a>        <span class="n">np</span><span class="o">.</span><span class="n">savez_compressed</span><span class="p">(</span>
</span><span id="Benchmark-349"><a href="#Benchmark-349"><span class="linenos">349</span></a>            <span class="n">gpp_path</span><span class="p">,</span>
</span><span id="Benchmark-350"><a href="#Benchmark-350"><span class="linenos">350</span></a>            <span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">consolidated</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
</span><span id="Benchmark-351"><a href="#Benchmark-351"><span class="linenos">351</span></a>        <span class="p">)</span>
</span><span id="Benchmark-352"><a href="#Benchmark-352"><span class="linenos">352</span></a>
</span><span id="Benchmark-353"><a href="#Benchmark-353"><span class="linenos">353</span></a>    <span class="k">def</span> <span class="nf">_compute_performance_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">Pair</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark-354"><a href="#Benchmark-354"><span class="linenos">354</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-355"><a href="#Benchmark-355"><span class="linenos">355</span></a><span class="sd">        Computes all performance indicators for a given pair, and returns the</span>
</span><span id="Benchmark-356"><a href="#Benchmark-356"><span class="linenos">356</span></a><span class="sd">        relevant data frame. See `compute_performance_indicators`.</span>
</span><span id="Benchmark-357"><a href="#Benchmark-357"><span class="linenos">357</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-358"><a href="#Benchmark-358"><span class="linenos">358</span></a>        <span class="n">pi_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pi_filename</span><span class="p">()</span>
</span><span id="Benchmark-359"><a href="#Benchmark-359"><span class="linenos">359</span></a>        <span class="k">if</span> <span class="n">pi_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="Benchmark-360"><a href="#Benchmark-360"><span class="linenos">360</span></a>            <span class="c1"># PIs have already been calculated</span>
</span><span id="Benchmark-361"><a href="#Benchmark-361"><span class="linenos">361</span></a>            <span class="k">return</span>
</span><span id="Benchmark-362"><a href="#Benchmark-362"><span class="linenos">362</span></a>
</span><span id="Benchmark-363"><a href="#Benchmark-363"><span class="linenos">363</span></a>        <span class="c1"># Load top layer history and the pareto history</span>
</span><span id="Benchmark-364"><a href="#Benchmark-364"><span class="linenos">364</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Benchmark-365"><a href="#Benchmark-365"><span class="linenos">365</span></a>            <span class="n">history</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
</span><span id="Benchmark-366"><a href="#Benchmark-366"><span class="linenos">366</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">top_layer_history_filename</span><span class="p">()</span>
</span><span id="Benchmark-367"><a href="#Benchmark-367"><span class="linenos">367</span></a>            <span class="p">)</span>
</span><span id="Benchmark-368"><a href="#Benchmark-368"><span class="linenos">368</span></a>            <span class="n">pareto_history</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
</span><span id="Benchmark-369"><a href="#Benchmark-369"><span class="linenos">369</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pareto_population_filename</span><span class="p">()</span>
</span><span id="Benchmark-370"><a href="#Benchmark-370"><span class="linenos">370</span></a>            <span class="p">)</span>
</span><span id="Benchmark-371"><a href="#Benchmark-371"><span class="linenos">371</span></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="Benchmark-372"><a href="#Benchmark-372"><span class="linenos">372</span></a>            <span class="k">return</span>
</span><span id="Benchmark-373"><a href="#Benchmark-373"><span class="linenos">373</span></a>
</span><span id="Benchmark-374"><a href="#Benchmark-374"><span class="linenos">374</span></a>        <span class="c1"># Break down histories. Each element of this list is a tuple</span>
</span><span id="Benchmark-375"><a href="#Benchmark-375"><span class="linenos">375</span></a>        <span class="c1"># containing the population&#39;s `X` and `F`, and the pareto</span>
</span><span id="Benchmark-376"><a href="#Benchmark-376"><span class="linenos">376</span></a>        <span class="c1"># population&#39;s `X` and `F` at a given generation (or `_batch`).</span>
</span><span id="Benchmark-377"><a href="#Benchmark-377"><span class="linenos">377</span></a>        <span class="n">states</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Benchmark-378"><a href="#Benchmark-378"><span class="linenos">378</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">history</span><span class="p">[</span><span class="s2">&quot;_batch&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Benchmark-379"><a href="#Benchmark-379"><span class="linenos">379</span></a>            <span class="n">hidx</span> <span class="o">=</span> <span class="n">history</span><span class="p">[</span><span class="s2">&quot;_batch&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span>
</span><span id="Benchmark-380"><a href="#Benchmark-380"><span class="linenos">380</span></a>            <span class="n">pidx</span> <span class="o">=</span> <span class="n">pareto_history</span><span class="p">[</span><span class="s2">&quot;_batch&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span>
</span><span id="Benchmark-381"><a href="#Benchmark-381"><span class="linenos">381</span></a>            <span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Benchmark-382"><a href="#Benchmark-382"><span class="linenos">382</span></a>                <span class="p">(</span>
</span><span id="Benchmark-383"><a href="#Benchmark-383"><span class="linenos">383</span></a>                    <span class="n">history</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">][</span><span class="n">hidx</span><span class="p">],</span>
</span><span id="Benchmark-384"><a href="#Benchmark-384"><span class="linenos">384</span></a>                    <span class="n">history</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">][</span><span class="n">hidx</span><span class="p">],</span>
</span><span id="Benchmark-385"><a href="#Benchmark-385"><span class="linenos">385</span></a>                    <span class="n">pareto_history</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">][</span><span class="n">pidx</span><span class="p">],</span>
</span><span id="Benchmark-386"><a href="#Benchmark-386"><span class="linenos">386</span></a>                    <span class="n">pareto_history</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">][</span><span class="n">pidx</span><span class="p">],</span>
</span><span id="Benchmark-387"><a href="#Benchmark-387"><span class="linenos">387</span></a>                <span class="p">)</span>
</span><span id="Benchmark-388"><a href="#Benchmark-388"><span class="linenos">388</span></a>            <span class="p">)</span>
</span><span id="Benchmark-389"><a href="#Benchmark-389"><span class="linenos">389</span></a>        <span class="n">history</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Benchmark-390"><a href="#Benchmark-390"><span class="linenos">390</span></a>        <span class="n">pareto_history</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Benchmark-391"><a href="#Benchmark-391"><span class="linenos">391</span></a>
</span><span id="Benchmark-392"><a href="#Benchmark-392"><span class="linenos">392</span></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="Benchmark-393"><a href="#Benchmark-393"><span class="linenos">393</span></a>        <span class="c1"># Compute PIs</span>
</span><span id="Benchmark-394"><a href="#Benchmark-394"><span class="linenos">394</span></a>        <span class="c1"># pylint: disable=cell-var-from-loop</span>
</span><span id="Benchmark-395"><a href="#Benchmark-395"><span class="linenos">395</span></a>        <span class="k">for</span> <span class="n">pi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="p">:</span>
</span><span id="Benchmark-396"><a href="#Benchmark-396"><span class="linenos">396</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Computing PI &#39;</span><span class="si">%s</span><span class="s2">&#39; for pair [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark-397"><a href="#Benchmark-397"><span class="linenos">397</span></a>            <span class="n">f</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span>
</span><span id="Benchmark-398"><a href="#Benchmark-398"><span class="linenos">398</span></a>                <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span> <span class="nb">float</span>
</span><span id="Benchmark-399"><a href="#Benchmark-399"><span class="linenos">399</span></a>            <span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="Benchmark-400"><a href="#Benchmark-400"><span class="linenos">400</span></a>            <span class="k">if</span> <span class="n">pi</span> <span class="o">==</span> <span class="s2">&quot;df&quot;</span><span class="p">:</span>
</span><span id="Benchmark-401"><a href="#Benchmark-401"><span class="linenos">401</span></a>                <span class="n">problem</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span>
</span><span id="Benchmark-402"><a href="#Benchmark-402"><span class="linenos">402</span></a>                <span class="n">n_evals</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;df_n_evals&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Benchmark-403"><a href="#Benchmark-403"><span class="linenos">403</span></a>                <span class="n">delta_f</span> <span class="o">=</span> <span class="n">DeltaF</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">n_evals</span><span class="p">)</span>
</span><span id="Benchmark-404"><a href="#Benchmark-404"><span class="linenos">404</span></a>                <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">delta_f</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
</span><span id="Benchmark-405"><a href="#Benchmark-405"><span class="linenos">405</span></a>            <span class="k">elif</span> <span class="n">pi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gd&quot;</span><span class="p">,</span> <span class="s2">&quot;gd+&quot;</span><span class="p">,</span> <span class="s2">&quot;igd&quot;</span><span class="p">,</span> <span class="s2">&quot;igd+&quot;</span><span class="p">]:</span>
</span><span id="Benchmark-406"><a href="#Benchmark-406"><span class="linenos">406</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Benchmark-407"><a href="#Benchmark-407"><span class="linenos">407</span></a>                    <span class="k">if</span> <span class="s2">&quot;pareto_front&quot;</span> <span class="ow">in</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">:</span>
</span><span id="Benchmark-408"><a href="#Benchmark-408"><span class="linenos">408</span></a>                        <span class="n">pf</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pareto_front&quot;</span><span class="p">)</span>
</span><span id="Benchmark-409"><a href="#Benchmark-409"><span class="linenos">409</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Benchmark-410"><a href="#Benchmark-410"><span class="linenos">410</span></a>                        <span class="n">path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Benchmark-411"><a href="#Benchmark-411"><span class="linenos">411</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span>
</span><span id="Benchmark-412"><a href="#Benchmark-412"><span class="linenos">412</span></a>                            <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">global_pareto_population_filename</span><span class="p">()</span>
</span><span id="Benchmark-413"><a href="#Benchmark-413"><span class="linenos">413</span></a>                        <span class="p">)</span>
</span><span id="Benchmark-414"><a href="#Benchmark-414"><span class="linenos">414</span></a>                        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Benchmark-415"><a href="#Benchmark-415"><span class="linenos">415</span></a>                        <span class="n">pf</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span>
</span><span id="Benchmark-416"><a href="#Benchmark-416"><span class="linenos">416</span></a>                        <span class="n">data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Benchmark-417"><a href="#Benchmark-417"><span class="linenos">417</span></a>                    <span class="n">ind</span> <span class="o">=</span> <span class="n">get_performance_indicator</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">pf</span><span class="p">)</span>
</span><span id="Benchmark-418"><a href="#Benchmark-418"><span class="linenos">418</span></a>                    <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">ind</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</span><span id="Benchmark-419"><a href="#Benchmark-419"><span class="linenos">419</span></a>                <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="Benchmark-420"><a href="#Benchmark-420"><span class="linenos">420</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="Benchmark-421"><a href="#Benchmark-421"><span class="linenos">421</span></a>                        <span class="s2">&quot;Global Pareto population file </span><span class="si">%s</span><span class="s2"> not found&quot;</span><span class="p">,</span> <span class="n">path</span>
</span><span id="Benchmark-422"><a href="#Benchmark-422"><span class="linenos">422</span></a>                    <span class="p">)</span>
</span><span id="Benchmark-423"><a href="#Benchmark-423"><span class="linenos">423</span></a>            <span class="k">elif</span> <span class="n">pi</span> <span class="o">==</span> <span class="s2">&quot;hv&quot;</span> <span class="ow">and</span> <span class="s2">&quot;hv_ref_point&quot;</span> <span class="ow">in</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">:</span>
</span><span id="Benchmark-424"><a href="#Benchmark-424"><span class="linenos">424</span></a>                <span class="n">hv</span> <span class="o">=</span> <span class="n">get_performance_indicator</span><span class="p">(</span>
</span><span id="Benchmark-425"><a href="#Benchmark-425"><span class="linenos">425</span></a>                    <span class="s2">&quot;hv&quot;</span><span class="p">,</span> <span class="n">ref_point</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;hv_ref_point&quot;</span><span class="p">]</span>
</span><span id="Benchmark-426"><a href="#Benchmark-426"><span class="linenos">426</span></a>                <span class="p">)</span>
</span><span id="Benchmark-427"><a href="#Benchmark-427"><span class="linenos">427</span></a>                <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">hv</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</span><span id="Benchmark-428"><a href="#Benchmark-428"><span class="linenos">428</span></a>            <span class="k">elif</span> <span class="n">pi</span> <span class="o">==</span> <span class="s2">&quot;ps&quot;</span><span class="p">:</span>
</span><span id="Benchmark-429"><a href="#Benchmark-429"><span class="linenos">429</span></a>                <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">pX</span><span class="p">,</span> <span class="n">pF</span><span class="p">:</span> <span class="n">pX</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Benchmark-430"><a href="#Benchmark-430"><span class="linenos">430</span></a>
</span><span id="Benchmark-431"><a href="#Benchmark-431"><span class="linenos">431</span></a>            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;perf_&quot;</span> <span class="o">+</span> <span class="n">pi</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">states</span><span class="p">]</span>
</span><span id="Benchmark-432"><a href="#Benchmark-432"><span class="linenos">432</span></a>
</span><span id="Benchmark-433"><a href="#Benchmark-433"><span class="linenos">433</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_name</span>
</span><span id="Benchmark-434"><a href="#Benchmark-434"><span class="linenos">434</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_name</span>
</span><span id="Benchmark-435"><a href="#Benchmark-435"><span class="linenos">435</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_gen&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">states</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Benchmark-436"><a href="#Benchmark-436"><span class="linenos">436</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_run&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">n_run</span>
</span><span id="Benchmark-437"><a href="#Benchmark-437"><span class="linenos">437</span></a>
</span><span id="Benchmark-438"><a href="#Benchmark-438"><span class="linenos">438</span></a>        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">pi_path</span><span class="p">)</span>
</span><span id="Benchmark-439"><a href="#Benchmark-439"><span class="linenos">439</span></a>
</span><span id="Benchmark-440"><a href="#Benchmark-440"><span class="linenos">440</span></a>    <span class="k">def</span> <span class="nf">_pair_done</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">Pair</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Benchmark-441"><a href="#Benchmark-441"><span class="linenos">441</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-442"><a href="#Benchmark-442"><span class="linenos">442</span></a><span class="sd">        Wether a pair has been successfully executed. This is determined by</span>
</span><span id="Benchmark-443"><a href="#Benchmark-443"><span class="linenos">443</span></a><span class="sd">        checking if `_output_dir_path/pair.result_filename()` exists or not.</span>
</span><span id="Benchmark-444"><a href="#Benchmark-444"><span class="linenos">444</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-445"><a href="#Benchmark-445"><span class="linenos">445</span></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">result_filename</span><span class="p">())</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
</span><span id="Benchmark-446"><a href="#Benchmark-446"><span class="linenos">446</span></a>
</span><span id="Benchmark-447"><a href="#Benchmark-447"><span class="linenos">447</span></a>    <span class="k">def</span> <span class="nf">_run_pair</span><span class="p">(</span>
</span><span id="Benchmark-448"><a href="#Benchmark-448"><span class="linenos">448</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Benchmark-449"><a href="#Benchmark-449"><span class="linenos">449</span></a>        <span class="n">pair</span><span class="p">:</span> <span class="n">Pair</span><span class="p">,</span>
</span><span id="Benchmark-450"><a href="#Benchmark-450"><span class="linenos">450</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark-451"><a href="#Benchmark-451"><span class="linenos">451</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-452"><a href="#Benchmark-452"><span class="linenos">452</span></a><span class="sd">        Runs a given algorithm against a given problem. See</span>
</span><span id="Benchmark-453"><a href="#Benchmark-453"><span class="linenos">453</span></a><span class="sd">        `nmoo.benchmark.Benchmark.run`. Immediately dumps the history of the</span>
</span><span id="Benchmark-454"><a href="#Benchmark-454"><span class="linenos">454</span></a><span class="sd">        problem and all wrapped problems with the following naming scheme:</span>
</span><span id="Benchmark-455"><a href="#Benchmark-455"><span class="linenos">455</span></a>
</span><span id="Benchmark-456"><a href="#Benchmark-456"><span class="linenos">456</span></a><span class="sd">            output_dir_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.&lt;level&gt;.npz</span>
</span><span id="Benchmark-457"><a href="#Benchmark-457"><span class="linenos">457</span></a>
</span><span id="Benchmark-458"><a href="#Benchmark-458"><span class="linenos">458</span></a><span class="sd">        where `level` is the depth of the wrapped problem, starting at `1`. See</span>
</span><span id="Benchmark-459"><a href="#Benchmark-459"><span class="linenos">459</span></a><span class="sd">        `nmoo.wrapped_problem.WrappedProblem.dump_all_histories`. It also dumps</span>
</span><span id="Benchmark-460"><a href="#Benchmark-460"><span class="linenos">460</span></a><span class="sd">        the compounded Pareto population for every at every generation (or just</span>
</span><span id="Benchmark-461"><a href="#Benchmark-461"><span class="linenos">461</span></a><span class="sd">        the last generation of `set_history` is set to `False` in the algorithm</span>
</span><span id="Benchmark-462"><a href="#Benchmark-462"><span class="linenos">462</span></a><span class="sd">        description) in</span>
</span><span id="Benchmark-463"><a href="#Benchmark-463"><span class="linenos">463</span></a>
</span><span id="Benchmark-464"><a href="#Benchmark-464"><span class="linenos">464</span></a><span class="sd">            output_dir_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pp.npz</span>
</span><span id="Benchmark-465"><a href="#Benchmark-465"><span class="linenos">465</span></a>
</span><span id="Benchmark-466"><a href="#Benchmark-466"><span class="linenos">466</span></a><span class="sd">        Additionally, it generates a CSV file containing various statistics</span>
</span><span id="Benchmark-467"><a href="#Benchmark-467"><span class="linenos">467</span></a><span class="sd">        named:</span>
</span><span id="Benchmark-468"><a href="#Benchmark-468"><span class="linenos">468</span></a>
</span><span id="Benchmark-469"><a href="#Benchmark-469"><span class="linenos">469</span></a><span class="sd">            output_dir_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv</span>
</span><span id="Benchmark-470"><a href="#Benchmark-470"><span class="linenos">470</span></a>
</span><span id="Benchmark-471"><a href="#Benchmark-471"><span class="linenos">471</span></a><span class="sd">        The existence of this file is also used to determine if the pair has</span>
</span><span id="Benchmark-472"><a href="#Benchmark-472"><span class="linenos">472</span></a><span class="sd">        already been run when resuming a benchmark.</span>
</span><span id="Benchmark-473"><a href="#Benchmark-473"><span class="linenos">473</span></a>
</span><span id="Benchmark-474"><a href="#Benchmark-474"><span class="linenos">474</span></a><span class="sd">        Args: pair: A `Pair` object representint the problem-algorithm pair to</span>
</span><span id="Benchmark-475"><a href="#Benchmark-475"><span class="linenos">475</span></a><span class="sd">            run.</span>
</span><span id="Benchmark-476"><a href="#Benchmark-476"><span class="linenos">476</span></a>
</span><span id="Benchmark-477"><a href="#Benchmark-477"><span class="linenos">477</span></a><span class="sd">        Returns: Wether the run was successful or not.</span>
</span><span id="Benchmark-478"><a href="#Benchmark-478"><span class="linenos">478</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-479"><a href="#Benchmark-479"><span class="linenos">479</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Running pair [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark-480"><a href="#Benchmark-480"><span class="linenos">480</span></a>
</span><span id="Benchmark-481"><a href="#Benchmark-481"><span class="linenos">481</span></a>        <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">start_new_run</span><span class="p">()</span>
</span><span id="Benchmark-482"><a href="#Benchmark-482"><span class="linenos">482</span></a>        <span class="n">evaluator</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="Benchmark-483"><a href="#Benchmark-483"><span class="linenos">483</span></a>            <span class="s2">&quot;evaluator&quot;</span><span class="p">,</span>
</span><span id="Benchmark-484"><a href="#Benchmark-484"><span class="linenos">484</span></a>            <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;evaluator&quot;</span><span class="p">),</span>
</span><span id="Benchmark-485"><a href="#Benchmark-485"><span class="linenos">485</span></a>        <span class="p">)</span>
</span><span id="Benchmark-486"><a href="#Benchmark-486"><span class="linenos">486</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Benchmark-487"><a href="#Benchmark-487"><span class="linenos">487</span></a>            <span class="n">results</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span>
</span><span id="Benchmark-488"><a href="#Benchmark-488"><span class="linenos">488</span></a>                <span class="n">deepcopy</span><span class="p">(</span><span class="n">pair</span><span class="o">.</span><span class="n">problem_description</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]),</span>
</span><span id="Benchmark-489"><a href="#Benchmark-489"><span class="linenos">489</span></a>                <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">],</span>
</span><span id="Benchmark-490"><a href="#Benchmark-490"><span class="linenos">490</span></a>                <span class="n">termination</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination&quot;</span><span class="p">),</span>
</span><span id="Benchmark-491"><a href="#Benchmark-491"><span class="linenos">491</span></a>                <span class="n">copy_algorithm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark-492"><a href="#Benchmark-492"><span class="linenos">492</span></a>                <span class="n">copy_termination</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark-493"><a href="#Benchmark-493"><span class="linenos">493</span></a>                <span class="c1"># extra Algorithm.setup kwargs</span>
</span><span id="Benchmark-494"><a href="#Benchmark-494"><span class="linenos">494</span></a>                <span class="n">callback</span><span class="o">=</span><span class="n">TimerCallback</span><span class="p">(),</span>
</span><span id="Benchmark-495"><a href="#Benchmark-495"><span class="linenos">495</span></a>                <span class="n">display</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">),</span>
</span><span id="Benchmark-496"><a href="#Benchmark-496"><span class="linenos">496</span></a>                <span class="n">evaluator</span><span class="o">=</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">evaluator</span><span class="p">),</span>
</span><span id="Benchmark-497"><a href="#Benchmark-497"><span class="linenos">497</span></a>                <span class="n">return_least_infeasible</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="Benchmark-498"><a href="#Benchmark-498"><span class="linenos">498</span></a>                    <span class="s2">&quot;return_least_infeasible&quot;</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="Benchmark-499"><a href="#Benchmark-499"><span class="linenos">499</span></a>                <span class="p">),</span>
</span><span id="Benchmark-500"><a href="#Benchmark-500"><span class="linenos">500</span></a>                <span class="n">save_history</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark-501"><a href="#Benchmark-501"><span class="linenos">501</span></a>                <span class="n">seed</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;seed&quot;</span><span class="p">),</span>
</span><span id="Benchmark-502"><a href="#Benchmark-502"><span class="linenos">502</span></a>                <span class="n">verbose</span><span class="o">=</span><span class="n">pair</span><span class="o">.</span><span class="n">algorithm_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
</span><span id="Benchmark-503"><a href="#Benchmark-503"><span class="linenos">503</span></a>            <span class="p">)</span>
</span><span id="Benchmark-504"><a href="#Benchmark-504"><span class="linenos">504</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="Benchmark-505"><a href="#Benchmark-505"><span class="linenos">505</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Pair [</span><span class="si">%s</span><span class="s2">] failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="Benchmark-506"><a href="#Benchmark-506"><span class="linenos">506</span></a>            <span class="k">return</span>
</span><span id="Benchmark-507"><a href="#Benchmark-507"><span class="linenos">507</span></a>
</span><span id="Benchmark-508"><a href="#Benchmark-508"><span class="linenos">508</span></a>        <span class="c1"># Dump all layers histories</span>
</span><span id="Benchmark-509"><a href="#Benchmark-509"><span class="linenos">509</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dump_histories</span><span class="p">:</span>
</span><span id="Benchmark-510"><a href="#Benchmark-510"><span class="linenos">510</span></a>            <span class="n">results</span><span class="o">.</span><span class="n">problem</span><span class="o">.</span><span class="n">dump_all_histories</span><span class="p">(</span>
</span><span id="Benchmark-511"><a href="#Benchmark-511"><span class="linenos">511</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">,</span>
</span><span id="Benchmark-512"><a href="#Benchmark-512"><span class="linenos">512</span></a>                <span class="n">pair</span><span class="o">.</span><span class="n">filename_prefix</span><span class="p">(),</span>
</span><span id="Benchmark-513"><a href="#Benchmark-513"><span class="linenos">513</span></a>            <span class="p">)</span>
</span><span id="Benchmark-514"><a href="#Benchmark-514"><span class="linenos">514</span></a>
</span><span id="Benchmark-515"><a href="#Benchmark-515"><span class="linenos">515</span></a>        <span class="c1"># Dump pareto sets</span>
</span><span id="Benchmark-516"><a href="#Benchmark-516"><span class="linenos">516</span></a>        <span class="n">np</span><span class="o">.</span><span class="n">savez_compressed</span><span class="p">(</span>
</span><span id="Benchmark-517"><a href="#Benchmark-517"><span class="linenos">517</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pareto_population_filename</span><span class="p">(),</span>
</span><span id="Benchmark-518"><a href="#Benchmark-518"><span class="linenos">518</span></a>            <span class="o">**</span><span class="n">population_list_to_dict</span><span class="p">([</span><span class="n">h</span><span class="o">.</span><span class="n">opt</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">history</span><span class="p">]),</span>
</span><span id="Benchmark-519"><a href="#Benchmark-519"><span class="linenos">519</span></a>        <span class="p">)</span>
</span><span id="Benchmark-520"><a href="#Benchmark-520"><span class="linenos">520</span></a>
</span><span id="Benchmark-521"><a href="#Benchmark-521"><span class="linenos">521</span></a>        <span class="c1"># Create and dump CSV file</span>
</span><span id="Benchmark-522"><a href="#Benchmark-522"><span class="linenos">522</span></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="Benchmark-523"><a href="#Benchmark-523"><span class="linenos">523</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_gen&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">n_gen</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">history</span><span class="p">]</span>
</span><span id="Benchmark-524"><a href="#Benchmark-524"><span class="linenos">524</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">algorithm</span><span class="o">.</span><span class="n">callback</span><span class="o">.</span><span class="n">_deltas</span>
</span><span id="Benchmark-525"><a href="#Benchmark-525"><span class="linenos">525</span></a>        <span class="c1"># Important to create these columns once the dataframe has its full</span>
</span><span id="Benchmark-526"><a href="#Benchmark-526"><span class="linenos">526</span></a>        <span class="c1"># length</span>
</span><span id="Benchmark-527"><a href="#Benchmark-527"><span class="linenos">527</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">algorithm_name</span>
</span><span id="Benchmark-528"><a href="#Benchmark-528"><span class="linenos">528</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;problem&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">problem_name</span>
</span><span id="Benchmark-529"><a href="#Benchmark-529"><span class="linenos">529</span></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_run&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="n">n_run</span>
</span><span id="Benchmark-530"><a href="#Benchmark-530"><span class="linenos">530</span></a>        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">result_filename</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Benchmark-531"><a href="#Benchmark-531"><span class="linenos">531</span></a>
</span><span id="Benchmark-532"><a href="#Benchmark-532"><span class="linenos">532</span></a>    <span class="k">def</span> <span class="nf">compute_global_pareto_populations</span><span class="p">(</span>
</span><span id="Benchmark-533"><a href="#Benchmark-533"><span class="linenos">533</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark-534"><a href="#Benchmark-534"><span class="linenos">534</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark-535"><a href="#Benchmark-535"><span class="linenos">535</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-536"><a href="#Benchmark-536"><span class="linenos">536</span></a><span class="sd">        The global Pareto population of a problem-algorithm pair is the merged</span>
</span><span id="Benchmark-537"><a href="#Benchmark-537"><span class="linenos">537</span></a><span class="sd">        population of all pareto populations across all runs of that pair. THis</span>
</span><span id="Benchmark-538"><a href="#Benchmark-538"><span class="linenos">538</span></a><span class="sd">        function calculates global Pareto population of all pairs and dumps it</span>
</span><span id="Benchmark-539"><a href="#Benchmark-539"><span class="linenos">539</span></a><span class="sd">        to `output_dir_path/&lt;problem&gt;.&lt;algorithm&gt;.gpp.npz`.</span>
</span><span id="Benchmark-540"><a href="#Benchmark-540"><span class="linenos">540</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-541"><a href="#Benchmark-541"><span class="linenos">541</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Computing global Pareto populations&quot;</span><span class="p">)</span>
</span><span id="Benchmark-542"><a href="#Benchmark-542"><span class="linenos">542</span></a>        <span class="n">pa_pairs</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_problems</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="Benchmark-543"><a href="#Benchmark-543"><span class="linenos">543</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="Benchmark-544"><a href="#Benchmark-544"><span class="linenos">544</span></a>        <span class="n">executor</span><span class="p">(</span>
</span><span id="Benchmark-545"><a href="#Benchmark-545"><span class="linenos">545</span></a>            <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_compute_global_pareto_population</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">an</span><span class="p">,</span> <span class="n">pn</span><span class="p">)</span>
</span><span id="Benchmark-546"><a href="#Benchmark-546"><span class="linenos">546</span></a>            <span class="k">for</span> <span class="n">an</span><span class="p">,</span> <span class="n">pn</span> <span class="ow">in</span> <span class="n">pa_pairs</span>
</span><span id="Benchmark-547"><a href="#Benchmark-547"><span class="linenos">547</span></a>        <span class="p">)</span>
</span><span id="Benchmark-548"><a href="#Benchmark-548"><span class="linenos">548</span></a>
</span><span id="Benchmark-549"><a href="#Benchmark-549"><span class="linenos">549</span></a>    <span class="k">def</span> <span class="nf">compute_performance_indicators</span><span class="p">(</span>
</span><span id="Benchmark-550"><a href="#Benchmark-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark-551"><a href="#Benchmark-551"><span class="linenos">551</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark-552"><a href="#Benchmark-552"><span class="linenos">552</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-553"><a href="#Benchmark-553"><span class="linenos">553</span></a><span class="sd">        Computes all performance indicators and saves the corresponding</span>
</span><span id="Benchmark-554"><a href="#Benchmark-554"><span class="linenos">554</span></a><span class="sd">        dataframes in</span>
</span><span id="Benchmark-555"><a href="#Benchmark-555"><span class="linenos">555</span></a><span class="sd">        `output_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`</span>
</span><span id="Benchmark-556"><a href="#Benchmark-556"><span class="linenos">556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-557"><a href="#Benchmark-557"><span class="linenos">557</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Computing performance indicators&quot;</span><span class="p">)</span>
</span><span id="Benchmark-558"><a href="#Benchmark-558"><span class="linenos">558</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="Benchmark-559"><a href="#Benchmark-559"><span class="linenos">559</span></a>        <span class="n">executor</span><span class="p">(</span>
</span><span id="Benchmark-560"><a href="#Benchmark-560"><span class="linenos">560</span></a>            <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_compute_performance_indicator</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark-561"><a href="#Benchmark-561"><span class="linenos">561</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">()</span>
</span><span id="Benchmark-562"><a href="#Benchmark-562"><span class="linenos">562</span></a>        <span class="p">)</span>
</span><span id="Benchmark-563"><a href="#Benchmark-563"><span class="linenos">563</span></a>
</span><span id="Benchmark-564"><a href="#Benchmark-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">consolidate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark-565"><a href="#Benchmark-565"><span class="linenos">565</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-566"><a href="#Benchmark-566"><span class="linenos">566</span></a><span class="sd">        Merges all statistics dataframes</span>
</span><span id="Benchmark-567"><a href="#Benchmark-567"><span class="linenos">567</span></a><span class="sd">        (`&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv`) and all PI dataframes</span>
</span><span id="Benchmark-568"><a href="#Benchmark-568"><span class="linenos">568</span></a><span class="sd">        (`&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`) into a single</span>
</span><span id="Benchmark-569"><a href="#Benchmark-569"><span class="linenos">569</span></a><span class="sd">        dataframe, and saves it under `output_dir_path/benchmark.csv`.</span>
</span><span id="Benchmark-570"><a href="#Benchmark-570"><span class="linenos">570</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-571"><a href="#Benchmark-571"><span class="linenos">571</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Consolidating statistics&quot;</span><span class="p">)</span>
</span><span id="Benchmark-572"><a href="#Benchmark-572"><span class="linenos">572</span></a>        <span class="n">all_df</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Benchmark-573"><a href="#Benchmark-573"><span class="linenos">573</span></a>        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">():</span>
</span><span id="Benchmark-574"><a href="#Benchmark-574"><span class="linenos">574</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">result_filename</span><span class="p">()</span>
</span><span id="Benchmark-575"><a href="#Benchmark-575"><span class="linenos">575</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="Benchmark-576"><a href="#Benchmark-576"><span class="linenos">576</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="Benchmark-577"><a href="#Benchmark-577"><span class="linenos">577</span></a>                    <span class="s2">&quot;Statistic file </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair &quot;</span>
</span><span id="Benchmark-578"><a href="#Benchmark-578"><span class="linenos">578</span></a>                    <span class="s2">&quot;most likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="Benchmark-579"><a href="#Benchmark-579"><span class="linenos">579</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="Benchmark-580"><a href="#Benchmark-580"><span class="linenos">580</span></a>                <span class="p">)</span>
</span><span id="Benchmark-581"><a href="#Benchmark-581"><span class="linenos">581</span></a>                <span class="k">continue</span>
</span><span id="Benchmark-582"><a href="#Benchmark-582"><span class="linenos">582</span></a>            <span class="n">all_df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="Benchmark-583"><a href="#Benchmark-583"><span class="linenos">583</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_df</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Benchmark-584"><a href="#Benchmark-584"><span class="linenos">584</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_timedelta</span><span class="p">(</span>
</span><span id="Benchmark-585"><a href="#Benchmark-585"><span class="linenos">585</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span>
</span><span id="Benchmark-586"><a href="#Benchmark-586"><span class="linenos">586</span></a>        <span class="p">)</span>
</span><span id="Benchmark-587"><a href="#Benchmark-587"><span class="linenos">587</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span>
</span><span id="Benchmark-588"><a href="#Benchmark-588"><span class="linenos">588</span></a>            <span class="p">{</span>
</span><span id="Benchmark-589"><a href="#Benchmark-589"><span class="linenos">589</span></a>                <span class="s2">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
</span><span id="Benchmark-590"><a href="#Benchmark-590"><span class="linenos">590</span></a>                <span class="s2">&quot;n_gen&quot;</span><span class="p">:</span> <span class="s2">&quot;uint32&quot;</span><span class="p">,</span>
</span><span id="Benchmark-591"><a href="#Benchmark-591"><span class="linenos">591</span></a>                <span class="s2">&quot;n_run&quot;</span><span class="p">:</span> <span class="s2">&quot;uint32&quot;</span><span class="p">,</span>
</span><span id="Benchmark-592"><a href="#Benchmark-592"><span class="linenos">592</span></a>                <span class="s2">&quot;problem&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
</span><span id="Benchmark-593"><a href="#Benchmark-593"><span class="linenos">593</span></a>            <span class="p">}</span>
</span><span id="Benchmark-594"><a href="#Benchmark-594"><span class="linenos">594</span></a>        <span class="p">)</span>
</span><span id="Benchmark-595"><a href="#Benchmark-595"><span class="linenos">595</span></a>
</span><span id="Benchmark-596"><a href="#Benchmark-596"><span class="linenos">596</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Consolidating performance indicators&quot;</span><span class="p">)</span>
</span><span id="Benchmark-597"><a href="#Benchmark-597"><span class="linenos">597</span></a>        <span class="n">all_df</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Benchmark-598"><a href="#Benchmark-598"><span class="linenos">598</span></a>        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">():</span>
</span><span id="Benchmark-599"><a href="#Benchmark-599"><span class="linenos">599</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pi_filename</span><span class="p">()</span>
</span><span id="Benchmark-600"><a href="#Benchmark-600"><span class="linenos">600</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="Benchmark-601"><a href="#Benchmark-601"><span class="linenos">601</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="Benchmark-602"><a href="#Benchmark-602"><span class="linenos">602</span></a>                    <span class="s2">&quot;PI file </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair most &quot;</span>
</span><span id="Benchmark-603"><a href="#Benchmark-603"><span class="linenos">603</span></a>                    <span class="s2">&quot;likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="Benchmark-604"><a href="#Benchmark-604"><span class="linenos">604</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="Benchmark-605"><a href="#Benchmark-605"><span class="linenos">605</span></a>                <span class="p">)</span>
</span><span id="Benchmark-606"><a href="#Benchmark-606"><span class="linenos">606</span></a>                <span class="k">continue</span>
</span><span id="Benchmark-607"><a href="#Benchmark-607"><span class="linenos">607</span></a>            <span class="n">all_df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="Benchmark-608"><a href="#Benchmark-608"><span class="linenos">608</span></a>
</span><span id="Benchmark-609"><a href="#Benchmark-609"><span class="linenos">609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
</span><span id="Benchmark-610"><a href="#Benchmark-610"><span class="linenos">610</span></a>            <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_df</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="Benchmark-611"><a href="#Benchmark-611"><span class="linenos">611</span></a>            <span class="n">how</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">,</span>
</span><span id="Benchmark-612"><a href="#Benchmark-612"><span class="linenos">612</span></a>            <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">,</span> <span class="s2">&quot;problem&quot;</span><span class="p">,</span> <span class="s2">&quot;n_gen&quot;</span><span class="p">,</span> <span class="s2">&quot;n_run&quot;</span><span class="p">],</span>
</span><span id="Benchmark-613"><a href="#Benchmark-613"><span class="linenos">613</span></a>        <span class="p">)</span>
</span><span id="Benchmark-614"><a href="#Benchmark-614"><span class="linenos">614</span></a>
</span><span id="Benchmark-615"><a href="#Benchmark-615"><span class="linenos">615</span></a>        <span class="c1"># ???</span>
</span><span id="Benchmark-616"><a href="#Benchmark-616"><span class="linenos">616</span></a>        <span class="k">if</span> <span class="s2">&quot;Unnamed: 0&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">:</span>
</span><span id="Benchmark-617"><a href="#Benchmark-617"><span class="linenos">617</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;Unnamed: 0&quot;</span><span class="p">]</span>
</span><span id="Benchmark-618"><a href="#Benchmark-618"><span class="linenos">618</span></a>
</span><span id="Benchmark-619"><a href="#Benchmark-619"><span class="linenos">619</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="s2">&quot;benchmark.csv&quot;</span>
</span><span id="Benchmark-620"><a href="#Benchmark-620"><span class="linenos">620</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Writing results to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Benchmark-621"><a href="#Benchmark-621"><span class="linenos">621</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dump_results</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Benchmark-622"><a href="#Benchmark-622"><span class="linenos">622</span></a>
</span><span id="Benchmark-623"><a href="#Benchmark-623"><span class="linenos">623</span></a>    <span class="k">def</span> <span class="nf">dump_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Benchmark-624"><a href="#Benchmark-624"><span class="linenos">624</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-625"><a href="#Benchmark-625"><span class="linenos">625</span></a><span class="sd">        Dumps the internal `_result` dataframe.</span>
</span><span id="Benchmark-626"><a href="#Benchmark-626"><span class="linenos">626</span></a>
</span><span id="Benchmark-627"><a href="#Benchmark-627"><span class="linenos">627</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark-628"><a href="#Benchmark-628"><span class="linenos">628</span></a><span class="sd">            path (Union[Path, str]): Path to the output file.</span>
</span><span id="Benchmark-629"><a href="#Benchmark-629"><span class="linenos">629</span></a><span class="sd">            fmt (str): Text or binary format supported by pandas, see</span>
</span><span id="Benchmark-630"><a href="#Benchmark-630"><span class="linenos">630</span></a><span class="sd">                `here &lt;https://pandas.pydata.org/docs/user_guide/io.html&gt;`_.</span>
</span><span id="Benchmark-631"><a href="#Benchmark-631"><span class="linenos">631</span></a><span class="sd">                CSV by default.</span>
</span><span id="Benchmark-632"><a href="#Benchmark-632"><span class="linenos">632</span></a><span class="sd">            kwargs: Will be passed on the `pandas.DataFrame.to_&lt;fmt&gt;` method.</span>
</span><span id="Benchmark-633"><a href="#Benchmark-633"><span class="linenos">633</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-634"><a href="#Benchmark-634"><span class="linenos">634</span></a>        <span class="n">saver</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Benchmark-635"><a href="#Benchmark-635"><span class="linenos">635</span></a>            <span class="s2">&quot;csv&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_csv</span><span class="p">,</span>
</span><span id="Benchmark-636"><a href="#Benchmark-636"><span class="linenos">636</span></a>            <span class="s2">&quot;excel&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_excel</span><span class="p">,</span>
</span><span id="Benchmark-637"><a href="#Benchmark-637"><span class="linenos">637</span></a>            <span class="s2">&quot;feather&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_feather</span><span class="p">,</span>
</span><span id="Benchmark-638"><a href="#Benchmark-638"><span class="linenos">638</span></a>            <span class="s2">&quot;gbq&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">,</span>
</span><span id="Benchmark-639"><a href="#Benchmark-639"><span class="linenos">639</span></a>            <span class="s2">&quot;hdf&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">,</span>
</span><span id="Benchmark-640"><a href="#Benchmark-640"><span class="linenos">640</span></a>            <span class="s2">&quot;html&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_html</span><span class="p">,</span>
</span><span id="Benchmark-641"><a href="#Benchmark-641"><span class="linenos">641</span></a>            <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_json</span><span class="p">,</span>
</span><span id="Benchmark-642"><a href="#Benchmark-642"><span class="linenos">642</span></a>            <span class="s2">&quot;parquet&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">,</span>
</span><span id="Benchmark-643"><a href="#Benchmark-643"><span class="linenos">643</span></a>            <span class="s2">&quot;pickle&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">,</span>
</span><span id="Benchmark-644"><a href="#Benchmark-644"><span class="linenos">644</span></a>        <span class="p">}[</span><span class="n">fmt</span><span class="p">]</span>
</span><span id="Benchmark-645"><a href="#Benchmark-645"><span class="linenos">645</span></a>        <span class="n">saver</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Benchmark-646"><a href="#Benchmark-646"><span class="linenos">646</span></a>
</span><span id="Benchmark-647"><a href="#Benchmark-647"><span class="linenos">647</span></a>    <span class="k">def</span> <span class="nf">final_results</span><span class="p">(</span>
</span><span id="Benchmark-648"><a href="#Benchmark-648"><span class="linenos">648</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Benchmark-649"><a href="#Benchmark-649"><span class="linenos">649</span></a>        <span class="n">timedeltas_to_microseconds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark-650"><a href="#Benchmark-650"><span class="linenos">650</span></a>        <span class="n">reset_index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark-651"><a href="#Benchmark-651"><span class="linenos">651</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="Benchmark-652"><a href="#Benchmark-652"><span class="linenos">652</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-653"><a href="#Benchmark-653"><span class="linenos">653</span></a><span class="sd">        Returns a dataframe containing the final row of each</span>
</span><span id="Benchmark-654"><a href="#Benchmark-654"><span class="linenos">654</span></a><span class="sd">        algorithm/problem/n_run triple, i.e. the final record of each run of</span>
</span><span id="Benchmark-655"><a href="#Benchmark-655"><span class="linenos">655</span></a><span class="sd">        the benchmark.</span>
</span><span id="Benchmark-656"><a href="#Benchmark-656"><span class="linenos">656</span></a>
</span><span id="Benchmark-657"><a href="#Benchmark-657"><span class="linenos">657</span></a><span class="sd">        If the `reset_index` argument set to `False`, the resulting dataframe</span>
</span><span id="Benchmark-658"><a href="#Benchmark-658"><span class="linenos">658</span></a><span class="sd">        will have a multiindex given by the (algorithm, problem, n_run) tuples,</span>
</span><span id="Benchmark-659"><a href="#Benchmark-659"><span class="linenos">659</span></a><span class="sd">        e.g.</span>
</span><span id="Benchmark-660"><a href="#Benchmark-660"><span class="linenos">660</span></a>
</span><span id="Benchmark-661"><a href="#Benchmark-661"><span class="linenos">661</span></a><span class="sd">                                     n_gen  timedelta   perf_gd  ...</span>
</span><span id="Benchmark-662"><a href="#Benchmark-662"><span class="linenos">662</span></a><span class="sd">            algorithm problem n_run                              ...</span>
</span><span id="Benchmark-663"><a href="#Benchmark-663"><span class="linenos">663</span></a><span class="sd">            nsga2     bnh     1        155     886181  0.477980  ...</span>
</span><span id="Benchmark-664"><a href="#Benchmark-664"><span class="linenos">664</span></a><span class="sd">                              2        200      29909  0.480764  ...</span>
</span><span id="Benchmark-665"><a href="#Benchmark-665"><span class="linenos">665</span></a><span class="sd">                      zdt1    1        400     752818  0.191490  ...</span>
</span><span id="Benchmark-666"><a href="#Benchmark-666"><span class="linenos">666</span></a><span class="sd">                              2        305     979112  0.260930  ...</span>
</span><span id="Benchmark-667"><a href="#Benchmark-667"><span class="linenos">667</span></a>
</span><span id="Benchmark-668"><a href="#Benchmark-668"><span class="linenos">668</span></a><span class="sd">        (note tha the `timedelta` column has been converted to microseconds,</span>
</span><span id="Benchmark-669"><a href="#Benchmark-669"><span class="linenos">669</span></a><span class="sd">        see the `timedeltas_to_microseconds` argument below). If `reset_index`</span>
</span><span id="Benchmark-670"><a href="#Benchmark-670"><span class="linenos">670</span></a><span class="sd">        is set to `True` (the default), then the index is reset, giving</span>
</span><span id="Benchmark-671"><a href="#Benchmark-671"><span class="linenos">671</span></a><span class="sd">        something like this:</span>
</span><span id="Benchmark-672"><a href="#Benchmark-672"><span class="linenos">672</span></a>
</span><span id="Benchmark-673"><a href="#Benchmark-673"><span class="linenos">673</span></a><span class="sd">              algorithm problem  n_run  n_gen  timedelta   perf_gd  ...</span>
</span><span id="Benchmark-674"><a href="#Benchmark-674"><span class="linenos">674</span></a><span class="sd">            0     nsga2     bnh      1    155     886181  0.477980  ...</span>
</span><span id="Benchmark-675"><a href="#Benchmark-675"><span class="linenos">675</span></a><span class="sd">            1     nsga2     bnh      2    200      29909  0.480764  ...</span>
</span><span id="Benchmark-676"><a href="#Benchmark-676"><span class="linenos">676</span></a><span class="sd">            2     nsga2    zdt1      1    400     752818  0.191490  ...</span>
</span><span id="Benchmark-677"><a href="#Benchmark-677"><span class="linenos">677</span></a><span class="sd">            3     nsga2    zdt1      2    305     979112  0.260930  ...</span>
</span><span id="Benchmark-678"><a href="#Benchmark-678"><span class="linenos">678</span></a>
</span><span id="Benchmark-679"><a href="#Benchmark-679"><span class="linenos">679</span></a><span class="sd">        This form is easier to plot.</span>
</span><span id="Benchmark-680"><a href="#Benchmark-680"><span class="linenos">680</span></a>
</span><span id="Benchmark-681"><a href="#Benchmark-681"><span class="linenos">681</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark-682"><a href="#Benchmark-682"><span class="linenos">682</span></a><span class="sd">            reset_index (bool): Wether to reset the index. Defaults to</span>
</span><span id="Benchmark-683"><a href="#Benchmark-683"><span class="linenos">683</span></a><span class="sd">                `True`.</span>
</span><span id="Benchmark-684"><a href="#Benchmark-684"><span class="linenos">684</span></a><span class="sd">            timedeltas_to_microseconds (bool): Wether to convert the</span>
</span><span id="Benchmark-685"><a href="#Benchmark-685"><span class="linenos">685</span></a><span class="sd">                timedeltas column to microseconds. Defaults to `True`.</span>
</span><span id="Benchmark-686"><a href="#Benchmark-686"><span class="linenos">686</span></a>
</span><span id="Benchmark-687"><a href="#Benchmark-687"><span class="linenos">687</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-688"><a href="#Benchmark-688"><span class="linenos">688</span></a>        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;algorithm&quot;</span><span class="p">,</span> <span class="s2">&quot;problem&quot;</span><span class="p">,</span> <span class="s2">&quot;n_run&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
</span><span id="Benchmark-689"><a href="#Benchmark-689"><span class="linenos">689</span></a>        <span class="k">if</span> <span class="n">timedeltas_to_microseconds</span><span class="p">:</span>
</span><span id="Benchmark-690"><a href="#Benchmark-690"><span class="linenos">690</span></a>            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">microseconds</span>
</span><span id="Benchmark-691"><a href="#Benchmark-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="k">if</span> <span class="n">reset_index</span> <span class="k">else</span> <span class="n">df</span>
</span><span id="Benchmark-692"><a href="#Benchmark-692"><span class="linenos">692</span></a>
</span><span id="Benchmark-693"><a href="#Benchmark-693"><span class="linenos">693</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="Benchmark-694"><a href="#Benchmark-694"><span class="linenos">694</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Benchmark-695"><a href="#Benchmark-695"><span class="linenos">695</span></a>        <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="Benchmark-696"><a href="#Benchmark-696"><span class="linenos">696</span></a>        <span class="n">n_post_processing_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="Benchmark-697"><a href="#Benchmark-697"><span class="linenos">697</span></a>        <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">,</span>
</span><span id="Benchmark-698"><a href="#Benchmark-698"><span class="linenos">698</span></a>    <span class="p">):</span>
</span><span id="Benchmark-699"><a href="#Benchmark-699"><span class="linenos">699</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark-700"><a href="#Benchmark-700"><span class="linenos">700</span></a><span class="sd">        Runs the benchmark sequentially. Makes your laptop go brr. The</span>
</span><span id="Benchmark-701"><a href="#Benchmark-701"><span class="linenos">701</span></a><span class="sd">        histories of all problems are progressively dumped in the specified</span>
</span><span id="Benchmark-702"><a href="#Benchmark-702"><span class="linenos">702</span></a><span class="sd">        output directory as the benchmark run. At the end, the benchmark</span>
</span><span id="Benchmark-703"><a href="#Benchmark-703"><span class="linenos">703</span></a><span class="sd">        results are dumped in `output_dir_path/benchmark.csv`.</span>
</span><span id="Benchmark-704"><a href="#Benchmark-704"><span class="linenos">704</span></a>
</span><span id="Benchmark-705"><a href="#Benchmark-705"><span class="linenos">705</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark-706"><a href="#Benchmark-706"><span class="linenos">706</span></a><span class="sd">            n_jobs (int): Number of processes to use. See the `joblib.Parallel`_</span>
</span><span id="Benchmark-707"><a href="#Benchmark-707"><span class="linenos">707</span></a><span class="sd">                documentation. Defaults to `-1`, i.e. all CPUs are used.</span>
</span><span id="Benchmark-708"><a href="#Benchmark-708"><span class="linenos">708</span></a><span class="sd">            n_post_processing_jobs (int): Number of processes to use for post</span>
</span><span id="Benchmark-709"><a href="#Benchmark-709"><span class="linenos">709</span></a><span class="sd">                processing tasks (computing global Pareto populations and</span>
</span><span id="Benchmark-710"><a href="#Benchmark-710"><span class="linenos">710</span></a><span class="sd">                performance indicators). These are memory-intensive tasks.</span>
</span><span id="Benchmark-711"><a href="#Benchmark-711"><span class="linenos">711</span></a><span class="sd">                Defaults to `2`.</span>
</span><span id="Benchmark-712"><a href="#Benchmark-712"><span class="linenos">712</span></a><span class="sd">            joblib_kwargs (dict): Additional kwargs to pass on to the</span>
</span><span id="Benchmark-713"><a href="#Benchmark-713"><span class="linenos">713</span></a><span class="sd">                `joblib.Parallel`_ instance.</span>
</span><span id="Benchmark-714"><a href="#Benchmark-714"><span class="linenos">714</span></a>
</span><span id="Benchmark-715"><a href="#Benchmark-715"><span class="linenos">715</span></a><span class="sd">        .. _joblib.Parallel:</span>
</span><span id="Benchmark-716"><a href="#Benchmark-716"><span class="linenos">716</span></a><span class="sd">            https://joblib.readthedocs.io/en/latest/generated/joblib.Parallel.html</span>
</span><span id="Benchmark-717"><a href="#Benchmark-717"><span class="linenos">717</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark-718"><a href="#Benchmark-718"><span class="linenos">718</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">):</span>
</span><span id="Benchmark-719"><a href="#Benchmark-719"><span class="linenos">719</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">)</span>
</span><span id="Benchmark-720"><a href="#Benchmark-720"><span class="linenos">720</span></a>        <span class="n">pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">()</span>
</span><span id="Benchmark-721"><a href="#Benchmark-721"><span class="linenos">721</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="Benchmark-722"><a href="#Benchmark-722"><span class="linenos">722</span></a>        <span class="n">current_round</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Benchmark-723"><a href="#Benchmark-723"><span class="linenos">723</span></a>        <span class="k">while</span> <span class="p">(</span>
</span><span id="Benchmark-724"><a href="#Benchmark-724"><span class="linenos">724</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">current_round</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span>
</span><span id="Benchmark-725"><a href="#Benchmark-725"><span class="linenos">725</span></a>        <span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="Benchmark-726"><a href="#Benchmark-726"><span class="linenos">726</span></a>            <span class="n">executor</span><span class="p">(</span>
</span><span id="Benchmark-727"><a href="#Benchmark-727"><span class="linenos">727</span></a>                <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_run_pair</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark-728"><a href="#Benchmark-728"><span class="linenos">728</span></a>                <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span>
</span><span id="Benchmark-729"><a href="#Benchmark-729"><span class="linenos">729</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark-730"><a href="#Benchmark-730"><span class="linenos">730</span></a>            <span class="p">)</span>
</span><span id="Benchmark-731"><a href="#Benchmark-731"><span class="linenos">731</span></a>            <span class="n">current_round</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Benchmark-732"><a href="#Benchmark-732"><span class="linenos">732</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="Benchmark-733"><a href="#Benchmark-733"><span class="linenos">733</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="Benchmark-734"><a href="#Benchmark-734"><span class="linenos">734</span></a>                <span class="s2">&quot;Benchmark finished, but some pairs could not be run &quot;</span>
</span><span id="Benchmark-735"><a href="#Benchmark-735"><span class="linenos">735</span></a>                <span class="s2">&quot;successfully within the retry budget (</span><span class="si">%d</span><span class="s2">):&quot;</span><span class="p">,</span>
</span><span id="Benchmark-736"><a href="#Benchmark-736"><span class="linenos">736</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span><span class="p">,</span>
</span><span id="Benchmark-737"><a href="#Benchmark-737"><span class="linenos">737</span></a>            <span class="p">)</span>
</span><span id="Benchmark-738"><a href="#Benchmark-738"><span class="linenos">738</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="Benchmark-739"><a href="#Benchmark-739"><span class="linenos">739</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;    [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark-740"><a href="#Benchmark-740"><span class="linenos">740</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_global_pareto_populations</span><span class="p">(</span>
</span><span id="Benchmark-741"><a href="#Benchmark-741"><span class="linenos">741</span></a>            <span class="n">n_post_processing_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark-742"><a href="#Benchmark-742"><span class="linenos">742</span></a>        <span class="p">)</span>
</span><span id="Benchmark-743"><a href="#Benchmark-743"><span class="linenos">743</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_performance_indicators</span><span class="p">(</span>
</span><span id="Benchmark-744"><a href="#Benchmark-744"><span class="linenos">744</span></a>            <span class="n">n_post_processing_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark-745"><a href="#Benchmark-745"><span class="linenos">745</span></a>        <span class="p">)</span>
</span><span id="Benchmark-746"><a href="#Benchmark-746"><span class="linenos">746</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consolidate</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>A benchmark is constructed with a list of problems and pymoo algorithms
descriptions, and run each algorithm against each problem, storing all
histories for later analysis.</p>
</div>


                            <div id="Benchmark.__init__" class="classattr">
                                        <input id="Benchmark.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Benchmark</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">output_dir_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">problems</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>,</span><span class="param">	<span class="n">algorithms</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>,</span><span class="param">	<span class="n">n_runs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">dump_histories</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">performance_indicators</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">max_retry</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span></span>)</span>

                <label class="view-source-button" for="Benchmark.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark.__init__-128"><a href="#Benchmark.__init__-128"><span class="linenos">128</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Benchmark.__init__-129"><a href="#Benchmark.__init__-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Benchmark.__init__-130"><a href="#Benchmark.__init__-130"><span class="linenos">130</span></a>        <span class="n">output_dir_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
</span><span id="Benchmark.__init__-131"><a href="#Benchmark.__init__-131"><span class="linenos">131</span></a>        <span class="n">problems</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span>
</span><span id="Benchmark.__init__-132"><a href="#Benchmark.__init__-132"><span class="linenos">132</span></a>        <span class="n">algorithms</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span>
</span><span id="Benchmark.__init__-133"><a href="#Benchmark.__init__-133"><span class="linenos">133</span></a>        <span class="n">n_runs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="Benchmark.__init__-134"><a href="#Benchmark.__init__-134"><span class="linenos">134</span></a>        <span class="n">dump_histories</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark.__init__-135"><a href="#Benchmark.__init__-135"><span class="linenos">135</span></a>        <span class="n">performance_indicators</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Benchmark.__init__-136"><a href="#Benchmark.__init__-136"><span class="linenos">136</span></a>        <span class="n">max_retry</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="Benchmark.__init__-137"><a href="#Benchmark.__init__-137"><span class="linenos">137</span></a>    <span class="p">):</span>
</span><span id="Benchmark.__init__-138"><a href="#Benchmark.__init__-138"><span class="linenos">138</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark.__init__-139"><a href="#Benchmark.__init__-139"><span class="linenos">139</span></a><span class="sd">        Constructor. The set of problems to be benchmarked is represented by a</span>
</span><span id="Benchmark.__init__-140"><a href="#Benchmark.__init__-140"><span class="linenos">140</span></a><span class="sd">        dictionary with the following structure::</span>
</span><span id="Benchmark.__init__-141"><a href="#Benchmark.__init__-141"><span class="linenos">141</span></a>
</span><span id="Benchmark.__init__-142"><a href="#Benchmark.__init__-142"><span class="linenos">142</span></a><span class="sd">            problems = {</span>
</span><span id="Benchmark.__init__-143"><a href="#Benchmark.__init__-143"><span class="linenos">143</span></a><span class="sd">                &lt;problem_name&gt;: &lt;problem_description&gt;,</span>
</span><span id="Benchmark.__init__-144"><a href="#Benchmark.__init__-144"><span class="linenos">144</span></a><span class="sd">                &lt;problem_name&gt;: &lt;problem_description&gt;,</span>
</span><span id="Benchmark.__init__-145"><a href="#Benchmark.__init__-145"><span class="linenos">145</span></a><span class="sd">            }</span>
</span><span id="Benchmark.__init__-146"><a href="#Benchmark.__init__-146"><span class="linenos">146</span></a>
</span><span id="Benchmark.__init__-147"><a href="#Benchmark.__init__-147"><span class="linenos">147</span></a><span class="sd">        where `&lt;problem_name&gt;` is a user-defined string (but stay reasonable</span>
</span><span id="Benchmark.__init__-148"><a href="#Benchmark.__init__-148"><span class="linenos">148</span></a><span class="sd">        since it may be used in filenames), and `&lt;problem_description&gt;` is a</span>
</span><span id="Benchmark.__init__-149"><a href="#Benchmark.__init__-149"><span class="linenos">149</span></a><span class="sd">        dictionary with the following keys:</span>
</span><span id="Benchmark.__init__-150"><a href="#Benchmark.__init__-150"><span class="linenos">150</span></a><span class="sd">        * `df_n_evals` (int, optional): see the explanation of the `df`</span>
</span><span id="Benchmark.__init__-151"><a href="#Benchmark.__init__-151"><span class="linenos">151</span></a><span class="sd">            performance indicator below; defaults to `1`;</span>
</span><span id="Benchmark.__init__-152"><a href="#Benchmark.__init__-152"><span class="linenos">152</span></a><span class="sd">        * `evaluator` (optional): an algorithm evaluator object that will be</span>
</span><span id="Benchmark.__init__-153"><a href="#Benchmark.__init__-153"><span class="linenos">153</span></a><span class="sd">            applied to every algorithm that run on this problem; if an</span>
</span><span id="Benchmark.__init__-154"><a href="#Benchmark.__init__-154"><span class="linenos">154</span></a><span class="sd">            algorithm already has an evaluator attached to it (see</span>
</span><span id="Benchmark.__init__-155"><a href="#Benchmark.__init__-155"><span class="linenos">155</span></a><span class="sd">            `&lt;algorithm_description&gt;` below), the evaluator attached to this</span>
</span><span id="Benchmark.__init__-156"><a href="#Benchmark.__init__-156"><span class="linenos">156</span></a><span class="sd">            problem takes precedence; note that the evaluator is deepcopied for</span>
</span><span id="Benchmark.__init__-157"><a href="#Benchmark.__init__-157"><span class="linenos">157</span></a><span class="sd">            every run of `minimize`;</span>
</span><span id="Benchmark.__init__-158"><a href="#Benchmark.__init__-158"><span class="linenos">158</span></a><span class="sd">        * `hv_ref_point` (optional, `np.ndarray`): a reference point for</span>
</span><span id="Benchmark.__init__-159"><a href="#Benchmark.__init__-159"><span class="linenos">159</span></a><span class="sd">            computing hypervolume performance, see `performance_indicators`</span>
</span><span id="Benchmark.__init__-160"><a href="#Benchmark.__init__-160"><span class="linenos">160</span></a><span class="sd">            argument;</span>
</span><span id="Benchmark.__init__-161"><a href="#Benchmark.__init__-161"><span class="linenos">161</span></a><span class="sd">        * `pareto_front` (optional, `np.ndarray`): a Pareto front subset;</span>
</span><span id="Benchmark.__init__-162"><a href="#Benchmark.__init__-162"><span class="linenos">162</span></a><span class="sd">        * `problem`: a `WrappedProblem` instance.</span>
</span><span id="Benchmark.__init__-163"><a href="#Benchmark.__init__-163"><span class="linenos">163</span></a>
</span><span id="Benchmark.__init__-164"><a href="#Benchmark.__init__-164"><span class="linenos">164</span></a><span class="sd">        The set of algorithms to be used is specified similarly::</span>
</span><span id="Benchmark.__init__-165"><a href="#Benchmark.__init__-165"><span class="linenos">165</span></a>
</span><span id="Benchmark.__init__-166"><a href="#Benchmark.__init__-166"><span class="linenos">166</span></a><span class="sd">            algorithms = {</span>
</span><span id="Benchmark.__init__-167"><a href="#Benchmark.__init__-167"><span class="linenos">167</span></a><span class="sd">                &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,</span>
</span><span id="Benchmark.__init__-168"><a href="#Benchmark.__init__-168"><span class="linenos">168</span></a><span class="sd">                &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,</span>
</span><span id="Benchmark.__init__-169"><a href="#Benchmark.__init__-169"><span class="linenos">169</span></a><span class="sd">            }</span>
</span><span id="Benchmark.__init__-170"><a href="#Benchmark.__init__-170"><span class="linenos">170</span></a>
</span><span id="Benchmark.__init__-171"><a href="#Benchmark.__init__-171"><span class="linenos">171</span></a><span class="sd">        where `&lt;algorithm_name&gt;` is a user-defined string (but stay reasonable</span>
</span><span id="Benchmark.__init__-172"><a href="#Benchmark.__init__-172"><span class="linenos">172</span></a><span class="sd">        since it may be used in filenames), and `&lt;algorithm_description&gt;` is a</span>
</span><span id="Benchmark.__init__-173"><a href="#Benchmark.__init__-173"><span class="linenos">173</span></a><span class="sd">        dictionary with the following keys:</span>
</span><span id="Benchmark.__init__-174"><a href="#Benchmark.__init__-174"><span class="linenos">174</span></a><span class="sd">        * `algorithm`: a pymoo `Algorithm` object; note that it is deepcopied</span>
</span><span id="Benchmark.__init__-175"><a href="#Benchmark.__init__-175"><span class="linenos">175</span></a><span class="sd">            for every run of `minimize`;</span>
</span><span id="Benchmark.__init__-176"><a href="#Benchmark.__init__-176"><span class="linenos">176</span></a><span class="sd">        * `display` (optional): a custom `pymoo.util.display.Display` object</span>
</span><span id="Benchmark.__init__-177"><a href="#Benchmark.__init__-177"><span class="linenos">177</span></a><span class="sd">            for customization purposes;</span>
</span><span id="Benchmark.__init__-178"><a href="#Benchmark.__init__-178"><span class="linenos">178</span></a><span class="sd">        * `evaluator` (optional): an algorithm evaluator object; note that it</span>
</span><span id="Benchmark.__init__-179"><a href="#Benchmark.__init__-179"><span class="linenos">179</span></a><span class="sd">            is deepcopied for every run of `minimize`;</span>
</span><span id="Benchmark.__init__-180"><a href="#Benchmark.__init__-180"><span class="linenos">180</span></a><span class="sd">        * `return_least_infeasible` (optional, bool): if the algorithm cannot</span>
</span><span id="Benchmark.__init__-181"><a href="#Benchmark.__init__-181"><span class="linenos">181</span></a><span class="sd">            find a feasable solution, wether the least infeasable solution</span>
</span><span id="Benchmark.__init__-182"><a href="#Benchmark.__init__-182"><span class="linenos">182</span></a><span class="sd">            should still be returned; defaults to `False`;</span>
</span><span id="Benchmark.__init__-183"><a href="#Benchmark.__init__-183"><span class="linenos">183</span></a><span class="sd">        * `seed` (optional, int): a seed;</span>
</span><span id="Benchmark.__init__-184"><a href="#Benchmark.__init__-184"><span class="linenos">184</span></a><span class="sd">        * `termination` (optional): a pymoo termination criterion; note that it</span>
</span><span id="Benchmark.__init__-185"><a href="#Benchmark.__init__-185"><span class="linenos">185</span></a><span class="sd">            is deepcopied for every run of `minimize`;</span>
</span><span id="Benchmark.__init__-186"><a href="#Benchmark.__init__-186"><span class="linenos">186</span></a><span class="sd">        * `verbose` (optional, bool): wether outputs should be printed during</span>
</span><span id="Benchmark.__init__-187"><a href="#Benchmark.__init__-187"><span class="linenos">187</span></a><span class="sd">            during the execution of the algorithm; defaults to `False`.</span>
</span><span id="Benchmark.__init__-188"><a href="#Benchmark.__init__-188"><span class="linenos">188</span></a>
</span><span id="Benchmark.__init__-189"><a href="#Benchmark.__init__-189"><span class="linenos">189</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark.__init__-190"><a href="#Benchmark.__init__-190"><span class="linenos">190</span></a><span class="sd">            algorithms (Dict[str, dict]): Dict of all algorithms to be</span>
</span><span id="Benchmark.__init__-191"><a href="#Benchmark.__init__-191"><span class="linenos">191</span></a><span class="sd">                benchmarked.</span>
</span><span id="Benchmark.__init__-192"><a href="#Benchmark.__init__-192"><span class="linenos">192</span></a><span class="sd">            dump_histories (bool): Wether the history of each</span>
</span><span id="Benchmark.__init__-193"><a href="#Benchmark.__init__-193"><span class="linenos">193</span></a><span class="sd">                `WrappedProblem` involved in this benchmark should be written</span>
</span><span id="Benchmark.__init__-194"><a href="#Benchmark.__init__-194"><span class="linenos">194</span></a><span class="sd">                to disk. Defaults to `True`.</span>
</span><span id="Benchmark.__init__-195"><a href="#Benchmark.__init__-195"><span class="linenos">195</span></a><span class="sd">            max_retries (int): Maximum number of attempts to run a given</span>
</span><span id="Benchmark.__init__-196"><a href="#Benchmark.__init__-196"><span class="linenos">196</span></a><span class="sd">                problem-algorithm pair before giving up. Set it to `-1` to</span>
</span><span id="Benchmark.__init__-197"><a href="#Benchmark.__init__-197"><span class="linenos">197</span></a><span class="sd">                retry indefinitely.</span>
</span><span id="Benchmark.__init__-198"><a href="#Benchmark.__init__-198"><span class="linenos">198</span></a><span class="sd">            n_runs (int): Number of times to run a given problem/algorithm</span>
</span><span id="Benchmark.__init__-199"><a href="#Benchmark.__init__-199"><span class="linenos">199</span></a><span class="sd">                pair.</span>
</span><span id="Benchmark.__init__-200"><a href="#Benchmark.__init__-200"><span class="linenos">200</span></a><span class="sd">            problems (Dict[str, dict]): Dict of all problems to be benchmarked.</span>
</span><span id="Benchmark.__init__-201"><a href="#Benchmark.__init__-201"><span class="linenos">201</span></a><span class="sd">            performance_indicators (Optional[List[str]]): List of perfomance</span>
</span><span id="Benchmark.__init__-202"><a href="#Benchmark.__init__-202"><span class="linenos">202</span></a><span class="sd">                indicators to be calculated and included in the result</span>
</span><span id="Benchmark.__init__-203"><a href="#Benchmark.__init__-203"><span class="linenos">203</span></a><span class="sd">                dataframe (see `Benchmark.final_results`). Supported indicators</span>
</span><span id="Benchmark.__init__-204"><a href="#Benchmark.__init__-204"><span class="linenos">204</span></a><span class="sd">                are</span>
</span><span id="Benchmark.__init__-205"><a href="#Benchmark.__init__-205"><span class="linenos">205</span></a><span class="sd">                * `df`: ΔF metric, see the documentation of</span>
</span><span id="Benchmark.__init__-206"><a href="#Benchmark.__init__-206"><span class="linenos">206</span></a><span class="sd">                    `nmoo.indicators.delta_f.DeltaF`;</span>
</span><span id="Benchmark.__init__-207"><a href="#Benchmark.__init__-207"><span class="linenos">207</span></a><span class="sd">                * `gd`: [generational distance](https://pymoo.org/misc/indicators.html#Generational-Distance-(GD)),</span>
</span><span id="Benchmark.__init__-208"><a href="#Benchmark.__init__-208"><span class="linenos">208</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark.__init__-209"><a href="#Benchmark.__init__-209"><span class="linenos">209</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark.__init__-210"><a href="#Benchmark.__init__-210"><span class="linenos">210</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark.__init__-211"><a href="#Benchmark.__init__-211"><span class="linenos">211</span></a><span class="sd">                * `gd+`: [generational distance plus](https://pymoo.org/misc/indicators.html#Generational-Distance-Plus-(GD+)),</span>
</span><span id="Benchmark.__init__-212"><a href="#Benchmark.__init__-212"><span class="linenos">212</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark.__init__-213"><a href="#Benchmark.__init__-213"><span class="linenos">213</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark.__init__-214"><a href="#Benchmark.__init__-214"><span class="linenos">214</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark.__init__-215"><a href="#Benchmark.__init__-215"><span class="linenos">215</span></a><span class="sd">                * `hv`: [hypervolume](https://pymoo.org/misc/indicators.html#Hypervolume),</span>
</span><span id="Benchmark.__init__-216"><a href="#Benchmark.__init__-216"><span class="linenos">216</span></a><span class="sd">                    requires `hv_ref_point` to be set in the problem</span>
</span><span id="Benchmark.__init__-217"><a href="#Benchmark.__init__-217"><span class="linenos">217</span></a><span class="sd">                    discription dictionaries, otherwise the value of this</span>
</span><span id="Benchmark.__init__-218"><a href="#Benchmark.__init__-218"><span class="linenos">218</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark.__init__-219"><a href="#Benchmark.__init__-219"><span class="linenos">219</span></a><span class="sd">                * `igd`: [inverted generational distance](https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-(IGD)),</span>
</span><span id="Benchmark.__init__-220"><a href="#Benchmark.__init__-220"><span class="linenos">220</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark.__init__-221"><a href="#Benchmark.__init__-221"><span class="linenos">221</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark.__init__-222"><a href="#Benchmark.__init__-222"><span class="linenos">222</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark.__init__-223"><a href="#Benchmark.__init__-223"><span class="linenos">223</span></a><span class="sd">                * `igd+`: [inverted generational distance](https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-Plus-(IGD+)),</span>
</span><span id="Benchmark.__init__-224"><a href="#Benchmark.__init__-224"><span class="linenos">224</span></a><span class="sd">                    requires `pareto_front` to be set in the problem</span>
</span><span id="Benchmark.__init__-225"><a href="#Benchmark.__init__-225"><span class="linenos">225</span></a><span class="sd">                    description dictionaries, otherwise the value of this</span>
</span><span id="Benchmark.__init__-226"><a href="#Benchmark.__init__-226"><span class="linenos">226</span></a><span class="sd">                    indicator will be `NaN`;</span>
</span><span id="Benchmark.__init__-227"><a href="#Benchmark.__init__-227"><span class="linenos">227</span></a><span class="sd">                * `ps`: population size, or equivalently, the size of the</span>
</span><span id="Benchmark.__init__-228"><a href="#Benchmark.__init__-228"><span class="linenos">228</span></a><span class="sd">                    current Pareto front.</span>
</span><span id="Benchmark.__init__-229"><a href="#Benchmark.__init__-229"><span class="linenos">229</span></a>
</span><span id="Benchmark.__init__-230"><a href="#Benchmark.__init__-230"><span class="linenos">230</span></a><span class="sd">                In the result dataframe, the corresponding columns will be</span>
</span><span id="Benchmark.__init__-231"><a href="#Benchmark.__init__-231"><span class="linenos">231</span></a><span class="sd">                named `perf_&lt;name of indicator&gt;`, e.g. `perf_igd`. If left</span>
</span><span id="Benchmark.__init__-232"><a href="#Benchmark.__init__-232"><span class="linenos">232</span></a><span class="sd">                unspecified, defaults to `[&quot;igd&quot;]`.</span>
</span><span id="Benchmark.__init__-233"><a href="#Benchmark.__init__-233"><span class="linenos">233</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark.__init__-234"><a href="#Benchmark.__init__-234"><span class="linenos">234</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">algorithms</span><span class="p">:</span>
</span><span id="Benchmark.__init__-235"><a href="#Benchmark.__init__-235"><span class="linenos">235</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A benchmark requires at least 1 algorithm.&quot;</span><span class="p">)</span>
</span><span id="Benchmark.__init__-236"><a href="#Benchmark.__init__-236"><span class="linenos">236</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">algorithms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Benchmark.__init__-237"><a href="#Benchmark.__init__-237"><span class="linenos">237</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Benchmark.__init__-238"><a href="#Benchmark.__init__-238"><span class="linenos">238</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark.__init__-239"><a href="#Benchmark.__init__-239"><span class="linenos">239</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for algorithm &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; must be a dict.&quot;</span>
</span><span id="Benchmark.__init__-240"><a href="#Benchmark.__init__-240"><span class="linenos">240</span></a>                <span class="p">)</span>
</span><span id="Benchmark.__init__-241"><a href="#Benchmark.__init__-241"><span class="linenos">241</span></a>            <span class="k">if</span> <span class="s2">&quot;algorithm&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
</span><span id="Benchmark.__init__-242"><a href="#Benchmark.__init__-242"><span class="linenos">242</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark.__init__-243"><a href="#Benchmark.__init__-243"><span class="linenos">243</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for algorithm &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; is missing mandatory &quot;</span>
</span><span id="Benchmark.__init__-244"><a href="#Benchmark.__init__-244"><span class="linenos">244</span></a>                    <span class="s2">&quot;key &#39;algorithm&#39;.&quot;</span>
</span><span id="Benchmark.__init__-245"><a href="#Benchmark.__init__-245"><span class="linenos">245</span></a>                <span class="p">)</span>
</span><span id="Benchmark.__init__-246"><a href="#Benchmark.__init__-246"><span class="linenos">246</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span> <span class="o">=</span> <span class="n">algorithms</span>
</span><span id="Benchmark.__init__-247"><a href="#Benchmark.__init__-247"><span class="linenos">247</span></a>
</span><span id="Benchmark.__init__-248"><a href="#Benchmark.__init__-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dump_histories</span> <span class="o">=</span> <span class="n">dump_histories</span>
</span><span id="Benchmark.__init__-249"><a href="#Benchmark.__init__-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span> <span class="o">=</span> <span class="n">max_retry</span>
</span><span id="Benchmark.__init__-250"><a href="#Benchmark.__init__-250"><span class="linenos">250</span></a>
</span><span id="Benchmark.__init__-251"><a href="#Benchmark.__init__-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">n_runs</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Benchmark.__init__-252"><a href="#Benchmark.__init__-252"><span class="linenos">252</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark.__init__-253"><a href="#Benchmark.__init__-253"><span class="linenos">253</span></a>                <span class="s2">&quot;The number of run (for each problem/algorithm pair) must be &quot;</span>
</span><span id="Benchmark.__init__-254"><a href="#Benchmark.__init__-254"><span class="linenos">254</span></a>                <span class="s2">&quot;at least 1.&quot;</span>
</span><span id="Benchmark.__init__-255"><a href="#Benchmark.__init__-255"><span class="linenos">255</span></a>            <span class="p">)</span>
</span><span id="Benchmark.__init__-256"><a href="#Benchmark.__init__-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_n_runs</span> <span class="o">=</span> <span class="n">n_runs</span>
</span><span id="Benchmark.__init__-257"><a href="#Benchmark.__init__-257"><span class="linenos">257</span></a>
</span><span id="Benchmark.__init__-258"><a href="#Benchmark.__init__-258"><span class="linenos">258</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir_path</span><span class="p">)</span>
</span><span id="Benchmark.__init__-259"><a href="#Benchmark.__init__-259"><span class="linenos">259</span></a>
</span><span id="Benchmark.__init__-260"><a href="#Benchmark.__init__-260"><span class="linenos">260</span></a>        <span class="k">if</span> <span class="n">performance_indicators</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark.__init__-261"><a href="#Benchmark.__init__-261"><span class="linenos">261</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;igd&quot;</span><span class="p">]</span>
</span><span id="Benchmark.__init__-262"><a href="#Benchmark.__init__-262"><span class="linenos">262</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Benchmark.__init__-263"><a href="#Benchmark.__init__-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Benchmark.__init__-264"><a href="#Benchmark.__init__-264"><span class="linenos">264</span></a>            <span class="k">for</span> <span class="n">pi</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">performance_indicators</span><span class="p">):</span>
</span><span id="Benchmark.__init__-265"><a href="#Benchmark.__init__-265"><span class="linenos">265</span></a>                <span class="k">if</span> <span class="n">pi</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Benchmark</span><span class="o">.</span><span class="n">SUPPORTED_PERFOMANCE_INDICATORS</span><span class="p">:</span>
</span><span id="Benchmark.__init__-266"><a href="#Benchmark.__init__-266"><span class="linenos">266</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown performance indicator &#39;</span><span class="si">{</span><span class="n">pi</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="Benchmark.__init__-267"><a href="#Benchmark.__init__-267"><span class="linenos">267</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
</span><span id="Benchmark.__init__-268"><a href="#Benchmark.__init__-268"><span class="linenos">268</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_performance_indicators</span><span class="p">)</span>
</span><span id="Benchmark.__init__-269"><a href="#Benchmark.__init__-269"><span class="linenos">269</span></a>
</span><span id="Benchmark.__init__-270"><a href="#Benchmark.__init__-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">problems</span><span class="p">:</span>
</span><span id="Benchmark.__init__-271"><a href="#Benchmark.__init__-271"><span class="linenos">271</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A benchmark requires at least 1 problem.&quot;</span><span class="p">)</span>
</span><span id="Benchmark.__init__-272"><a href="#Benchmark.__init__-272"><span class="linenos">272</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">problems</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Benchmark.__init__-273"><a href="#Benchmark.__init__-273"><span class="linenos">273</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Benchmark.__init__-274"><a href="#Benchmark.__init__-274"><span class="linenos">274</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark.__init__-275"><a href="#Benchmark.__init__-275"><span class="linenos">275</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for problem &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; must be a dict.&quot;</span>
</span><span id="Benchmark.__init__-276"><a href="#Benchmark.__init__-276"><span class="linenos">276</span></a>                <span class="p">)</span>
</span><span id="Benchmark.__init__-277"><a href="#Benchmark.__init__-277"><span class="linenos">277</span></a>            <span class="k">if</span> <span class="s2">&quot;problem&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
</span><span id="Benchmark.__init__-278"><a href="#Benchmark.__init__-278"><span class="linenos">278</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Benchmark.__init__-279"><a href="#Benchmark.__init__-279"><span class="linenos">279</span></a>                    <span class="sa">f</span><span class="s2">&quot;Description for problem &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; is missing mandatory key &quot;</span>
</span><span id="Benchmark.__init__-280"><a href="#Benchmark.__init__-280"><span class="linenos">280</span></a>                    <span class="s2">&quot;&#39;problem&#39;.&quot;</span>
</span><span id="Benchmark.__init__-281"><a href="#Benchmark.__init__-281"><span class="linenos">281</span></a>                <span class="p">)</span>
</span><span id="Benchmark.__init__-282"><a href="#Benchmark.__init__-282"><span class="linenos">282</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_problems</span> <span class="o">=</span> <span class="n">problems</span>
</span></pre></div>


            <div class="docstring"><p>Constructor. The set of problems to be benchmarked is represented by a
dictionary with the following structure::</p>

<pre><code>problems = {
    &lt;problem_name&gt;: &lt;problem_description&gt;,
    &lt;problem_name&gt;: &lt;problem_description&gt;,
}
</code></pre>

<p>where <code>&lt;problem_name&gt;</code> is a user-defined string (but stay reasonable
since it may be used in filenames), and <code>&lt;problem_description&gt;</code> is a
dictionary with the following keys:</p>

<ul>
<li><code>df_n_evals</code> (int, optional): see the explanation of the <code>df</code>
performance indicator below; defaults to <code>1</code>;</li>
<li><code>evaluator</code> (optional): an algorithm evaluator object that will be
applied to every algorithm that run on this problem; if an
algorithm already has an evaluator attached to it (see
<code>&lt;algorithm_description&gt;</code> below), the evaluator attached to this
problem takes precedence; note that the evaluator is deepcopied for
every run of <code>minimize</code>;</li>
<li><code>hv_ref_point</code> (optional, <code>np.ndarray</code>): a reference point for
computing hypervolume performance, see <code>performance_indicators</code>
argument;</li>
<li><code>pareto_front</code> (optional, <code>np.ndarray</code>): a Pareto front subset;</li>
<li><code>problem</code>: a <code>WrappedProblem</code> instance.</li>
</ul>

<p>The set of algorithms to be used is specified similarly::</p>

<pre><code>algorithms = {
    &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,
    &lt;algorithm_name&gt;: &lt;algorithm_description&gt;,
}
</code></pre>

<p>where <code>&lt;algorithm_name&gt;</code> is a user-defined string (but stay reasonable
since it may be used in filenames), and <code>&lt;algorithm_description&gt;</code> is a
dictionary with the following keys:</p>

<ul>
<li><code>algorithm</code>: a pymoo <code>Algorithm</code> object; note that it is deepcopied
for every run of <code>minimize</code>;</li>
<li><code>display</code> (optional): a custom <code>pymoo.util.display.Display</code> object
for customization purposes;</li>
<li><code>evaluator</code> (optional): an algorithm evaluator object; note that it
is deepcopied for every run of <code>minimize</code>;</li>
<li><code>return_least_infeasible</code> (optional, bool): if the algorithm cannot
find a feasable solution, wether the least infeasable solution
should still be returned; defaults to <code>False</code>;</li>
<li><code>seed</code> (optional, int): a seed;</li>
<li><code>termination</code> (optional): a pymoo termination criterion; note that it
is deepcopied for every run of <code>minimize</code>;</li>
<li><code>verbose</code> (optional, bool): wether outputs should be printed during
during the execution of the algorithm; defaults to <code>False</code>.</li>
</ul>

<h6 id="args">Args</h6>

<ul>
<li><strong>algorithms (Dict[str, dict]):</strong>  Dict of all algorithms to be
benchmarked.</li>
<li><strong>dump_histories (bool):</strong>  Wether the history of each
<code>WrappedProblem</code> involved in this benchmark should be written
to disk. Defaults to <code>True</code>.</li>
<li><strong>max_retries (int):</strong>  Maximum number of attempts to run a given
problem-algorithm pair before giving up. Set it to <code>-1</code> to
retry indefinitely.</li>
<li><strong>n_runs (int):</strong>  Number of times to run a given problem/algorithm
pair.</li>
<li><strong>problems (Dict[str, dict]):</strong>  Dict of all problems to be benchmarked.</li>
<li><p><strong>performance_indicators (Optional[List[str]]):</strong>  List of perfomance
indicators to be calculated and included in the result
dataframe (see <code><a href="#Benchmark.final_results">Benchmark.final_results</a></code>). Supported indicators
are</p>

<ul>
<li><code>df</code>: ΔF metric, see the documentation of
<code><a href="indicators/delta_f.html#DeltaF">nmoo.indicators.delta_f.DeltaF</a></code>;</li>
<li><code>gd</code>: <a href="https://pymoo.org/misc/indicators.html#Generational-Distance-(GD)">generational distance</a>,
requires <code>pareto_front</code> to be set in the problem
description dictionaries, otherwise the value of this
indicator will be <code>NaN</code>;</li>
<li><code>gd+</code>: <a href="https://pymoo.org/misc/indicators.html#Generational-Distance-Plus-(GD+)">generational distance plus</a>,
requires <code>pareto_front</code> to be set in the problem
description dictionaries, otherwise the value of this
indicator will be <code>NaN</code>;</li>
<li><code>hv</code>: <a href="https://pymoo.org/misc/indicators.html#Hypervolume">hypervolume</a>,
requires <code>hv_ref_point</code> to be set in the problem
discription dictionaries, otherwise the value of this
indicator will be <code>NaN</code>;</li>
<li><code>igd</code>: <a href="https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-(IGD)">inverted generational distance</a>,
requires <code>pareto_front</code> to be set in the problem
description dictionaries, otherwise the value of this
indicator will be <code>NaN</code>;</li>
<li><code>igd+</code>: <a href="https://pymoo.org/misc/indicators.html#Inverted-Generational-Distance-Plus-(IGD+)">inverted generational distance</a>,
requires <code>pareto_front</code> to be set in the problem
description dictionaries, otherwise the value of this
indicator will be <code>NaN</code>;</li>
<li><code>ps</code>: population size, or equivalently, the size of the
current Pareto front.</li>
</ul>

<p><p>In the result dataframe, the corresponding columns will be
named <code>perf_&lt;name of indicator&gt;</code>, e.g. <code>perf_igd</code>. If left
unspecified, defaults to <code>["igd"]</code>.</p></li>
</ul></p>
</div>


                            </div>
                            <div id="Benchmark.SUPPORTED_PERFOMANCE_INDICATORS" class="classattr">
                                <div class="attr variable">
            <span class="name">SUPPORTED_PERFOMANCE_INDICATORS</span><span class="default_value"> = [&#39;df&#39;, &#39;gd&#39;, &#39;gd+&#39;, &#39;hv&#39;, &#39;igd&#39;, &#39;igd+&#39;, &#39;ps&#39;]</span>

        
    </div>
    <a class="headerlink" href="#Benchmark.SUPPORTED_PERFOMANCE_INDICATORS"></a>
    
    

                            </div>
                            <div id="Benchmark.compute_global_pareto_populations" class="classattr">
                                        <input id="Benchmark.compute_global_pareto_populations-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_global_pareto_populations</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>, </span><span class="param"><span class="o">**</span><span class="n">joblib_kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Benchmark.compute_global_pareto_populations-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark.compute_global_pareto_populations"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark.compute_global_pareto_populations-532"><a href="#Benchmark.compute_global_pareto_populations-532"><span class="linenos">532</span></a>    <span class="k">def</span> <span class="nf">compute_global_pareto_populations</span><span class="p">(</span>
</span><span id="Benchmark.compute_global_pareto_populations-533"><a href="#Benchmark.compute_global_pareto_populations-533"><span class="linenos">533</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark.compute_global_pareto_populations-534"><a href="#Benchmark.compute_global_pareto_populations-534"><span class="linenos">534</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark.compute_global_pareto_populations-535"><a href="#Benchmark.compute_global_pareto_populations-535"><span class="linenos">535</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark.compute_global_pareto_populations-536"><a href="#Benchmark.compute_global_pareto_populations-536"><span class="linenos">536</span></a><span class="sd">        The global Pareto population of a problem-algorithm pair is the merged</span>
</span><span id="Benchmark.compute_global_pareto_populations-537"><a href="#Benchmark.compute_global_pareto_populations-537"><span class="linenos">537</span></a><span class="sd">        population of all pareto populations across all runs of that pair. THis</span>
</span><span id="Benchmark.compute_global_pareto_populations-538"><a href="#Benchmark.compute_global_pareto_populations-538"><span class="linenos">538</span></a><span class="sd">        function calculates global Pareto population of all pairs and dumps it</span>
</span><span id="Benchmark.compute_global_pareto_populations-539"><a href="#Benchmark.compute_global_pareto_populations-539"><span class="linenos">539</span></a><span class="sd">        to `output_dir_path/&lt;problem&gt;.&lt;algorithm&gt;.gpp.npz`.</span>
</span><span id="Benchmark.compute_global_pareto_populations-540"><a href="#Benchmark.compute_global_pareto_populations-540"><span class="linenos">540</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark.compute_global_pareto_populations-541"><a href="#Benchmark.compute_global_pareto_populations-541"><span class="linenos">541</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Computing global Pareto populations&quot;</span><span class="p">)</span>
</span><span id="Benchmark.compute_global_pareto_populations-542"><a href="#Benchmark.compute_global_pareto_populations-542"><span class="linenos">542</span></a>        <span class="n">pa_pairs</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_problems</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_algorithms</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="Benchmark.compute_global_pareto_populations-543"><a href="#Benchmark.compute_global_pareto_populations-543"><span class="linenos">543</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="Benchmark.compute_global_pareto_populations-544"><a href="#Benchmark.compute_global_pareto_populations-544"><span class="linenos">544</span></a>        <span class="n">executor</span><span class="p">(</span>
</span><span id="Benchmark.compute_global_pareto_populations-545"><a href="#Benchmark.compute_global_pareto_populations-545"><span class="linenos">545</span></a>            <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_compute_global_pareto_population</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">an</span><span class="p">,</span> <span class="n">pn</span><span class="p">)</span>
</span><span id="Benchmark.compute_global_pareto_populations-546"><a href="#Benchmark.compute_global_pareto_populations-546"><span class="linenos">546</span></a>            <span class="k">for</span> <span class="n">an</span><span class="p">,</span> <span class="n">pn</span> <span class="ow">in</span> <span class="n">pa_pairs</span>
</span><span id="Benchmark.compute_global_pareto_populations-547"><a href="#Benchmark.compute_global_pareto_populations-547"><span class="linenos">547</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The global Pareto population of a problem-algorithm pair is the merged
population of all pareto populations across all runs of that pair. THis
function calculates global Pareto population of all pairs and dumps it
to <code>output_dir_path/&lt;problem&gt;.&lt;algorithm&gt;.gpp.npz</code>.</p>
</div>


                            </div>
                            <div id="Benchmark.compute_performance_indicators" class="classattr">
                                        <input id="Benchmark.compute_performance_indicators-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_performance_indicators</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>, </span><span class="param"><span class="o">**</span><span class="n">joblib_kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Benchmark.compute_performance_indicators-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark.compute_performance_indicators"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark.compute_performance_indicators-549"><a href="#Benchmark.compute_performance_indicators-549"><span class="linenos">549</span></a>    <span class="k">def</span> <span class="nf">compute_performance_indicators</span><span class="p">(</span>
</span><span id="Benchmark.compute_performance_indicators-550"><a href="#Benchmark.compute_performance_indicators-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark.compute_performance_indicators-551"><a href="#Benchmark.compute_performance_indicators-551"><span class="linenos">551</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark.compute_performance_indicators-552"><a href="#Benchmark.compute_performance_indicators-552"><span class="linenos">552</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark.compute_performance_indicators-553"><a href="#Benchmark.compute_performance_indicators-553"><span class="linenos">553</span></a><span class="sd">        Computes all performance indicators and saves the corresponding</span>
</span><span id="Benchmark.compute_performance_indicators-554"><a href="#Benchmark.compute_performance_indicators-554"><span class="linenos">554</span></a><span class="sd">        dataframes in</span>
</span><span id="Benchmark.compute_performance_indicators-555"><a href="#Benchmark.compute_performance_indicators-555"><span class="linenos">555</span></a><span class="sd">        `output_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`</span>
</span><span id="Benchmark.compute_performance_indicators-556"><a href="#Benchmark.compute_performance_indicators-556"><span class="linenos">556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark.compute_performance_indicators-557"><a href="#Benchmark.compute_performance_indicators-557"><span class="linenos">557</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Computing performance indicators&quot;</span><span class="p">)</span>
</span><span id="Benchmark.compute_performance_indicators-558"><a href="#Benchmark.compute_performance_indicators-558"><span class="linenos">558</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="Benchmark.compute_performance_indicators-559"><a href="#Benchmark.compute_performance_indicators-559"><span class="linenos">559</span></a>        <span class="n">executor</span><span class="p">(</span>
</span><span id="Benchmark.compute_performance_indicators-560"><a href="#Benchmark.compute_performance_indicators-560"><span class="linenos">560</span></a>            <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_compute_performance_indicator</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark.compute_performance_indicators-561"><a href="#Benchmark.compute_performance_indicators-561"><span class="linenos">561</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">()</span>
</span><span id="Benchmark.compute_performance_indicators-562"><a href="#Benchmark.compute_performance_indicators-562"><span class="linenos">562</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Computes all performance indicators and saves the corresponding
dataframes in
<code>output_path/&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv</code></p>
</div>


                            </div>
                            <div id="Benchmark.consolidate" class="classattr">
                                        <input id="Benchmark.consolidate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">consolidate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Benchmark.consolidate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark.consolidate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark.consolidate-564"><a href="#Benchmark.consolidate-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">consolidate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Benchmark.consolidate-565"><a href="#Benchmark.consolidate-565"><span class="linenos">565</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark.consolidate-566"><a href="#Benchmark.consolidate-566"><span class="linenos">566</span></a><span class="sd">        Merges all statistics dataframes</span>
</span><span id="Benchmark.consolidate-567"><a href="#Benchmark.consolidate-567"><span class="linenos">567</span></a><span class="sd">        (`&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv`) and all PI dataframes</span>
</span><span id="Benchmark.consolidate-568"><a href="#Benchmark.consolidate-568"><span class="linenos">568</span></a><span class="sd">        (`&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv`) into a single</span>
</span><span id="Benchmark.consolidate-569"><a href="#Benchmark.consolidate-569"><span class="linenos">569</span></a><span class="sd">        dataframe, and saves it under `output_dir_path/benchmark.csv`.</span>
</span><span id="Benchmark.consolidate-570"><a href="#Benchmark.consolidate-570"><span class="linenos">570</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark.consolidate-571"><a href="#Benchmark.consolidate-571"><span class="linenos">571</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Consolidating statistics&quot;</span><span class="p">)</span>
</span><span id="Benchmark.consolidate-572"><a href="#Benchmark.consolidate-572"><span class="linenos">572</span></a>        <span class="n">all_df</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Benchmark.consolidate-573"><a href="#Benchmark.consolidate-573"><span class="linenos">573</span></a>        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">():</span>
</span><span id="Benchmark.consolidate-574"><a href="#Benchmark.consolidate-574"><span class="linenos">574</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">result_filename</span><span class="p">()</span>
</span><span id="Benchmark.consolidate-575"><a href="#Benchmark.consolidate-575"><span class="linenos">575</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="Benchmark.consolidate-576"><a href="#Benchmark.consolidate-576"><span class="linenos">576</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="Benchmark.consolidate-577"><a href="#Benchmark.consolidate-577"><span class="linenos">577</span></a>                    <span class="s2">&quot;Statistic file </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair &quot;</span>
</span><span id="Benchmark.consolidate-578"><a href="#Benchmark.consolidate-578"><span class="linenos">578</span></a>                    <span class="s2">&quot;most likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-579"><a href="#Benchmark.consolidate-579"><span class="linenos">579</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-580"><a href="#Benchmark.consolidate-580"><span class="linenos">580</span></a>                <span class="p">)</span>
</span><span id="Benchmark.consolidate-581"><a href="#Benchmark.consolidate-581"><span class="linenos">581</span></a>                <span class="k">continue</span>
</span><span id="Benchmark.consolidate-582"><a href="#Benchmark.consolidate-582"><span class="linenos">582</span></a>            <span class="n">all_df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="Benchmark.consolidate-583"><a href="#Benchmark.consolidate-583"><span class="linenos">583</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_df</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Benchmark.consolidate-584"><a href="#Benchmark.consolidate-584"><span class="linenos">584</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_timedelta</span><span class="p">(</span>
</span><span id="Benchmark.consolidate-585"><a href="#Benchmark.consolidate-585"><span class="linenos">585</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span>
</span><span id="Benchmark.consolidate-586"><a href="#Benchmark.consolidate-586"><span class="linenos">586</span></a>        <span class="p">)</span>
</span><span id="Benchmark.consolidate-587"><a href="#Benchmark.consolidate-587"><span class="linenos">587</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span>
</span><span id="Benchmark.consolidate-588"><a href="#Benchmark.consolidate-588"><span class="linenos">588</span></a>            <span class="p">{</span>
</span><span id="Benchmark.consolidate-589"><a href="#Benchmark.consolidate-589"><span class="linenos">589</span></a>                <span class="s2">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-590"><a href="#Benchmark.consolidate-590"><span class="linenos">590</span></a>                <span class="s2">&quot;n_gen&quot;</span><span class="p">:</span> <span class="s2">&quot;uint32&quot;</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-591"><a href="#Benchmark.consolidate-591"><span class="linenos">591</span></a>                <span class="s2">&quot;n_run&quot;</span><span class="p">:</span> <span class="s2">&quot;uint32&quot;</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-592"><a href="#Benchmark.consolidate-592"><span class="linenos">592</span></a>                <span class="s2">&quot;problem&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-593"><a href="#Benchmark.consolidate-593"><span class="linenos">593</span></a>            <span class="p">}</span>
</span><span id="Benchmark.consolidate-594"><a href="#Benchmark.consolidate-594"><span class="linenos">594</span></a>        <span class="p">)</span>
</span><span id="Benchmark.consolidate-595"><a href="#Benchmark.consolidate-595"><span class="linenos">595</span></a>
</span><span id="Benchmark.consolidate-596"><a href="#Benchmark.consolidate-596"><span class="linenos">596</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Consolidating performance indicators&quot;</span><span class="p">)</span>
</span><span id="Benchmark.consolidate-597"><a href="#Benchmark.consolidate-597"><span class="linenos">597</span></a>        <span class="n">all_df</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Benchmark.consolidate-598"><a href="#Benchmark.consolidate-598"><span class="linenos">598</span></a>        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">():</span>
</span><span id="Benchmark.consolidate-599"><a href="#Benchmark.consolidate-599"><span class="linenos">599</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="n">pair</span><span class="o">.</span><span class="n">pi_filename</span><span class="p">()</span>
</span><span id="Benchmark.consolidate-600"><a href="#Benchmark.consolidate-600"><span class="linenos">600</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="Benchmark.consolidate-601"><a href="#Benchmark.consolidate-601"><span class="linenos">601</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="Benchmark.consolidate-602"><a href="#Benchmark.consolidate-602"><span class="linenos">602</span></a>                    <span class="s2">&quot;PI file </span><span class="si">%s</span><span class="s2"> does not exist. The corresponding pair most &quot;</span>
</span><span id="Benchmark.consolidate-603"><a href="#Benchmark.consolidate-603"><span class="linenos">603</span></a>                    <span class="s2">&quot;likely hasn&#39;t finished or failed&quot;</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-604"><a href="#Benchmark.consolidate-604"><span class="linenos">604</span></a>                    <span class="n">path</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-605"><a href="#Benchmark.consolidate-605"><span class="linenos">605</span></a>                <span class="p">)</span>
</span><span id="Benchmark.consolidate-606"><a href="#Benchmark.consolidate-606"><span class="linenos">606</span></a>                <span class="k">continue</span>
</span><span id="Benchmark.consolidate-607"><a href="#Benchmark.consolidate-607"><span class="linenos">607</span></a>            <span class="n">all_df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span id="Benchmark.consolidate-608"><a href="#Benchmark.consolidate-608"><span class="linenos">608</span></a>
</span><span id="Benchmark.consolidate-609"><a href="#Benchmark.consolidate-609"><span class="linenos">609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
</span><span id="Benchmark.consolidate-610"><a href="#Benchmark.consolidate-610"><span class="linenos">610</span></a>            <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_df</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="Benchmark.consolidate-611"><a href="#Benchmark.consolidate-611"><span class="linenos">611</span></a>            <span class="n">how</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">,</span>
</span><span id="Benchmark.consolidate-612"><a href="#Benchmark.consolidate-612"><span class="linenos">612</span></a>            <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;algorithm&quot;</span><span class="p">,</span> <span class="s2">&quot;problem&quot;</span><span class="p">,</span> <span class="s2">&quot;n_gen&quot;</span><span class="p">,</span> <span class="s2">&quot;n_run&quot;</span><span class="p">],</span>
</span><span id="Benchmark.consolidate-613"><a href="#Benchmark.consolidate-613"><span class="linenos">613</span></a>        <span class="p">)</span>
</span><span id="Benchmark.consolidate-614"><a href="#Benchmark.consolidate-614"><span class="linenos">614</span></a>
</span><span id="Benchmark.consolidate-615"><a href="#Benchmark.consolidate-615"><span class="linenos">615</span></a>        <span class="c1"># ???</span>
</span><span id="Benchmark.consolidate-616"><a href="#Benchmark.consolidate-616"><span class="linenos">616</span></a>        <span class="k">if</span> <span class="s2">&quot;Unnamed: 0&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">:</span>
</span><span id="Benchmark.consolidate-617"><a href="#Benchmark.consolidate-617"><span class="linenos">617</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;Unnamed: 0&quot;</span><span class="p">]</span>
</span><span id="Benchmark.consolidate-618"><a href="#Benchmark.consolidate-618"><span class="linenos">618</span></a>
</span><span id="Benchmark.consolidate-619"><a href="#Benchmark.consolidate-619"><span class="linenos">619</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span> <span class="o">/</span> <span class="s2">&quot;benchmark.csv&quot;</span>
</span><span id="Benchmark.consolidate-620"><a href="#Benchmark.consolidate-620"><span class="linenos">620</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Writing results to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Benchmark.consolidate-621"><a href="#Benchmark.consolidate-621"><span class="linenos">621</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dump_results</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Merges all statistics dataframes
(<code>&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.csv</code>) and all PI dataframes
(<code>&lt;problem_name&gt;.&lt;algorithm_name&gt;.&lt;n_run&gt;.pi.csv</code>) into a single
dataframe, and saves it under <code>output_dir_path/benchmark.csv</code>.</p>
</div>


                            </div>
                            <div id="Benchmark.dump_results" class="classattr">
                                        <input id="Benchmark.dump_results-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">dump_results</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;csv&#39;</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="Benchmark.dump_results-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark.dump_results"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark.dump_results-623"><a href="#Benchmark.dump_results-623"><span class="linenos">623</span></a>    <span class="k">def</span> <span class="nf">dump_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Benchmark.dump_results-624"><a href="#Benchmark.dump_results-624"><span class="linenos">624</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark.dump_results-625"><a href="#Benchmark.dump_results-625"><span class="linenos">625</span></a><span class="sd">        Dumps the internal `_result` dataframe.</span>
</span><span id="Benchmark.dump_results-626"><a href="#Benchmark.dump_results-626"><span class="linenos">626</span></a>
</span><span id="Benchmark.dump_results-627"><a href="#Benchmark.dump_results-627"><span class="linenos">627</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark.dump_results-628"><a href="#Benchmark.dump_results-628"><span class="linenos">628</span></a><span class="sd">            path (Union[Path, str]): Path to the output file.</span>
</span><span id="Benchmark.dump_results-629"><a href="#Benchmark.dump_results-629"><span class="linenos">629</span></a><span class="sd">            fmt (str): Text or binary format supported by pandas, see</span>
</span><span id="Benchmark.dump_results-630"><a href="#Benchmark.dump_results-630"><span class="linenos">630</span></a><span class="sd">                `here &lt;https://pandas.pydata.org/docs/user_guide/io.html&gt;`_.</span>
</span><span id="Benchmark.dump_results-631"><a href="#Benchmark.dump_results-631"><span class="linenos">631</span></a><span class="sd">                CSV by default.</span>
</span><span id="Benchmark.dump_results-632"><a href="#Benchmark.dump_results-632"><span class="linenos">632</span></a><span class="sd">            kwargs: Will be passed on the `pandas.DataFrame.to_&lt;fmt&gt;` method.</span>
</span><span id="Benchmark.dump_results-633"><a href="#Benchmark.dump_results-633"><span class="linenos">633</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark.dump_results-634"><a href="#Benchmark.dump_results-634"><span class="linenos">634</span></a>        <span class="n">saver</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Benchmark.dump_results-635"><a href="#Benchmark.dump_results-635"><span class="linenos">635</span></a>            <span class="s2">&quot;csv&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_csv</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-636"><a href="#Benchmark.dump_results-636"><span class="linenos">636</span></a>            <span class="s2">&quot;excel&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_excel</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-637"><a href="#Benchmark.dump_results-637"><span class="linenos">637</span></a>            <span class="s2">&quot;feather&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_feather</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-638"><a href="#Benchmark.dump_results-638"><span class="linenos">638</span></a>            <span class="s2">&quot;gbq&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_gbq</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-639"><a href="#Benchmark.dump_results-639"><span class="linenos">639</span></a>            <span class="s2">&quot;hdf&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-640"><a href="#Benchmark.dump_results-640"><span class="linenos">640</span></a>            <span class="s2">&quot;html&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_html</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-641"><a href="#Benchmark.dump_results-641"><span class="linenos">641</span></a>            <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_json</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-642"><a href="#Benchmark.dump_results-642"><span class="linenos">642</span></a>            <span class="s2">&quot;parquet&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-643"><a href="#Benchmark.dump_results-643"><span class="linenos">643</span></a>            <span class="s2">&quot;pickle&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">,</span>
</span><span id="Benchmark.dump_results-644"><a href="#Benchmark.dump_results-644"><span class="linenos">644</span></a>        <span class="p">}[</span><span class="n">fmt</span><span class="p">]</span>
</span><span id="Benchmark.dump_results-645"><a href="#Benchmark.dump_results-645"><span class="linenos">645</span></a>        <span class="n">saver</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Dumps the internal <code>_result</code> dataframe.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>path (Union[Path, str]):</strong>  Path to the output file.</li>
<li><strong>fmt (str):</strong>  Text or binary format supported by pandas, see
<a href="https://pandas.pydata.org/docs/user_guide/io.html">here </a>.
CSV by default.</li>
<li><strong>kwargs:</strong>  Will be passed on the <code>pandas.DataFrame.to_&lt;fmt&gt;</code> method.</li>
</ul>
</div>


                            </div>
                            <div id="Benchmark.final_results" class="classattr">
                                        <input id="Benchmark.final_results-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">final_results</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">timedeltas_to_microseconds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">reset_index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span>:</span></span>

                <label class="view-source-button" for="Benchmark.final_results-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark.final_results"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark.final_results-647"><a href="#Benchmark.final_results-647"><span class="linenos">647</span></a>    <span class="k">def</span> <span class="nf">final_results</span><span class="p">(</span>
</span><span id="Benchmark.final_results-648"><a href="#Benchmark.final_results-648"><span class="linenos">648</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Benchmark.final_results-649"><a href="#Benchmark.final_results-649"><span class="linenos">649</span></a>        <span class="n">timedeltas_to_microseconds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark.final_results-650"><a href="#Benchmark.final_results-650"><span class="linenos">650</span></a>        <span class="n">reset_index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Benchmark.final_results-651"><a href="#Benchmark.final_results-651"><span class="linenos">651</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="Benchmark.final_results-652"><a href="#Benchmark.final_results-652"><span class="linenos">652</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark.final_results-653"><a href="#Benchmark.final_results-653"><span class="linenos">653</span></a><span class="sd">        Returns a dataframe containing the final row of each</span>
</span><span id="Benchmark.final_results-654"><a href="#Benchmark.final_results-654"><span class="linenos">654</span></a><span class="sd">        algorithm/problem/n_run triple, i.e. the final record of each run of</span>
</span><span id="Benchmark.final_results-655"><a href="#Benchmark.final_results-655"><span class="linenos">655</span></a><span class="sd">        the benchmark.</span>
</span><span id="Benchmark.final_results-656"><a href="#Benchmark.final_results-656"><span class="linenos">656</span></a>
</span><span id="Benchmark.final_results-657"><a href="#Benchmark.final_results-657"><span class="linenos">657</span></a><span class="sd">        If the `reset_index` argument set to `False`, the resulting dataframe</span>
</span><span id="Benchmark.final_results-658"><a href="#Benchmark.final_results-658"><span class="linenos">658</span></a><span class="sd">        will have a multiindex given by the (algorithm, problem, n_run) tuples,</span>
</span><span id="Benchmark.final_results-659"><a href="#Benchmark.final_results-659"><span class="linenos">659</span></a><span class="sd">        e.g.</span>
</span><span id="Benchmark.final_results-660"><a href="#Benchmark.final_results-660"><span class="linenos">660</span></a>
</span><span id="Benchmark.final_results-661"><a href="#Benchmark.final_results-661"><span class="linenos">661</span></a><span class="sd">                                     n_gen  timedelta   perf_gd  ...</span>
</span><span id="Benchmark.final_results-662"><a href="#Benchmark.final_results-662"><span class="linenos">662</span></a><span class="sd">            algorithm problem n_run                              ...</span>
</span><span id="Benchmark.final_results-663"><a href="#Benchmark.final_results-663"><span class="linenos">663</span></a><span class="sd">            nsga2     bnh     1        155     886181  0.477980  ...</span>
</span><span id="Benchmark.final_results-664"><a href="#Benchmark.final_results-664"><span class="linenos">664</span></a><span class="sd">                              2        200      29909  0.480764  ...</span>
</span><span id="Benchmark.final_results-665"><a href="#Benchmark.final_results-665"><span class="linenos">665</span></a><span class="sd">                      zdt1    1        400     752818  0.191490  ...</span>
</span><span id="Benchmark.final_results-666"><a href="#Benchmark.final_results-666"><span class="linenos">666</span></a><span class="sd">                              2        305     979112  0.260930  ...</span>
</span><span id="Benchmark.final_results-667"><a href="#Benchmark.final_results-667"><span class="linenos">667</span></a>
</span><span id="Benchmark.final_results-668"><a href="#Benchmark.final_results-668"><span class="linenos">668</span></a><span class="sd">        (note tha the `timedelta` column has been converted to microseconds,</span>
</span><span id="Benchmark.final_results-669"><a href="#Benchmark.final_results-669"><span class="linenos">669</span></a><span class="sd">        see the `timedeltas_to_microseconds` argument below). If `reset_index`</span>
</span><span id="Benchmark.final_results-670"><a href="#Benchmark.final_results-670"><span class="linenos">670</span></a><span class="sd">        is set to `True` (the default), then the index is reset, giving</span>
</span><span id="Benchmark.final_results-671"><a href="#Benchmark.final_results-671"><span class="linenos">671</span></a><span class="sd">        something like this:</span>
</span><span id="Benchmark.final_results-672"><a href="#Benchmark.final_results-672"><span class="linenos">672</span></a>
</span><span id="Benchmark.final_results-673"><a href="#Benchmark.final_results-673"><span class="linenos">673</span></a><span class="sd">              algorithm problem  n_run  n_gen  timedelta   perf_gd  ...</span>
</span><span id="Benchmark.final_results-674"><a href="#Benchmark.final_results-674"><span class="linenos">674</span></a><span class="sd">            0     nsga2     bnh      1    155     886181  0.477980  ...</span>
</span><span id="Benchmark.final_results-675"><a href="#Benchmark.final_results-675"><span class="linenos">675</span></a><span class="sd">            1     nsga2     bnh      2    200      29909  0.480764  ...</span>
</span><span id="Benchmark.final_results-676"><a href="#Benchmark.final_results-676"><span class="linenos">676</span></a><span class="sd">            2     nsga2    zdt1      1    400     752818  0.191490  ...</span>
</span><span id="Benchmark.final_results-677"><a href="#Benchmark.final_results-677"><span class="linenos">677</span></a><span class="sd">            3     nsga2    zdt1      2    305     979112  0.260930  ...</span>
</span><span id="Benchmark.final_results-678"><a href="#Benchmark.final_results-678"><span class="linenos">678</span></a>
</span><span id="Benchmark.final_results-679"><a href="#Benchmark.final_results-679"><span class="linenos">679</span></a><span class="sd">        This form is easier to plot.</span>
</span><span id="Benchmark.final_results-680"><a href="#Benchmark.final_results-680"><span class="linenos">680</span></a>
</span><span id="Benchmark.final_results-681"><a href="#Benchmark.final_results-681"><span class="linenos">681</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark.final_results-682"><a href="#Benchmark.final_results-682"><span class="linenos">682</span></a><span class="sd">            reset_index (bool): Wether to reset the index. Defaults to</span>
</span><span id="Benchmark.final_results-683"><a href="#Benchmark.final_results-683"><span class="linenos">683</span></a><span class="sd">                `True`.</span>
</span><span id="Benchmark.final_results-684"><a href="#Benchmark.final_results-684"><span class="linenos">684</span></a><span class="sd">            timedeltas_to_microseconds (bool): Wether to convert the</span>
</span><span id="Benchmark.final_results-685"><a href="#Benchmark.final_results-685"><span class="linenos">685</span></a><span class="sd">                timedeltas column to microseconds. Defaults to `True`.</span>
</span><span id="Benchmark.final_results-686"><a href="#Benchmark.final_results-686"><span class="linenos">686</span></a>
</span><span id="Benchmark.final_results-687"><a href="#Benchmark.final_results-687"><span class="linenos">687</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark.final_results-688"><a href="#Benchmark.final_results-688"><span class="linenos">688</span></a>        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;algorithm&quot;</span><span class="p">,</span> <span class="s2">&quot;problem&quot;</span><span class="p">,</span> <span class="s2">&quot;n_run&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
</span><span id="Benchmark.final_results-689"><a href="#Benchmark.final_results-689"><span class="linenos">689</span></a>        <span class="k">if</span> <span class="n">timedeltas_to_microseconds</span><span class="p">:</span>
</span><span id="Benchmark.final_results-690"><a href="#Benchmark.final_results-690"><span class="linenos">690</span></a>            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timedelta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">microseconds</span>
</span><span id="Benchmark.final_results-691"><a href="#Benchmark.final_results-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="k">if</span> <span class="n">reset_index</span> <span class="k">else</span> <span class="n">df</span>
</span></pre></div>


            <div class="docstring"><p>Returns a dataframe containing the final row of each
algorithm/problem/n_run triple, i.e. the final record of each run of
the benchmark.</p>

<p>If the <code>reset_index</code> argument set to <code>False</code>, the resulting dataframe
will have a multiindex given by the (algorithm, problem, n_run) tuples,
e.g.</p>

<pre><code>                         n_gen  timedelta   perf_gd  ...
algorithm problem n_run                              ...
nsga2     bnh     1        155     886181  0.477980  ...
                  2        200      29909  0.480764  ...
          zdt1    1        400     752818  0.191490  ...
                  2        305     979112  0.260930  ...
</code></pre>

<p>(note tha the <code>timedelta</code> column has been converted to microseconds,
see the <code>timedeltas_to_microseconds</code> argument below). If <code>reset_index</code>
is set to <code>True</code> (the default), then the index is reset, giving
something like this:</p>

<pre><code>  algorithm problem  n_run  n_gen  timedelta   perf_gd  ...
0     nsga2     bnh      1    155     886181  0.477980  ...
1     nsga2     bnh      2    200      29909  0.480764  ...
2     nsga2    zdt1      1    400     752818  0.191490  ...
3     nsga2    zdt1      2    305     979112  0.260930  ...
</code></pre>

<p>This form is easier to plot.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>reset_index (bool):</strong>  Wether to reset the index. Defaults to
<code>True</code>.</li>
<li><strong>timedeltas_to_microseconds (bool):</strong>  Wether to convert the
timedeltas column to microseconds. Defaults to <code>True</code>.</li>
</ul>
</div>


                            </div>
                            <div id="Benchmark.run" class="classattr">
                                        <input id="Benchmark.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>,</span><span class="param">	<span class="n">n_post_processing_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>,</span><span class="param">	<span class="o">**</span><span class="n">joblib_kwargs</span></span>)</span>

                <label class="view-source-button" for="Benchmark.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Benchmark.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Benchmark.run-693"><a href="#Benchmark.run-693"><span class="linenos">693</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="Benchmark.run-694"><a href="#Benchmark.run-694"><span class="linenos">694</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Benchmark.run-695"><a href="#Benchmark.run-695"><span class="linenos">695</span></a>        <span class="n">n_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="Benchmark.run-696"><a href="#Benchmark.run-696"><span class="linenos">696</span></a>        <span class="n">n_post_processing_jobs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="Benchmark.run-697"><a href="#Benchmark.run-697"><span class="linenos">697</span></a>        <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">,</span>
</span><span id="Benchmark.run-698"><a href="#Benchmark.run-698"><span class="linenos">698</span></a>    <span class="p">):</span>
</span><span id="Benchmark.run-699"><a href="#Benchmark.run-699"><span class="linenos">699</span></a>        <span class="sd">&quot;&quot;&quot;</span>
</span><span id="Benchmark.run-700"><a href="#Benchmark.run-700"><span class="linenos">700</span></a><span class="sd">        Runs the benchmark sequentially. Makes your laptop go brr. The</span>
</span><span id="Benchmark.run-701"><a href="#Benchmark.run-701"><span class="linenos">701</span></a><span class="sd">        histories of all problems are progressively dumped in the specified</span>
</span><span id="Benchmark.run-702"><a href="#Benchmark.run-702"><span class="linenos">702</span></a><span class="sd">        output directory as the benchmark run. At the end, the benchmark</span>
</span><span id="Benchmark.run-703"><a href="#Benchmark.run-703"><span class="linenos">703</span></a><span class="sd">        results are dumped in `output_dir_path/benchmark.csv`.</span>
</span><span id="Benchmark.run-704"><a href="#Benchmark.run-704"><span class="linenos">704</span></a>
</span><span id="Benchmark.run-705"><a href="#Benchmark.run-705"><span class="linenos">705</span></a><span class="sd">        Args:</span>
</span><span id="Benchmark.run-706"><a href="#Benchmark.run-706"><span class="linenos">706</span></a><span class="sd">            n_jobs (int): Number of processes to use. See the `joblib.Parallel`_</span>
</span><span id="Benchmark.run-707"><a href="#Benchmark.run-707"><span class="linenos">707</span></a><span class="sd">                documentation. Defaults to `-1`, i.e. all CPUs are used.</span>
</span><span id="Benchmark.run-708"><a href="#Benchmark.run-708"><span class="linenos">708</span></a><span class="sd">            n_post_processing_jobs (int): Number of processes to use for post</span>
</span><span id="Benchmark.run-709"><a href="#Benchmark.run-709"><span class="linenos">709</span></a><span class="sd">                processing tasks (computing global Pareto populations and</span>
</span><span id="Benchmark.run-710"><a href="#Benchmark.run-710"><span class="linenos">710</span></a><span class="sd">                performance indicators). These are memory-intensive tasks.</span>
</span><span id="Benchmark.run-711"><a href="#Benchmark.run-711"><span class="linenos">711</span></a><span class="sd">                Defaults to `2`.</span>
</span><span id="Benchmark.run-712"><a href="#Benchmark.run-712"><span class="linenos">712</span></a><span class="sd">            joblib_kwargs (dict): Additional kwargs to pass on to the</span>
</span><span id="Benchmark.run-713"><a href="#Benchmark.run-713"><span class="linenos">713</span></a><span class="sd">                `joblib.Parallel`_ instance.</span>
</span><span id="Benchmark.run-714"><a href="#Benchmark.run-714"><span class="linenos">714</span></a>
</span><span id="Benchmark.run-715"><a href="#Benchmark.run-715"><span class="linenos">715</span></a><span class="sd">        .. _joblib.Parallel:</span>
</span><span id="Benchmark.run-716"><a href="#Benchmark.run-716"><span class="linenos">716</span></a><span class="sd">            https://joblib.readthedocs.io/en/latest/generated/joblib.Parallel.html</span>
</span><span id="Benchmark.run-717"><a href="#Benchmark.run-717"><span class="linenos">717</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Benchmark.run-718"><a href="#Benchmark.run-718"><span class="linenos">718</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">):</span>
</span><span id="Benchmark.run-719"><a href="#Benchmark.run-719"><span class="linenos">719</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir_path</span><span class="p">)</span>
</span><span id="Benchmark.run-720"><a href="#Benchmark.run-720"><span class="linenos">720</span></a>        <span class="n">pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_pairs</span><span class="p">()</span>
</span><span id="Benchmark.run-721"><a href="#Benchmark.run-721"><span class="linenos">721</span></a>        <span class="n">executor</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span><span class="p">)</span>
</span><span id="Benchmark.run-722"><a href="#Benchmark.run-722"><span class="linenos">722</span></a>        <span class="n">current_round</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Benchmark.run-723"><a href="#Benchmark.run-723"><span class="linenos">723</span></a>        <span class="k">while</span> <span class="p">(</span>
</span><span id="Benchmark.run-724"><a href="#Benchmark.run-724"><span class="linenos">724</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">current_round</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span>
</span><span id="Benchmark.run-725"><a href="#Benchmark.run-725"><span class="linenos">725</span></a>        <span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="Benchmark.run-726"><a href="#Benchmark.run-726"><span class="linenos">726</span></a>            <span class="n">executor</span><span class="p">(</span>
</span><span id="Benchmark.run-727"><a href="#Benchmark.run-727"><span class="linenos">727</span></a>                <span class="n">delayed</span><span class="p">(</span><span class="n">Benchmark</span><span class="o">.</span><span class="n">_run_pair</span><span class="p">)(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark.run-728"><a href="#Benchmark.run-728"><span class="linenos">728</span></a>                <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span>
</span><span id="Benchmark.run-729"><a href="#Benchmark.run-729"><span class="linenos">729</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark.run-730"><a href="#Benchmark.run-730"><span class="linenos">730</span></a>            <span class="p">)</span>
</span><span id="Benchmark.run-731"><a href="#Benchmark.run-731"><span class="linenos">731</span></a>            <span class="n">current_round</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Benchmark.run-732"><a href="#Benchmark.run-732"><span class="linenos">732</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="Benchmark.run-733"><a href="#Benchmark.run-733"><span class="linenos">733</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="Benchmark.run-734"><a href="#Benchmark.run-734"><span class="linenos">734</span></a>                <span class="s2">&quot;Benchmark finished, but some pairs could not be run &quot;</span>
</span><span id="Benchmark.run-735"><a href="#Benchmark.run-735"><span class="linenos">735</span></a>                <span class="s2">&quot;successfully within the retry budget (</span><span class="si">%d</span><span class="s2">):&quot;</span><span class="p">,</span>
</span><span id="Benchmark.run-736"><a href="#Benchmark.run-736"><span class="linenos">736</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_max_retry</span><span class="p">,</span>
</span><span id="Benchmark.run-737"><a href="#Benchmark.run-737"><span class="linenos">737</span></a>            <span class="p">)</span>
</span><span id="Benchmark.run-738"><a href="#Benchmark.run-738"><span class="linenos">738</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pair_done</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">pairs</span><span class="p">):</span>
</span><span id="Benchmark.run-739"><a href="#Benchmark.run-739"><span class="linenos">739</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;    [</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pair</span><span class="p">)</span>
</span><span id="Benchmark.run-740"><a href="#Benchmark.run-740"><span class="linenos">740</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_global_pareto_populations</span><span class="p">(</span>
</span><span id="Benchmark.run-741"><a href="#Benchmark.run-741"><span class="linenos">741</span></a>            <span class="n">n_post_processing_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark.run-742"><a href="#Benchmark.run-742"><span class="linenos">742</span></a>        <span class="p">)</span>
</span><span id="Benchmark.run-743"><a href="#Benchmark.run-743"><span class="linenos">743</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_performance_indicators</span><span class="p">(</span>
</span><span id="Benchmark.run-744"><a href="#Benchmark.run-744"><span class="linenos">744</span></a>            <span class="n">n_post_processing_jobs</span><span class="p">,</span> <span class="o">**</span><span class="n">joblib_kwargs</span>
</span><span id="Benchmark.run-745"><a href="#Benchmark.run-745"><span class="linenos">745</span></a>        <span class="p">)</span>
</span><span id="Benchmark.run-746"><a href="#Benchmark.run-746"><span class="linenos">746</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consolidate</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Runs the benchmark sequentially. Makes your laptop go brr. The
histories of all problems are progressively dumped in the specified
output directory as the benchmark run. At the end, the benchmark
results are dumped in <code>output_dir_path/benchmark.csv</code>.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>n_jobs (int):</strong>  Number of processes to use. See the <a href="https://joblib.readthedocs.io/en/latest/generated/joblib.Parallel.html">joblib.Parallel</a>
documentation. Defaults to <code>-1</code>, i.e. all CPUs are used.</li>
<li><strong>n_post_processing_jobs (int):</strong>  Number of processes to use for post
processing tasks (computing global Pareto populations and
performance indicators). These are memory-intensive tasks.
Defaults to <code>2</code>.</li>
<li><strong>joblib_kwargs (dict):</strong>  Additional kwargs to pass on to the
<a href="https://joblib.readthedocs.io/en/latest/generated/joblib.Parallel.html">joblib.Parallel</a> instance.</li>
</ul>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.type) {
                    case "function":
                        heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span><span class="signature">${doc.signature}:</span>`;
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value">${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>